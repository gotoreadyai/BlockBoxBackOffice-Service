import{j as e,r as t,R as l}from"./react-1HmkrDbp.js";import{c as a}from"./react-dom-rf6Ir-x6.js";import{L as s,B as r}from"./react-router-dom-sXgolB4Q.js";import{F as n}from"./react-icons-Bf9n_TIE.js";import{Q as o,a as d,u as i,b as c,c as m}from"./@tanstack-Bvc_O6Tp.js";import{p as u,i as p,f as h}from"./date-fns-DRFbL8hS.js";import{a as x,d as j,e as y,f as N}from"./react-router-BZ98txhT.js";import"./daisyui-CcDWnvUM.js";import{v as b}from"./uuid-aGgpFg1T.js";import"./camelcase-css-DK2cFEjy.js";import"./scheduler-DhxmCZ7v.js";import"./@remix-run-BGIWjZ3f.js";import"./postcss-js-2lojRTWs.js";import"./postcss-CRVEJhQe.js";import"./picocolors-NJ40uvHn.js";import"./nanoid-BtLXeu9i.js";import"./css-selector-tokenizer-BaFDaa83.js";import"./fastparse-D1qLkcQ1.js";import"./cssesc-xwk1Qk3S.js";import"./culori-Db-KMzJI.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g=()=>e.jsx("img",{src:"/logo.svg"}),w=({children:t,items:l})=>e.jsxs("div",{className:"drawer lg:drawer-open",children:[e.jsx("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),e.jsxs("div",{className:"drawer-content p-md",children:[e.jsx("label",{htmlFor:"my-drawer-2",className:"btn btn-ghost drawer-button lg:hidden mb-4",children:e.jsx(n,{})}),t]}),e.jsxs("div",{className:"drawer-side shadow-xl",children:[e.jsx("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),e.jsxs("div",{className:"menu text-base-content min-h-full w-80 gap-pl bg-base-100 p-0 gap-px",children:[e.jsx("div",{className:"px-6 py-2 bg-base-300",children:e.jsx(g,{})}),e.jsx("ul",{className:"p-4 bg-base-200 capitalize",children:l.map(((t,l)=>e.jsx("li",{children:e.jsx(s,{to:`dashboard/pl/${t}`,children:t})},l)))}),e.jsx("div",{className:"flex-1 bg-base-200"})]})]})]}),f=new o,A=({children:t})=>e.jsx(d,{client:f,children:t}),v={workspaces:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},documents:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},content:{type:"TEXT",allowNull:!1},workspaceId:{type:"UUID",allowNull:!1,references:{model:"Workspaces",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},categories:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},parentId:{type:"UUID",allowNull:!0},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},documentCategories:{documentId:{type:"UUID",allowNull:!0,primaryKey:!0,references:{model:"Documents",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},categoryId:{type:"UUID",allowNull:!0,primaryKey:!0,references:{model:"Categories",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},users:{id:{type:"UUID",allowNull:!1,primaryKey:!0},email:{type:"STRING",allowNull:!1},password:{type:"STRING",allowNull:!1},firstName:{type:"STRING",allowNull:!1},lastName:{type:"STRING",allowNull:!1},role:{type:"ENUM",allowNull:!1},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},languages:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},lessonObjectives:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},languageId:{type:"UUID",allowNull:!1,references:{model:"Languages",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},bookTitles:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},lessonObjectiveId:{type:"UUID",allowNull:!1,references:{model:"LessonObjectives",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},unitTitles:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},bookTitleId:{type:"UUID",allowNull:!1,references:{model:"BookTitles",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},subjects:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},unitTitleId:{type:"UUID",allowNull:!1,references:{model:"UnitTitles",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},lessonStrategies:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},content:{type:"TEXT",allowNull:!1},subjectId:{type:"UUID",allowNull:!1,references:{model:"Subjects",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}}},C={workspaces:"workspace",documents:"document",categories:"category",documentCategories:"documentCategory",users:"user",languages:"language",lessonObjectives:"lessonObjective",bookTitles:"bookTitle",unitTitles:"unitTitle",subjects:"subject",lessonStrategies:"lessonStrategy"},D="http://localhost:3004",k=({config:t,selectedItem:l,setSelectedItem:a})=>t?Object.entries(t).map((([t,s])=>{const r=s;if(["id","createdAt","updatedAt"].includes(t))return null;const n=(e=>{switch(e){case"STRING":case"UUID":default:return"text";case"DATE":return"date"}})(r.type);return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:t}),e.jsx("input",{type:n,placeholder:t,value:(null==l?void 0:l[t])||"",onChange:e=>a({...l,[t]:e.target.value}),className:"input input-bordered w-full"})]},t)})):null,T=({config:t,handleSelect:l,model:a,data:s,deleteMutation:r})=>{const n=a&&s&&s[a].items||[];return n.map((a=>e.jsxs("tr",{children:[Object.keys(t).map((t=>{const l=a[t],s="string"==typeof l&&l.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)?(e=>{const t=u(e);return p(t)?h(t,"yyyy-MM-dd HH:mm:ss"):e})(l):l;return e.jsx("td",{className:"whitespace-nowrap text-ellipsis max-w-px overflow-hidden",children:s},t)})),e.jsxs("td",{className:"gap-1 flex",children:[e.jsx("button",{className:"btn btn-info btn-xs",onClick:()=>l(a),children:"Edit"}),e.jsx("button",{className:"btn btn-error btn-xs",onClick:()=>{return e=a.id,r.mutate(e);var e},children:"Delete"})]})]},a.id)))},I=({children:t,handleClose:l})=>e.jsxs("dialog",{open:!0,className:"modal modal-top",children:[e.jsx("div",{className:"modal-backdrop bg-primary-content opacity-20",onClick:l}),e.jsx("div",{className:"modal-box w-full ",children:e.jsxs("div",{className:"container m-auto flex flex-col gap-md",children:[e.jsxs("div",{className:"w-52",children:[e.jsx(g,{})," "]}),e.jsx("h2",{className:"text-2xl font-bold",children:"Create New Item"}),e.jsx("form",{method:"dialog",children:t})]})})]}),E=()=>{const l=x(),{workspace:a,model:s,action:r}=j(),n=i(),[o,d]=t.useState(null),u=`/${a}/pl/${s}`,{data:p,isLoading:h,error:y}=c({queryKey:[s],queryFn:()=>(async e=>{const t=await fetch(`${D}/${e}`);if(!t.ok)throw new Error(`Failed to fetch ${e}`);return t.json()})(s||""),enabled:!!s}),N=s?v[s]:null,b=()=>{n.invalidateQueries({queryKey:[s]}),d(null)},g=m({mutationFn:e=>(async(e,t)=>{const l=C[e]||"",a=await fetch(`${D}/${l}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok||""===l)throw new Error(`Failed to create ${e}`);return a.json()})(s||"",e),onSuccess:b}),w=m({mutationFn:({id:e,item:t})=>(async(e,t,l)=>{const a=await fetch(`${D}/${e}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!a.ok)throw new Error(`Failed to update ${e}`);return a.json()})(s||"",e,t),onSuccess:b}),f=m({mutationFn:e=>(async(e,t)=>{const l=C[e]||"",a=await fetch(`${D}/${l}/${t}`,{method:"DELETE"});if(!a.ok||""===l)throw new Error(`Failed to delete ${e}`);return a.json()})(s||"",e),onSuccess:b}),A=()=>{d(null),l(`${u}`)};return h?e.jsx("div",{children:"Loading..."}):y?e.jsxs("div",{children:["Error loading ",s]}):N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-md items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase",children:s}),e.jsx("button",{className:"btn btn-primary",onClick:()=>l(`${u}/create`),children:"Create New Item"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("table",{className:"table table-zebra w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{children:N?e.jsxs(e.Fragment,{children:[Object.keys(N).map((t=>e.jsx("th",{children:t},t))),e.jsx("th",{children:"Actions"})]}):null})}),e.jsx("tbody",{children:s&&p&&e.jsx(T,{config:N,handleSelect:e=>{d(e),l(`${u}/create`)},model:s,data:p,deleteMutation:f})})]})}),"create"===r&&e.jsxs(I,{handleClose:A,children:[e.jsx(k,{config:N,selectedItem:o,setSelectedItem:d}),e.jsx("button",{className:"btn btn-success mt-2",onClick:()=>{(null==o?void 0:o.id)?w.mutate({id:o.id,item:o}):g.mutate(o),l(`${u}`)},children:"Save"}),e.jsx("button",{className:"btn btn-secondary mt-2 ml-2",onClick:A,children:"Cancel"})]})]}):e.jsxs("div",{children:['Error: Configuration could not be loaded for model "',s,'".']})},S=({theme:t,handleThemeChange:l})=>e.jsx("div",{className:"join join-horizontal mx-md",children:["default","light","dark","cupcake","aqua","retro","cyberpunk"].map((a=>e.jsx("input",{type:"radio",name:"theme-buttons",className:"btn theme-controller join-item btn-sm font-thin","aria-label":a.charAt(0).toUpperCase()+a.slice(1),value:a,checked:t===a,onChange:l},a)))}),U=({level:t,content:l})=>{const a=`h${t}`;return e.jsx(a,{className:"font-bold my-4",children:l})},$=({src:t,alt:l})=>e.jsx("img",{src:t,alt:l,className:"my-4 w-full"}),R=({items:t,ordered:l=!1})=>{const a=l?"ol":"ul";return e.jsx(a,{className:"list-disc list-inside my-4",children:t.map(((t,l)=>e.jsx("li",{children:t},l)))})},F=({content:t,author:l})=>e.jsxs("blockquote",{className:"border-l-4 pl-4 my-4 italic",children:[t,l&&e.jsxs("cite",{className:"block mt-2 text-right",children:["- ",l]})]}),O=({content:t})=>e.jsx("p",{children:t}),K=({block:t})=>(t=>{switch(t.type){case"text":return e.jsx(O,{content:t.data.content});case"image":return e.jsx($,{src:t.data.src,alt:t.data.alt});case"heading":return e.jsx(U,{level:t.data.level,content:t.data.content});case"quote":return e.jsx(F,{content:t.data.content,author:t.data.author});case"list":return e.jsx(R,{items:t.data.items,ordered:t.data.ordered});default:return null}})(t),G=({blocks:t})=>e.jsx("div",{children:t.map(((t,l)=>e.jsx("div",{children:e.jsx(K,{block:t})},l)))}),L=({blocks:l,setBlocks:a})=>{const[s,r]=t.useState(null),n=e=>{const t={id:`${Date.now()}`,type:e,data:d(e)};let n=[];if(s){const e=l.findIndex((e=>e.id===s));n=[...l],n.splice(e+1,0,t)}else n=[...l,t];a(n),r(t.id)},o=(e,t)=>{a(l.map((l=>l.id===e?{...l,data:t}:l)))},d=e=>{switch(e){case"text":return{content:"New text content"};case"image":return{src:"https://via.placeholder.com/150",alt:"Placeholder image"};case"heading":return{level:1,content:"New Heading"};case"quote":return{content:"New Quote",author:"Author Name"};case"list":return{items:["Item 1","Item 2"],ordered:!1};default:return{}}},i=t=>{switch(t.type){case"text":return e.jsx("input",{type:"text",value:t.data.content,onChange:e=>o(t.id,{content:e.target.value}),className:"border p-2 w-full"});case"image":return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:t.data.src,onChange:e=>o(t.id,{...t.data,src:e.target.value}),className:"border p-2 w-full",placeholder:"Image URL"}),e.jsx("input",{type:"text",value:t.data.alt,onChange:e=>o(t.id,{...t.data,alt:e.target.value}),className:"border p-2 w-full mt-2",placeholder:"Alt text"})]});case"heading":return e.jsxs("div",{children:[e.jsx("input",{type:"number",value:t.data.level,onChange:e=>o(t.id,{...t.data,level:Number(e.target.value)}),className:"border p-2 w-full",placeholder:"Heading level"}),e.jsx("input",{type:"text",value:t.data.content,onChange:e=>o(t.id,{...t.data,content:e.target.value}),className:"border p-2 w-full mt-2",placeholder:"Heading content"})]});case"quote":return e.jsxs("div",{children:[e.jsx("textarea",{value:t.data.content,onChange:e=>o(t.id,{...t.data,content:e.target.value}),className:"border p-2 w-full",placeholder:"Quote content"}),e.jsx("input",{type:"text",value:t.data.author,onChange:e=>o(t.id,{...t.data,author:e.target.value}),className:"border p-2 w-full mt-2",placeholder:"Author"})]});case"list":return e.jsxs("div",{children:[e.jsx("textarea",{value:t.data.items.join("\n"),onChange:e=>o(t.id,{...t.data,items:e.target.value.split("\n")}),className:"border p-2 w-full",placeholder:"List items (one per line)"}),e.jsxs("label",{className:"mt-2 block",children:[e.jsx("input",{type:"checkbox",checked:t.data.ordered,onChange:e=>o(t.id,{...t.data,ordered:e.target.checked})}),"Ordered List"]})]});default:return null}};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("button",{onClick:()=>n("text"),className:"btn btn-primary mr-2",children:"Add Text"}),e.jsx("button",{onClick:()=>n("image"),className:"btn btn-primary mr-2",children:"Add Image"}),e.jsx("button",{onClick:()=>n("heading"),className:"btn btn-primary mr-2",children:"Add Heading"}),e.jsx("button",{onClick:()=>n("quote"),className:"btn btn-primary mr-2",children:"Add Quote"}),e.jsx("button",{onClick:()=>n("list"),className:"btn btn-primary mr-2",children:"Add List"})]}),e.jsx("div",{children:l.map(((t,n)=>e.jsxs("div",{className:"mb-4 border p-2 "+(s===t.id?"border-blue-500":"border-gray-300"),onClick:()=>r(t.id),children:[s===t.id&&e.jsxs("div",{className:"flex justify-end mb-2",children:[e.jsx("button",{onClick:()=>(e=>{if(0===e)return;const t=[...l];[t[e],t[e-1]]=[t[e-1],t[e]],a(t)})(n),className:"btn btn-secondary mr-2",children:"Up"}),e.jsx("button",{onClick:()=>(e=>{if(e===l.length-1)return;const t=[...l];[t[e],t[e+1]]=[t[e+1],t[e]],a(t)})(n),className:"btn btn-secondary mr-2",children:"Down"}),e.jsx("button",{onClick:()=>{return e=t.id,a(l.filter((t=>t.id!==e))),void r(null);var e},className:"btn btn-error mr-2",children:"Remove"}),e.jsx("label",{htmlFor:`modal-${t.id}`,className:"btn btn-primary",children:"Edit"})]}),e.jsx(G,{blocks:[t]}),s===t.id&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",id:`modal-${t.id}`,className:"modal-toggle"}),e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Edit Block"}),i(t),e.jsx("div",{className:"modal-action",children:e.jsx("label",{htmlFor:`modal-${t.id}`,className:"btn",children:"Close"})})]})})]})]},t.id)))})]})};function q(){const[l,a]=t.useState(localStorage.getItem("theme")||"default");t.useEffect((()=>{document.documentElement.setAttribute("data-theme",l),localStorage.setItem("theme",l)}),[l]);const[s,n]=t.useState([{id:b(),type:"heading",data:{level:1,content:"Introduction"}},{id:b(),type:"text",data:{content:"This is an example of a text block."}},{id:b(),type:"image",data:{src:"/path/to/image.jpg",alt:"Example Image"}},{id:b(),type:"quote",data:{content:"This is a quote.",author:"Author Name"}},{id:b(),type:"list",data:{items:["First item","Second item","Third item"],ordered:!0}}]);return e.jsx("div",{className:"transition-colors ","data-theme":l,children:e.jsx(A,{children:e.jsx(r,{children:e.jsx(w,{items:Object.keys(C),children:e.jsxs("div",{className:"min-h-full flex flex-col gap-md",children:[e.jsx("div",{className:" bg-base-300 flex px-md",children:e.jsx("div",{className:"breadcrumbs text-sm",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{children:"Home"})}),e.jsx("li",{children:e.jsx("a",{children:"Documents"})}),e.jsx("li",{children:"Add Document"})]})})}),e.jsxs(y,{children:[e.jsx(N,{path:"/",element:e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(G,{blocks:s})})}),e.jsx(N,{path:"/editor/",element:e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(L,{blocks:s,setBlocks:n})})}),e.jsx(N,{path:"/:lang",element:e.jsx("div",{role:"alert",className:"alert alert-warning",children:"Route path is missing"})}),e.jsx(N,{path:":workspace/:lang/:model",element:e.jsx(E,{})}),e.jsx(N,{path:":workspace/:lang/:model/:action",element:e.jsx(E,{})})]}),e.jsx("div",{className:"flex-1"}),e.jsx(S,{theme:l,handleThemeChange:e=>{a(e.target.value)}})]})})})})})}a.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(q,{})}));
