import{r as e,j as t}from"./vendor-CipjtVa5.js";import{b as s,l as n}from"./index-DqDPqpRq.js";import{A as o}from"./ActionMsg-C5vV3H-3.js";const a=({actions:a=[],reloadOnParamsChange:i=!1,onComplete:l})=>{const[c,r]=e.useState(null),[u,f]=e.useState(0),[m,d]=e.useState(!1),[p,h]=e.useState(null),{getAll:j}=s(),[g,y]=e.useState(JSON.stringify(j()));e.useEffect((()=>{if(i){const e=JSON.stringify(j());g!==e&&(y(e),f(0),d(!1),h(null),r(null))}}),[i,j]),e.useEffect((()=>{if(!p)if(u<a.length){(async()=>{try{await n(a[u].action,r,h)}catch(e){h("Failed to load component")}})()}else u>=a.length&&!m&&(d(!0),l?.(!0))}),[a,u,p,l]);return t.jsxs("div",{className:"min-h-12 flex items-center justify-center",children:[p&&t.jsx(o,{type:"error",children:p}),!m&&c&&a[u]&&!p&&t.jsx(c,{scope:a[u].scope,onActionResult:async e=>{e?(await new Promise((e=>setTimeout(e,0))),u<a.length-1?f((e=>e+1)):(d(!0),l?.(!0))):(h("Action failed"),l?.(!1))}},u),m&&!p&&t.jsx(o,{type:"success",children:"Actions queue complete"})]})};export{a as default};
