import{r as e,j as s}from"./vendor-C2_yBtKn.js";import{a as r,u as t,j as o,k as i,m as n,e as a}from"./index-CbNYdk-f.js";import{A as c}from"./ActionMsg-bN4Bfmft.js";const f=({scope:f,onActionResult:l,whitelist:u=["ownerId"]})=>{const d=r((e=>e.setMainMessage)),p=t((e=>e.pageData)),m=r((e=>e.filters));return e.useEffect((()=>{(async()=>{if(!f||!p[f])return void d("Scope is undefined or invalid.","error");const e=o[i(f)||""];if(!e)return void d("Model schema not found.","error");const s=Object.keys(e).filter((s=>e[s].references&&!u.includes(s))).filter((e=>!m[f]||!m[f][e]));if(s.length>0)return void d(`Missing required references in filters: ${s.join(", ")}.`,"error");const r={title:p[f].title,slug:"",content:{_pageData:{layout:"MainDashboard"}},...m[f]};try{await n(f,r),d(`Successfully created item for scope: ${f}`,"success"),l(!0)}catch(t){d(a(t,f),"error")}})()}),[]),s.jsxs(c,{type:"info",children:["RUN: Insert to: ",f]})};export{f as default};
