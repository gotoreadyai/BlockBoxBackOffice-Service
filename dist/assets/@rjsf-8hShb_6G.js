import{i as e,a as t,o as r,g as i,b as a,h as n,c as o,u as s,t as l,m as c,d,f as u,e as m,s as h,j as p,k as f,r as y,_ as g,l as v,n as b,p as S,q as x,v as j,w as C}from"./lodash-C4siI3Fs.js";import{m as F}from"./json-schema-merge-allof-CAUJ1I2Z.js";import{j as A}from"./jsonpointer-CvFdTLoF.js";import{r as D,j as w}from"./react-oZDKVO_S.js";import{R as O}from"./react-is-BhM-FsKG.js";import{n as k}from"./nanoid-BV3C3NLD.js";import{M as E}from"./markdown-to-jsx-Bh8rhLW0.js";import{A as N}from"./ajv-Dq24E4CF.js";import{a as B}from"./ajv-formats-B7rDf6Ua.js";function I(e){return!("undefined"!=typeof File&&e instanceof File)&&(!("undefined"!=typeof Date&&e instanceof Date)&&("object"==typeof e&&null!==e&&!Array.isArray(e)))}function $(e){if(""===e)return;if(null===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;if(/\.\d*0$/.test(e))return e;const t=Number(e);return"number"==typeof t&&!Number.isNaN(t)?t:e}const U="__additional_property",T="additionalProperties",_="allOf",P="anyOf",W="const",q="default",M="dependencies",R="enum",L="__errors",V="$id",K="if",H="items",z="$name",Y="oneOf",J="properties",G="required",Q="submitButtonOptions",X="$ref",Z="__rjsf_additionalProperties",ee="__rjsf_rootSchema",te="ui:widget",re="ui:options";function ie(e={},t={}){return Object.keys(e).filter((e=>0===e.indexOf("ui:"))).reduce(((t,r)=>{const i=e[r];return r===te&&I(i)?t:r===re&&I(i)?{...t,...i}:{...t,[r.substring(3)]:i}}),{...t})}function ae(e,t={},r){if(!e.additionalProperties)return!1;const{expandable:i=!0}=ie(t);return!1===i?i:void 0===e.maxProperties||!r||Object.keys(r).length<e.maxProperties}function ne(t){const r={[L]:[],addError(e){this[L].push(e)}};if(Array.isArray(t))return t.reduce(((e,t,r)=>({...e,[r]:ne(t)})),r);if(e(t)){const e=t;return Object.keys(e).reduce(((t,r)=>({...t,[r]:ne(e[r])})),r)}return r}function oe(e,r){return t(e,r,((e,t)=>{if("function"==typeof e&&"function"==typeof t)return!0}))}function se(e,t){const i=t[e];return[r(t,[e]),i]}function le(e,t={},r=[]){const i=e||"";let a;if(!i.startsWith("#"))throw new Error(`Could not find a definition for ${e}.`);a=decodeURIComponent(i.substring(1));const n=A.get(t,a);if(void 0===n)throw new Error(`Could not find a definition for ${e}.`);const o=n[X];if(o){if(r.includes(o)){if(1===r.length)throw new Error(`Definition for ${e} is a circular reference`);const[t,...a]=r,n=[...a,i,t].join(" -> ");throw new Error(`Definition for ${t} contains a circular reference through ${n}`)}const[a,s]=se(X,n),l=le(s,t,[...r,i]);return Object.keys(a).length>0?{...a,...l}:l}return n}function ce(e,t={}){return le(e,t,[])}function de(e,t,r){var a;if(e&&r){const n=i(e,r);if(void 0===n)return;for(let e=0;e<t.length;e++){const o=t[e],s=i(o,[J,r],{});if("object"!==s.type&&"array"!==s.type){if(s.const===n)return e;if(null===(a=s.enum)||void 0===a?void 0:a.includes(n))return e}}}}function ue(e,t,r,o,s){if(void 0===t)return 0;const l=de(t,r,s);if(a(l))return l;for(let a=0;a<r.length;a++){const l=r[a];if(s&&n(l,[J,s])){const r=i(t,s),n=i(l,[J,s],{});if(e.isValid(n,r,o))return a}else if(l[J]){const r={anyOf:Object.keys(l[J]).map((e=>({required:[e]})))};let i;if(l.anyOf){const{...e}=l;e.allOf?e.allOf=e.allOf.slice():e.allOf=[],e.allOf.push(r),i=e}else i=Object.assign({},l,r);if(delete i.required,e.isValid(i,t,o))return a}else if(e.isValid(l,t,o))return a}return 0}function me(e,t,r,i,a){return ue(e,t,r,i,a)}function he(e){let t;const r=i(e,"discriminator.propertyName",void 0);return o(r)&&(t=r),t}function pe(e){return Array.isArray(e)?"array":"string"==typeof e?"string":null==e?"null":"boolean"==typeof e?"boolean":isNaN(e)?"object"==typeof e?"object":"string":"number"}function fe(e){let{type:t}=e;return!t&&e.const?pe(e.const):!t&&e.enum?"string":t||!e.properties&&!e.additionalProperties?(Array.isArray(t)&&(t=2===t.length&&t.includes("null")?t.find((e=>"null"!==e)):t[0]),t):"object"}function ye(e,t){const r=Object.assign({},e);return Object.keys(t).reduce(((r,i)=>{const a=e?e[i]:{},n=t[i];return e&&i in e&&I(n)?r[i]=ye(a,n):e&&t&&("object"===fe(e)||"object"===fe(t))&&i===G&&Array.isArray(a)&&Array.isArray(n)?r[i]=s(a,n):r[i]=n,r}),r)}function ge(e,t,r={},i){return xe(e,t,r,i)[0]}function ve(e){return e.reduce(((e,t)=>t.length>1?t.flatMap((t=>p(e.length,(r=>[...e[r]].concat(t))))):(e.forEach((e=>e.push(t[0]))),e)),[[]])}function be(e,t,r,i,a,n){const o=Se(t,r,a);return o!==t?xe(e,o,r,n,i,a):[t]}function Se(e,t,r){if(!I(e))return e;let i=e;if(X in i){const{$ref:e,...a}=i;if(r.includes(e))return i;r.push(e);i={...ce(e,t),...a}}if(J in i){const e=[],a=l(i[J],((i,a,n)=>{const o=[...r];i[n]=Se(a,t,o),e.push(o)}),{});c(r,d(u(e))),i={...i,[J]:a}}return H in i&&!Array.isArray(i.items)&&"boolean"!=typeof i.items&&(i={...i,items:Se(i.items,t,r)}),m(e,i)?e:i}function xe(e,t,r,a,n=!1,o=[]){if(!I(t))return[{}];const s=function(e,t,r,i,a,n){const o=be(e,t,r,i,a,n);if(o.length>1||o[0]!==t)return o;if(M in t)return je(e,t,r,i,a,n).flatMap((t=>xe(e,t,r,n,i,a)));if(_ in t&&Array.isArray(t.allOf))return ve(t.allOf.map((t=>xe(e,t,r,n,i,a)))).map((e=>({...t,allOf:e})));return[t]}(e,t,r,n,o,a);return s.flatMap((t=>{let s=t;if(K in s)return function(e,t,r,i,a,n){const{if:o,then:s,else:l,...c}=t,d=e.isValid(o,n||{},r);let u=[c],m=[];if(i)s&&"boolean"!=typeof s&&(m=m.concat(xe(e,s,r,n,i,a))),l&&"boolean"!=typeof l&&(m=m.concat(xe(e,l,r,n,i,a)));else{const t=d?s:l;t&&"boolean"!=typeof t&&(m=m.concat(xe(e,t,r,n,i,a)))}return m.length&&(u=m.map((e=>ye(c,e)))),u.flatMap((t=>xe(e,t,r,n,i,a)))}(e,s,r,n,o,a);if(_ in s){if(n){const{allOf:e,...t}=s;return[...e,t]}try{s=F(s,{deep:!1})}catch(l){const{allOf:e,...t}=s;return t}}return T in s&&!1!==s.additionalProperties?function(e,t,r,a){const n={...t,properties:{...t.properties}},o=a&&I(a)?a:{};return Object.keys(o).forEach((t=>{if(t in n.properties)return;let a={};a="boolean"!=typeof n.additionalProperties?X in n.additionalProperties?ge(e,{$ref:i(n.additionalProperties,[X])},r,o):"type"in n.additionalProperties?{...n.additionalProperties}:P in n.additionalProperties||Y in n.additionalProperties?{type:"object",...n.additionalProperties}:{type:pe(i(o,[t]))}:{type:pe(i(o,[t]))},n.properties[t]=a,h(n.properties,[t,U],!0)})),n}(e,s,r,a):s}))}function je(e,t,r,i,a,n){const{dependencies:o,...s}=t,l=function(e,t,r,i,a){let n;const{oneOf:o,anyOf:s,...l}=t;if(Array.isArray(o)?n=o:Array.isArray(s)&&(n=s),n){const o=void 0===a&&i?{}:a,s=he(t);n=n.map((e=>Se(e,r,[])));const c=me(e,o,n,r,s);if(i)return n.map((e=>ye(l,e)));t=ye(l,n[c])}return[t]}(e,s,r,i,n);return l.flatMap((t=>Ce(e,o,t,r,i,a,n)))}function Ce(e,t,r,a,n,o,s){let l=[r];for(const c in t){if(!n&&void 0===i(s,[c]))continue;if(r.properties&&!(c in r.properties))continue;const[d,u]=se(c,t);return Array.isArray(u)?l[0]=Fe(r,u):I(u)&&(l=Ae(e,r,a,c,u,n,o,s)),l.flatMap((t=>Ce(e,d,t,a,n,o,s)))}return l}function Fe(e,t){if(!t)return e;const r=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:r}}function Ae(e,t,r,i,a,n,o,s){return xe(e,a,r,s,n,o).flatMap((a=>{const{oneOf:l,...c}=a;if(t=ye(t,c),void 0===l)return t;return ve(l.map((t=>"boolean"!=typeof t&&X in t?be(e,t,r,n,o,s):[t]))).flatMap((a=>function(e,t,r,i,a,n,o,s){const l=a.filter((t=>{if("boolean"==typeof t||!t||!t.properties)return!1;const{[i]:a}=t.properties;if(a){const t={type:"object",properties:{[i]:a}};return e.isValid(t,s,r)||n}return!1}));if(!n&&1!==l.length)return[t];return l.flatMap((a=>{const l=a,[c]=se(i,l.properties),d={...l,properties:c};return xe(e,d,r,s,n,o).map((e=>ye(t,e)))}))}(e,t,r,i,a,n,o,s)))}))}const De={type:"object",$id:"_$junk_option_schema_id$_",properties:{__not_really_there__:{type:"number"}}};function we(e,t,r,a={}){let s=0;return r&&(f(r.properties)?s+=y(r.properties,((r,o,s)=>{const l=i(a,s);if("boolean"==typeof o)return r;if(n(o,X)){const i=ge(e,o,t,l);return r+we(e,t,i,l||{})}if((n(o,Y)||n(o,P))&&l){const a=n(o,Y)?Y:P,s=he(o);return r+Oe(e,t,l,i(o,a),-1,s)}if("object"===o.type)return r+we(e,t,o,l||{});if(o.type===pe(l)){let e=r+1;return o.default?e+=l===o.default?1:-1:o.const&&(e+=l===o.const?1:-1),e}return r}),0):o(r.type)&&r.type===pe(a)&&(s+=1)),s}function Oe(e,t,r,i,n=-1,o){const s=i.map((e=>Se(e,t,[]))),l=de(r,i,o);if(a(l))return l;const c=s.reduce(((i,a,n)=>(1===me(e,r,[De,a],t,o)&&i.push(n),i)),[]);if(1===c.length)return c[0];c.length||p(s.length,(e=>c.push(e)));const d=new Set,{bestIndex:u}=c.reduce(((i,a)=>{const{bestScore:n}=i,o=s[a],l=we(e,t,o,r);return d.add(l),l>n?{bestIndex:a,bestScore:l}:i}),{bestIndex:n,bestScore:0});return 1===d.size&&n>=0?n:u}function ke(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every((e=>I(e)))}function Ee(e,t,r=!1){if(Array.isArray(t)){const i=Array.isArray(e)?e:[],a=t.map(((e,t)=>i[t]?Ee(i[t],e,r):e));return r&&a.length<i.length&&a.push(...i.slice(a.length)),a}if(I(t)){const a=Object.assign({},e);return Object.keys(t).reduce(((a,n)=>(a[n]=Ee(e?i(e,n):{},i(t,n),r),a)),a)}return t}function Ne(e,t,r=!1){return Object.keys(t).reduce(((i,a)=>{const n=e?e[a]:{},o=t[a];if(e&&a in e&&I(o))i[a]=Ne(n,o,r);else if(r&&Array.isArray(n)&&Array.isArray(o)){let e=o;"preventDuplicates"===r&&(e=o.reduce(((e,t)=>(n.includes(t)||e.push(t),e)),[])),i[a]=n.concat(e)}else i[a]=o;return i}),Object.assign({},e))}function Be(e,t,r={}){const i=ge(e,t,r,void 0),a=i.oneOf||i.anyOf;return!!Array.isArray(i.enum)||!!Array.isArray(a)&&a.every((e=>"boolean"!=typeof e&&function(e){return Array.isArray(e.enum)&&1===e.enum.length||W in e}(e)))}function Ie(e,t,r){return!(!t.uniqueItems||!t.items||"boolean"==typeof t.items)&&Be(e,t.items,r)}var $e,Ue;function Te(e,t=$e.Ignore,r=-1){if(r>=0){if(Array.isArray(e.items)&&r<e.items.length){const t=e.items[r];if("boolean"!=typeof t)return t}}else if(e.items&&!Array.isArray(e.items)&&"boolean"!=typeof e.items)return e.items;return t!==$e.Ignore&&I(e.additionalItems)?e.additionalItems:{}}function _e(e,t,r,i,a,n=[],o={}){const{emptyObjectFields:s="populateAllDefaults"}=o;if(i)e[t]=r;else if("skipDefaults"!==s)if(I(r)){const i=void 0===a?n.includes(t):a;"skipEmptyDefaults"===s?g(r)||(e[t]=r):g(r)&&!n.includes(t)||!i&&"populateRequiredDefaults"===s||(e[t]=r)}else void 0===r||"populateAllDefaults"!==s&&"skipEmptyDefaults"!==s&&!n.includes(t)||(e[t]=r)}function Pe(e,t,{parentDefaults:r,rawFormData:a,rootSchema:n={},includeUndefinedValues:o=!1,_recurseList:s=[],experimental_defaultFormStateBehavior:l,required:c}={}){var d,u,m,h;const p=I(a)?a:{},f=I(t)?t:{};let y=r,v=null,b=s;if(I(y)&&I(f.default))y=Ne(y,f.default);else if(q in f)y=f.default;else if(X in f){const e=f[X];s.includes(e)||(b=s.concat(e),v=ce(e,n))}else if(M in f){v=je(e,f,n,!1,[],p)[0]}else if(ke(f))y=f.items.map(((t,i)=>Pe(e,t,{rootSchema:n,includeUndefinedValues:o,_recurseList:s,experimental_defaultFormStateBehavior:l,parentDefaults:Array.isArray(r)?r[i]:void 0,rawFormData:p,required:c})));else if(Y in f){const{oneOf:t,...r}=f;if(0===t.length)return;const i=he(f);v=t[Oe(e,n,g(p)?void 0:p,t,0,i)],v=ye(r,v)}else if(P in f){const{anyOf:t,...r}=f;if(0===t.length)return;const i=he(f);v=t[Oe(e,n,g(p)?void 0:p,t,0,i)],v=ye(r,v)}if(v)return Pe(e,v,{rootSchema:n,includeUndefinedValues:o,_recurseList:b,experimental_defaultFormStateBehavior:l,parentDefaults:y,rawFormData:p,required:c});switch(void 0===y&&(y=f.default),fe(f)){case"object":{const t="populateDefaults"===(null==l?void 0:l.allOf)&&_ in f?ge(e,f,n,p):f,r=Object.keys(t.properties||{}).reduce(((r,a)=>{var d;return _e(r,a,Pe(e,i(t,[J,a]),{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:l,includeUndefinedValues:!0===o,parentDefaults:i(y,[a]),rawFormData:i(p,[a]),required:null===(d=t.required)||void 0===d?void 0:d.includes(a)}),o,c,t.required,l),r}),{});if(t.additionalProperties){const a=I(t.additionalProperties)?t.additionalProperties:{},d=new Set;I(y)&&Object.keys(y).filter((e=>!t.properties||!t.properties[e])).forEach((e=>d.add(e)));const u=[];Object.keys(p).filter((e=>!t.properties||!t.properties[e])).forEach((e=>{d.add(e),u.push(e)})),d.forEach((d=>{var m;const h=Pe(e,a,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:l,includeUndefinedValues:!0===o,parentDefaults:i(y,[d]),rawFormData:i(p,[d]),required:null===(m=t.required)||void 0===m?void 0:m.includes(d)});_e(r,d,h,o,c,u)}))}return r}case"array":{const t="never"===(null===(d=null==l?void 0:l.arrayMinItems)||void 0===d?void 0:d.populate),r="requiredOnly"===(null===(u=null==l?void 0:l.arrayMinItems)||void 0===u?void 0:u.populate),o="skipEmptyDefaults"===(null==l?void 0:l.emptyObjectFields),p=null!==(h=null===(m=null==l?void 0:l.arrayMinItems)||void 0===m?void 0:m.computeSkipPopulate)&&void 0!==h?h:()=>!1,g=o?void 0:[];if(Array.isArray(y)&&(y=y.map(((t,r)=>{const i=Te(f,$e.Fallback,r);return Pe(e,i,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:l,parentDefaults:t,required:c})}))),Array.isArray(a)){const r=Te(f);y=t?a:a.map(((t,a)=>Pe(e,r,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:l,rawFormData:t,parentDefaults:i(y,[a]),required:c})))}if(t)return null!=y?y:g;if(r&&!c)return y||void 0;const v=Array.isArray(y)?y.length:0;if(!f.minItems||Ie(e,f,n)||p(e,f,n)||f.minItems<=v)return y||g;const b=y||[],S=Te(f,$e.Invert),x=S.default,j=new Array(f.minItems-v).fill(Pe(e,S,{parentDefaults:x,rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:l,required:c}));return b.concat(j)}}return y}function We(e,t,r,i,a=!1,n){if(!I(t))throw new Error("Invalid schema: "+t);const o=Pe(e,ge(e,t,i,r),{rootSchema:i,includeUndefinedValues:a,experimental_defaultFormStateBehavior:n,rawFormData:r});if(null==r||"number"==typeof r&&isNaN(r))return o;const{mergeExtraDefaults:s}=(null==n?void 0:n.arrayMinItems)||{};return I(r)||Array.isArray(r)?Ee(o,r,s):r}function qe(e={}){return"widget"in ie(e)&&"hidden"!==ie(e).widget}function Me(e,t,r={},i){if("files"===r[te])return!0;if(t.items){const r=ge(e,t.items,i);return"string"===r.type&&"data-url"===r.format}return!1}(Ue=$e||($e={}))[Ue.Ignore=0]="Ignore",Ue[Ue.Invert=1]="Invert",Ue[Ue.Fallback=2]="Fallback";const Re=Symbol("no Value");function Le(e,t,r,a,o={}){let s;if(n(r,J)){const l={};if(n(a,J)){const e=i(a,J,{});Object.keys(e).forEach((e=>{n(o,e)&&(l[e]=void 0)}))}const c=Object.keys(i(r,J,{})),d={};c.forEach((s=>{const c=i(o,s);let u=i(a,[J,s],{}),m=i(r,[J,s],{});n(u,X)&&(u=ge(e,u,t,c)),n(m,X)&&(m=ge(e,m,t,c));const h=i(u,"type"),p=i(m,"type");if(!h||h===p)if(n(l,s)&&delete l[s],"object"===p||"array"===p&&Array.isArray(c)){const r=Le(e,t,m,u,c);void 0===r&&"array"!==p||(d[s]=r)}else{const e=i(m,"default",Re),t=i(u,"default",Re);e!==Re&&e!==c&&(t===c?l[s]=e:!0===i(m,"readOnly")&&(l[s]=void 0));const r=i(m,"const",Re),a=i(u,"const",Re);r!==Re&&r!==c&&(l[s]=a===c?r:void 0)}})),s={..."string"==typeof o||Array.isArray(o)?void 0:o,...l,...d}}else if("array"===i(a,"type")&&"array"===i(r,"type")&&Array.isArray(o)){let l=i(a,"items"),c=i(r,"items");if("object"!=typeof l||"object"!=typeof c||Array.isArray(l)||Array.isArray(c))"boolean"==typeof l&&"boolean"==typeof c&&l===c&&(s=o);else{n(l,X)&&(l=ge(e,l,t,o)),n(c,X)&&(c=ge(e,c,t,o));const a=i(l,"type"),d=i(c,"type");if(!a||a===d){const a=i(r,"maxItems",-1);s="object"===d?o.reduce(((r,i)=>{const n=Le(e,t,c,l,i);return void 0!==n&&(a<0||r.length<a)&&r.push(n),r}),[]):a>0&&o.length>a?o.slice(0,a):o}}}return s}function Ve(e,t,r,a,n,o,s,l=[]){if(X in t||M in t||_ in t){const i=ge(e,t,o,s);if(-1===l.findIndex((e=>m(e,i))))return Ve(e,i,r,a,n,o,s,l.concat(i))}if(H in t&&!i(t,[H,X]))return Ve(e,i(t,H),r,a,n,o,s,l);const c={$id:n||r};if("object"===fe(t)&&J in t)for(const d in t.properties){const n=i(t,[J,d]),u=c[V]+a+d;c[d]=Ve(e,I(n)?n:{},r,a,u,o,i(s,[d]),l)}return c}function Ke(e,t,r,i,a,n="root",o="_"){return Ve(e,t,n,o,r,i,a)}function He(e,t,r,a,n,o=[]){if(X in t||M in t||_ in t){const i=ge(e,t,a,n);if(-1===o.findIndex((e=>m(e,i))))return He(e,i,r,a,n,o.concat(i))}let s={[z]:r.replace(/^\./,"")};if(Y in t||P in t){const i=Y in t?t.oneOf:t.anyOf,l=he(t),c=i[Oe(e,a,n,i,0,l)];s={...s,...He(e,c,r,a,n,o)}}if(T in t&&!1!==t[T]&&h(s,Z,!0),H in t&&Array.isArray(n)){const{items:i,additionalItems:l}=t;Array.isArray(i)?n.forEach(((t,n)=>{i[n]?s[n]=He(e,i[n],`${r}.${n}`,a,t,o):l&&(s[n]=He(e,l,`${r}.${n}`,a,t,o))})):n.forEach(((t,n)=>{s[n]=He(e,i,`${r}.${n}`,a,t,o)}))}else if(J in t)for(const l in t.properties){const c=i(t,[J,l]);s[l]=He(e,c,`${r}.${l}`,a,i(n,[l]),o)}return s}function ze(e,t,r="",i,a){return He(e,t,r,i,a)}class Ye{constructor(e,t,r){this.rootSchema=t,this.validator=e,this.experimental_defaultFormStateBehavior=r}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,t,r={}){return!(!e||!t)&&(this.validator!==e||!oe(this.rootSchema,t)||!oe(this.experimental_defaultFormStateBehavior,r))}getDefaultFormState(e,t,r=!1){return We(this.validator,e,t,this.rootSchema,r,this.experimental_defaultFormStateBehavior)}getDisplayLabel(e,t,r){return function(e,t,r={},i,a){const n=ie(r,a),{label:o=!0}=n;let s=!!o;const l=fe(t);return"array"===l&&(s=Ie(e,t,i)||Me(e,t,r,i)||qe(r)),"object"===l&&(s=!1),"boolean"!==l||r[te]||(s=!1),r["ui:field"]&&(s=!1),s}(this.validator,e,t,this.rootSchema,r)}getClosestMatchingOption(e,t,r,i){return Oe(this.validator,this.rootSchema,e,t,r,i)}getFirstMatchingOption(e,t,r){return me(this.validator,e,t,this.rootSchema,r)}getMatchingOption(e,t,r){return ue(this.validator,e,t,this.rootSchema,r)}isFilesArray(e,t){return Me(this.validator,e,t,this.rootSchema)}isMultiSelect(e){return Ie(this.validator,e,this.rootSchema)}isSelect(e){return Be(this.validator,e,this.rootSchema)}mergeValidationData(e,t){return function(e,t,r){if(!r)return t;const{errors:i,errorSchema:a}=t;let n=e.toErrorList(r),o=r;return g(a)||(o=Ne(a,r,!0),n=[...i].concat(n)),{errorSchema:o,errors:n}}(this.validator,e,t)}retrieveSchema(e,t){return ge(this.validator,e,this.rootSchema,t)}sanitizeDataForNewSchema(e,t,r){return Le(this.validator,this.rootSchema,e,t,r)}toIdSchema(e,t,r,i="root",a="_"){return Ke(this.validator,e,t,this.rootSchema,r,i,a)}toPathSchema(e,t,r){return ze(this.validator,e,t,this.rootSchema,r)}}function Je(e,t){let r=String(e);for(;r.length<t;)r="0"+r;return r}function Ge(e,t){if(e<=0&&t<=0)e=(new Date).getFullYear()+e,t=(new Date).getFullYear()+t;else if(e<0||t<0)throw new Error(`Both start (${e}) and stop (${t}) must both be <= 0 or > 0, got one of each`);if(e>t)return Ge(t,e).reverse();const r=[];for(let i=e;i<=t;i++)r.push({value:i,label:Je(i,2)});return r}function Qe(e,t){return function(e,t){let r=e;if(Array.isArray(t)){const e=r.split(/(%\d)/);t.forEach(((t,r)=>{const i=e.findIndex((e=>e===`%${r+1}`));i>=0&&(e[i]=t)})),r=e.join("")}return r}(e,t)}function Xe(e,t=[],r){if(Array.isArray(e))return e.map((e=>Xe(e,t))).filter((e=>e!==r));const i=""===e||null===e?-1:Number(e),a=t[i];return a?a.value:r}function Ze(e,t){return Array.isArray(t)?t.some((t=>m(t,e))):m(t,e)}class et{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let t=Array.isArray(e)&&e.length>0||"string"==typeof e?i(this.errorSchema,e):this.errorSchema;return!t&&e&&(t={},h(this.errorSchema,e,t)),t}resetAllErrors(e){return this.errorSchema=e?b(e):{},this}addErrors(e,t){const r=this.getOrCreateErrorBlock(t);let a=i(r,L);return Array.isArray(a)||(a=[],r[L]=a),Array.isArray(e)?a.push(...e):a.push(e),this}setErrors(e,t){const r=this.getOrCreateErrorBlock(t),i=Array.isArray(e)?[...e]:[e];return h(r,L,i),this}clearErrors(e){const t=this.getOrCreateErrorBlock(e);return h(t,L,[]),this}}function tt(e,t,r=[1900,(new Date).getFullYear()+2],i="YMD"){const{day:a,month:n,year:o,hour:s,minute:l,second:c}=e,d={type:"day",range:[1,31],value:a},u={type:"month",range:[1,12],value:n},m={type:"year",range:r,value:o},h=[];switch(i){case"MDY":h.push(u,d,m);break;case"DMY":h.push(d,u,m);break;default:h.push(m,u,d)}return t&&h.push({type:"hour",range:[0,23],value:s},{type:"minute",range:[0,59],value:l},{type:"second",range:[0,59],value:c}),h}function rt(e){const t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||0===e.minimum)&&(t.min=e.minimum),(e.maximum||0===e.maximum)&&(t.max=e.maximum),t}function it(e,t,r={},i=!0){const a={type:t||"text",...rt(e)};return r.inputType?a.type=r.inputType:t||("number"===e.type?(a.type="number",i&&void 0===a.step&&(a.step="any")):"integer"===e.type&&(a.type="number",void 0===a.step&&(a.step=1))),r.autocomplete&&(a.autoComplete=r.autocomplete),a}const at={props:{disabled:!1},submitText:"Submit",norender:!1};function nt(e,t,r={}){const{templates:i}=t;return"ButtonTemplates"===e?i[e]:r[e]||i[e]}const ot={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function st(e,t,r={}){const a=fe(e);if("function"==typeof t||t&&O.isForwardRef(D.createElement(t))||O.isMemo(t))return function(e){let t=i(e,"MergedWidget");if(!t){const r=e.defaultProps&&e.defaultProps.options||{};t=({options:t,...i})=>w.jsx(e,{options:{...r,...t},...i}),h(e,"MergedWidget",t)}return t}(t);if("string"!=typeof t)throw new Error("Unsupported widget definition: "+typeof t);if(t in r){return st(e,r[t],r)}if("string"==typeof a){if(!(a in ot))throw new Error(`No widget for type '${a}'`);if(t in ot[a]){return st(e,r[ot[a][t]],r)}}throw new Error(`No widget '${t}' for type '${a}'`)}function lt(e,t){return`${o(e)?e:e[V]}__${t}`}function ct(e){return lt(e,"description")}function dt(e){return lt(e,"error")}function ut(e){return lt(e,"examples")}function mt(e){return lt(e,"help")}function ht(e){return lt(e,"title")}function pt(e,t=!1){const r=t?` ${ut(e)}`:"";return`${dt(e)} ${ct(e)} ${mt(e)}${r}`}function ft(e,t){return`${e}-${t}`}function yt(e,t,r){return t?r:e}function gt(e,t){const r=e;if(e.enum){let i;if(t){const{enumNames:e}=ie(t);i=e}return!i&&r.enumNames&&(i=r.enumNames),e.enum.map(((e,t)=>({label:(null==i?void 0:i[t])||String(e),value:e})))}let i,a;return e.anyOf?(i=e.anyOf,a=null==t?void 0:t.anyOf):e.oneOf&&(i=e.oneOf,a=null==t?void 0:t.oneOf),i&&i.map(((e,t)=>{const{title:r}=ie(null==a?void 0:a[t]),i=e,n=function(e){if(R in e&&Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(W in e)return e.const;throw new Error("schema cannot be inferred as a constant")}(i);return{schema:i,label:r||i.title||String(n),value:n}}))}function vt(e,t=!0){if(!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};const r=new Date(e);if(Number.isNaN(r.getTime()))throw new Error("Unable to parse date "+e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:t?r.getUTCHours():0,minute:t?r.getUTCMinutes():0,second:t?r.getUTCSeconds():0}}function bt(e){if(e.const)return!0;if(e.enum&&1===e.enum.length&&!0===e.enum[0])return!0;if(e.anyOf&&1===e.anyOf.length)return bt(e.anyOf[0]);if(e.oneOf&&1===e.oneOf.length)return bt(e.oneOf[0]);if(e.allOf){const t=e=>bt(e);return e.allOf.some(t)}return!1}function St(e,t=!0){const{year:r,month:i,day:a,hour:n=0,minute:o=0,second:s=0}=e,l=Date.UTC(r,i-1,a,n,o,s),c=new Date(l).toJSON();return t?c:c.slice(0,10)}function xt(t,r=[]){if(!t)return[];let i=[];return L in t&&(i=i.concat(t[L].map((e=>{const t=`.${r.join(".")}`;return{property:t,message:e,stack:`${t} ${e}`}})))),Object.keys(t).reduce(((i,a)=>{if(a!==L){const n=t[a];e(n)&&(i=i.concat(xt(n,[...r,a])))}return i}),i)}function jt(t){return Object.keys(t).reduce(((r,i)=>{if("addError"===i)return r;{const a=t[i];return e(a)?{...r,[i]:jt(a)}:{...r,[i]:a}}}),{})}function Ct(e){if(!e)return"";const t=new Date(e);return`${Je(t.getFullYear(),4)}-${Je(t.getMonth()+1,2)}-${Je(t.getDate(),2)}T${Je(t.getHours(),2)}:${Je(t.getMinutes(),2)}:${Je(t.getSeconds(),2)}.${Je(t.getMilliseconds(),3)}`}function Ft(e,t){if(!t)return e;const{errors:r,errorSchema:i}=e;let a=xt(t),n=t;return g(i)||(n=Ne(i,t,!0),a=[...r].concat(a)),{errorSchema:n,errors:a}}function At(e){return Array.isArray(e)?function(e){for(let t=0;t<e.length;t++)e[t]=At(e[t]);return e}([...e]):f(e)?function(e){for(const t in e){const r=e,i=r[t];t===X&&"string"==typeof i&&i.startsWith("#")?r[t]=ee+i:r[t]=At(i)}return e}({...e}):e}var Dt,wt;function Ot(){return k()}function kt(e){return Array.isArray(e)?e.map((e=>({key:Ot(),item:e}))):[]}function Et(e){return Array.isArray(e)?e.map((e=>e.item)):[]}(wt=Dt||(Dt={})).ArrayItemTitle="Item",wt.MissingItems="Missing items definition",wt.YesLabel="Yes",wt.NoLabel="No",wt.CloseLabel="Close",wt.ErrorsLabel="Errors",wt.NewStringDefault="New Value",wt.AddButton="Add",wt.AddItemButton="Add Item",wt.CopyButton="Copy",wt.MoveDownButton="Move down",wt.MoveUpButton="Move up",wt.RemoveButton="Remove",wt.NowLabel="Now",wt.ClearLabel="Clear",wt.AriaDateLabel="Select a date",wt.PreviewLabel="Preview",wt.DecrementAriaLabel="Decrease value by 1",wt.IncrementAriaLabel="Increase value by 1",wt.UnknownFieldType="Unknown field type %1",wt.OptionPrefix="Option %1",wt.TitleOptionPrefix="%1 option %2",wt.KeyLabel="%1 Key",wt.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',wt.UnsupportedField="Unsupported field schema.",wt.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",wt.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",wt.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",wt.FilesInfo="**%1** (%2, %3 bytes)";class Nt extends D.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:e,registry:t}=this.props,{schemaUtils:r}=t;let i=e.items;return ke(e)&&function(e){return e.additionalItems,I(e.additionalItems)}(e)&&(i=e.additionalItems),r.getDefaultFormState(i)},this.onAddClick=e=>{this._handleAddClick(e)},this.onAddIndexClick=e=>t=>{this._handleAddClick(t,e)},this.onCopyIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:i}=this.props,{keyedFormData:a}=this.state;let n;if(i){n={};for(const t in i){const r=parseInt(t);r<=e?h(n,[r],i[t]):r>e&&h(n,[r+1],i[t])}}const o={key:Ot(),item:b(a[e].item)},s=[...a];void 0!==e?s.splice(e+1,0,o):s.push(o),this.setState({keyedFormData:s,updatedKeyedFormData:!0},(()=>r(Et(s),n)))},this.onDropIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:i}=this.props,{keyedFormData:a}=this.state;let n;if(i){n={};for(const t in i){const r=parseInt(t);r<e?h(n,[r],i[t]):r>e&&h(n,[r-1],i[t])}}const o=a.filter(((t,r)=>r!==e));this.setState({keyedFormData:o,updatedKeyedFormData:!0},(()=>r(Et(o),n)))},this.onReorderClick=(e,t)=>r=>{r&&(r.preventDefault(),r.currentTarget.blur());const{onChange:i,errorSchema:a}=this.props;let n;if(a){n={};for(const r in a){const i=parseInt(r);i==e?h(n,[t],a[e]):i==t?h(n,[e],a[t]):h(n,[r],a[i])}}const{keyedFormData:o}=this.state;const s=function(){const r=o.slice();return r.splice(e,1),r.splice(t,0,o[e]),r}();this.setState({keyedFormData:s},(()=>i(Et(s),n)))},this.onChangeForIndex=e=>(t,r,i)=>{const{formData:a,onChange:n,errorSchema:o}=this.props;n((Array.isArray(a)?a:[]).map(((r,i)=>e===i?void 0===t?null:t:r)),o&&o&&{...o,[e]:r},i)},this.onSelectChange=e=>{const{onChange:t,idSchema:r}=this.props;t(e,void 0,r&&r.$id)};const{formData:t=[]}=e,r=kt(t);this.state={keyedFormData:r,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,t){if(t.updatedKeyedFormData)return{updatedKeyedFormData:!1};const r=Array.isArray(e.formData)?e.formData:[],i=t.keyedFormData||[];return{keyedFormData:r.length===i.length?i.map(((e,t)=>({key:e.key,item:r[t]}))):kt(r)}}get itemTitle(){const{schema:e,registry:t}=this.props,{translateString:r}=t;return i(e,[H,"title"],i(e,[H,"description"],r(Dt.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}canAddItem(e){const{schema:t,uiSchema:r,registry:i}=this.props;let{addable:a}=ie(r,i.globalUiOptions);return!1!==a&&(a=void 0===t.maxItems||e.length<t.maxItems),a}_handleAddClick(e,t){e&&e.preventDefault();const{onChange:r,errorSchema:i}=this.props,{keyedFormData:a}=this.state;let n;if(i){n={};for(const e in i){const r=parseInt(e);void 0===t||r<t?h(n,[r],i[e]):r>=t&&h(n,[r+1],i[e])}}const o={key:Ot(),item:this._getNewFormDataRow()},s=[...a];void 0!==t?s.splice(t,0,o):s.push(o),this.setState({keyedFormData:s,updatedKeyedFormData:!0},(()=>r(Et(s),n)))}render(){const{schema:e,uiSchema:t,idSchema:r,registry:i}=this.props,{schemaUtils:a,translateString:n}=i;if(!(H in e)){const a=nt("UnsupportedFieldTemplate",i,ie(t));return w.jsx(a,{schema:e,idSchema:r,reason:n(Dt.MissingItems),registry:i})}return a.isMultiSelect(e)?this.renderMultiSelect():qe(t)?this.renderCustomWidget():ke(e)?this.renderFixedArray():a.isFilesArray(e,t)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:t={},errorSchema:r,idSchema:i,name:a,title:n,disabled:o=!1,readonly:s=!1,autofocus:l=!1,required:c=!1,registry:d,onBlur:u,onFocus:m,idPrefix:h,idSeparator:p="_",rawErrors:y}=this.props,{keyedFormData:g}=this.state,v=e.title||n||a,{schemaUtils:b,formContext:S}=d,x=ie(t),j=f(e.items)?e.items:{},C=b.retrieveSchema(j),F=Et(this.state.keyedFormData),A=this.canAddItem(F),D={canAdd:A,items:g.map(((e,n)=>{const{key:o,item:s}=e,c=s,d=b.retrieveSchema(j,c),f=r?r[n]:void 0,S=i.$id+p+n,x=b.toIdSchema(d,S,c,h,p);return this.renderArrayFieldItem({key:o,index:n,name:a&&`${a}-${n}`,title:v?`${v}-${n+1}`:void 0,canAdd:A,canMoveUp:n>0,canMoveDown:n<F.length-1,itemSchema:d,itemIdSchema:x,itemErrorSchema:f,itemData:c,itemUiSchema:t.items,autofocus:l&&0===n,onBlur:u,onFocus:m,rawErrors:y,totalItems:g.length})})),className:`field field-array field-array-of-${C.type}`,disabled:o,idSchema:i,uiSchema:t,onAddClick:this.onAddClick,readonly:s,required:c,schema:e,title:v,formContext:S,formData:F,rawErrors:y,registry:d},O=nt("ArrayFieldTemplate",d,x);return w.jsx(O,{...D})}renderCustomWidget(){var e;const{schema:t,idSchema:r,uiSchema:i,disabled:a=!1,readonly:n=!1,autofocus:o=!1,required:s=!1,hideError:l,placeholder:c,onBlur:d,onFocus:u,formData:m=[],registry:h,rawErrors:p,name:f}=this.props,{widgets:y,formContext:g,globalUiOptions:v,schemaUtils:b}=h,{widget:S,title:x,...j}=ie(i,v),C=st(t,S,y),F=null!==(e=null!=x?x:t.title)&&void 0!==e?e:f,A=b.getDisplayLabel(t,i,v);return w.jsx(C,{id:r.$id,name:f,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:u,options:j,schema:t,uiSchema:i,registry:h,value:m,disabled:a,readonly:n,hideError:l,required:s,label:F,hideLabel:!A,placeholder:c,formContext:g,autofocus:o,rawErrors:p})}renderMultiSelect(){var e;const{schema:t,idSchema:r,uiSchema:i,formData:a=[],disabled:n=!1,readonly:o=!1,autofocus:s=!1,required:l=!1,placeholder:c,onBlur:d,onFocus:u,registry:m,rawErrors:h,name:p}=this.props,{widgets:f,schemaUtils:y,formContext:g,globalUiOptions:v}=m,b=gt(y.retrieveSchema(t.items,a),i),{widget:S="select",title:x,...j}=ie(i,v),C=st(t,S,f),F=null!==(e=null!=x?x:t.title)&&void 0!==e?e:p,A=y.getDisplayLabel(t,i,v);return w.jsx(C,{id:r.$id,name:p,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:u,options:{...j,enumOptions:b},schema:t,uiSchema:i,registry:m,value:a,disabled:n,readonly:o,required:l,label:F,hideLabel:!A,placeholder:c,formContext:g,autofocus:s,rawErrors:h})}renderFiles(){var e;const{schema:t,uiSchema:r,idSchema:i,name:a,disabled:n=!1,readonly:o=!1,autofocus:s=!1,required:l=!1,onBlur:c,onFocus:d,registry:u,formData:m=[],rawErrors:h}=this.props,{widgets:p,formContext:f,globalUiOptions:y,schemaUtils:g}=u,{widget:v="files",title:b,...S}=ie(r,y),x=st(t,v,p),j=null!==(e=null!=b?b:t.title)&&void 0!==e?e:a,C=g.getDisplayLabel(t,r,y);return w.jsx(x,{options:S,id:i.$id,name:a,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:d,schema:t,uiSchema:r,value:m,disabled:n,readonly:o,required:l,registry:u,formContext:f,autofocus:s,rawErrors:h,label:j,hideLabel:!C})}renderFixedArray(){const{schema:e,uiSchema:t={},formData:r=[],errorSchema:i,idPrefix:a,idSeparator:n="_",idSchema:o,name:s,title:l,disabled:c=!1,readonly:d=!1,autofocus:u=!1,required:m=!1,registry:h,onBlur:p,onFocus:y,rawErrors:g}=this.props,{keyedFormData:v}=this.state;let{formData:b=[]}=this.props;const S=e.title||l||s,x=ie(t),{schemaUtils:j,formContext:C}=h,F=(f(e.items)?e.items:[]).map(((e,t)=>j.retrieveSchema(e,r[t]))),A=f(e.additionalItems)?j.retrieveSchema(e.additionalItems,r):null;(!b||b.length<F.length)&&(b=b||[],b=b.concat(new Array(F.length-b.length)));const D=this.canAddItem(b)&&!!A,O={canAdd:D,className:"field field-array field-array-fixed-items",disabled:c,idSchema:o,formData:r,items:v.map(((r,l)=>{const{key:c,item:d}=r,m=d,h=l>=F.length,x=(h&&f(e.additionalItems)?j.retrieveSchema(e.additionalItems,m):F[l])||{},C=o.$id+n+l,A=j.toIdSchema(x,C,m,a,n),w=h?t.additionalItems||{}:Array.isArray(t.items)?t.items[l]:t.items||{},O=i?i[l]:void 0;return this.renderArrayFieldItem({key:c,index:l,name:s&&`${s}-${l}`,title:S?`${S}-${l+1}`:void 0,canAdd:D,canRemove:h,canMoveUp:l>=F.length+1,canMoveDown:h&&l<b.length-1,itemSchema:x,itemData:m,itemUiSchema:w,itemIdSchema:A,itemErrorSchema:O,autofocus:u&&0===l,onBlur:p,onFocus:y,rawErrors:g,totalItems:v.length})})),onAddClick:this.onAddClick,readonly:d,required:m,registry:h,schema:e,uiSchema:t,title:S,formContext:C,errorSchema:i,rawErrors:g},k=nt("ArrayFieldTemplate",h,x);return w.jsx(k,{...O})}renderArrayFieldItem(e){const{key:t,index:r,name:i,canAdd:a,canRemove:n=!0,canMoveUp:o,canMoveDown:s,itemSchema:l,itemData:c,itemUiSchema:d,itemIdSchema:u,itemErrorSchema:m,autofocus:h,onBlur:p,onFocus:f,rawErrors:y,totalItems:g,title:v}=e,{disabled:b,hideError:S,idPrefix:x,idSeparator:j,readonly:C,uiSchema:F,registry:A,formContext:D}=this.props,{fields:{ArraySchemaField:O,SchemaField:k},globalUiOptions:E}=A,N=O||k,{orderable:B=!0,removable:I=!0,copyable:$=!1}=ie(F,E),U={moveUp:B&&o,moveDown:B&&s,copy:$&&a,remove:I&&n,toolbar:!1};return U.toolbar=Object.keys(U).some((e=>U[e])),{children:w.jsx(N,{name:i,title:v,index:r,schema:l,uiSchema:d,formData:c,formContext:D,errorSchema:m,idPrefix:x,idSeparator:j,idSchema:u,required:this.isItemRequired(l),onChange:this.onChangeForIndex(r),onBlur:p,onFocus:f,registry:A,disabled:b,readonly:C,hideError:S,autofocus:h,rawErrors:y}),className:"array-item",disabled:b,canAdd:a,hasCopy:U.copy,hasToolbar:U.toolbar,hasMoveUp:U.moveUp,hasMoveDown:U.moveDown,hasRemove:U.remove,index:r,totalItems:g,key:t,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:C,registry:A,schema:l,uiSchema:d}}}function Bt(e){var t,r,i;const{schema:a,name:n,uiSchema:o,idSchema:s,formData:l,registry:c,required:d,disabled:u,readonly:m,hideError:h,autofocus:p,title:y,onChange:g,onFocus:v,onBlur:b,rawErrors:S}=e,{title:x}=a,{widgets:j,formContext:C,translateString:F,globalUiOptions:A}=c,{widget:D="checkbox",title:O,label:k=!0,...E}=ie(o,A),N=st(a,D,j),B=F(Dt.YesLabel),I=F(Dt.NoLabel);let $;const U=null!==(r=null!==(t=null!=O?O:x)&&void 0!==t?t:y)&&void 0!==r?r:n;if(Array.isArray(a.oneOf))$=gt({oneOf:a.oneOf.map((e=>{if(f(e))return{...e,title:e.title||(!0===e.const?B:I)}})).filter((e=>e))},o);else{const e=a,t=null!==(i=a.enum)&&void 0!==i?i:[!0,!1];$=!e.enumNames&&2===t.length&&t.every((e=>"boolean"==typeof e))?[{value:t[0],label:t[0]?B:I},{value:t[1],label:t[1]?B:I}]:gt({enum:t,enumNames:e.enumNames},o)}return w.jsx(N,{options:{...E,enumOptions:$},schema:a,uiSchema:o,id:s.$id,name:n,onChange:g,onFocus:v,onBlur:b,label:U,hideLabel:!k,value:l,required:d,disabled:u,readonly:m,hideError:h,registry:c,formContext:C,autofocus:p,rawErrors:S})}class It extends D.Component{constructor(e){super(e),this.onOptionChange=e=>{const{selectedOption:t,retrievedOptions:r}=this.state,{formData:i,onChange:a,registry:n}=this.props,{schemaUtils:o}=n,s=void 0!==e?parseInt(e,10):-1;if(s===t)return;const l=s>=0?r[s]:void 0,c=t>=0?r[t]:void 0;let d=o.sanitizeDataForNewSchema(l,c,i);d&&l&&(d=o.getDefaultFormState(l,d,"excludeObjectChildren")),a(d,void 0,this.getFieldId()),this.setState({selectedOption:s})};const{formData:t,options:r,registry:{schemaUtils:i}}=this.props,a=r.map((e=>i.retrieveSchema(e,t)));this.state={retrievedOptions:a,selectedOption:this.getMatchingOption(0,t,a)}}componentDidUpdate(e,t){const{formData:r,options:i,idSchema:a}=this.props,{selectedOption:n}=this.state;let o=this.state;if(!oe(e.options,i)){const{registry:{schemaUtils:e}}=this.props;o={selectedOption:n,retrievedOptions:i.map((t=>e.retrieveSchema(t,r)))}}if(!oe(r,e.formData)&&a.$id===e.idSchema.$id){const{retrievedOptions:e}=o,i=this.getMatchingOption(n,r,e);t&&i!==n&&(o={selectedOption:i,retrievedOptions:e})}o!==this.state&&this.setState(o)}getMatchingOption(e,t,r){const{schema:i,registry:{schemaUtils:a}}=this.props,n=he(i);return a.getClosestMatchingOption(t,r,e,n)}getFieldId(){const{idSchema:e,schema:t}=this.props;return`${e.$id}${t.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:t=!1,errorSchema:a={},formContext:n,onBlur:o,onFocus:s,registry:l,schema:c,uiSchema:d}=this.props,{widgets:u,fields:m,translateString:h,globalUiOptions:p,schemaUtils:f}=l,{SchemaField:y}=m,{selectedOption:v,retrievedOptions:b}=this.state,{widget:S="select",placeholder:x,autofocus:j,autocomplete:C,title:F=c.title,...A}=ie(d,p),D=st({type:"number"},S,u),O=i(a,L,[]),k=r(a,[L]),E=f.getDisplayLabel(c,d,p),N=v>=0&&b[v]||null;let B;if(N){const{required:e}=c;B=e?ye({required:e},N):N}let I=[];Y in c&&d&&Y in d?Array.isArray(d[Y])&&(I=d[Y]):P in c&&d&&P in d&&Array.isArray(d[P])&&(I=d[P]);let $=d;v>=0&&I.length>v&&($=I[v]);const U=F?Dt.TitleOptionPrefix:Dt.OptionPrefix,T=F?[F]:[],_=b.map(((e,t)=>{const{title:r=e.title}=ie(I[t]);return{label:r||h(U,T.concat(String(t+1))),value:t}}));return w.jsxs("div",{className:"panel panel-default panel-body",children:[w.jsx("div",{className:"form-group",children:w.jsx(D,{id:this.getFieldId(),name:`${e}${c.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:o,onFocus:s,disabled:t||g(_),multiple:!1,rawErrors:O,errorSchema:k,value:v>=0?v:void 0,options:{enumOptions:_,...A},registry:l,formContext:n,placeholder:x,autocomplete:C,autofocus:j,label:null!=F?F:e,hideLabel:!E})}),B&&w.jsx(y,{...this.props,schema:B,uiSchema:$})]})}}const $t=/\.([0-9]*0)*$/,Ut=/[0.]0*$/;function Tt(e){const{registry:t,onChange:r,formData:i,value:a}=e,[n,o]=D.useState(a),{StringField:s}=t.fields;let l=i;const c=D.useCallback((e=>{o(e),"."===`${e}`.charAt(0)&&(e=`0${e}`);const t="string"==typeof e&&e.match($t)?$(e.replace(Ut,"")):$(e);r(t)}),[r]);if("string"==typeof n&&"number"==typeof l){const e=new RegExp(`^(${String(l).replace(".","\\.")})?\\.?0*$`);n.match(e)&&(l=n)}return w.jsx(s,{...e,formData:l,onChange:c})}class _t extends D.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,t=!1)=>(r,i,a)=>{const{formData:n,onChange:o,errorSchema:s}=this.props;void 0===r&&t&&(r="");o({...n,[e]:r},s&&s&&{...s,[e]:i},a)},this.onDropPropertyClick=e=>t=>{t.preventDefault();const{onChange:r,formData:i}=this.props,a={...i};x(a,e),r(a)},this.getAvailableKey=(e,t)=>{const{uiSchema:r,registry:i}=this.props,{duplicateKeySuffixSeparator:a="-"}=ie(r,i.globalUiOptions);let o=0,s=e;for(;n(t,s);)s=`${e}${a}${++o}`;return s},this.onKeyChange=e=>(t,r)=>{if(e===t)return;const{formData:i,onChange:a,errorSchema:n}=this.props;t=this.getAvailableKey(t,i);const o={...i},s={[e]:t},l=Object.keys(o).map((e=>{const t=s[e]||e;return{[t]:o[e]}})),c=Object.assign({},...l);this.setState({wasPropertyKeyModified:!0}),a(c,n&&n&&{...n,[t]:r})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:t,onChange:r,registry:i}=this.props,a={...t};let n,o;if(f(e.additionalProperties)){n=e.additionalProperties.type,o=e.additionalProperties.default;let r=e.additionalProperties;if(X in r){const{schemaUtils:e}=i;r=e.retrieveSchema({$ref:r[X]},t),n=r.type,o=r.default}n||!(P in r)&&!(Y in r)||(n="object")}const s=this.getAvailableKey("newKey",a);h(a,s,null!=o?o:this.getDefaultValue(n)),r(a)}}isRequired(e){const{schema:t}=this.props;return Array.isArray(t.required)&&-1!==t.required.indexOf(e)}getDefaultValue(e){const{registry:{translateString:t}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return t(Dt.NewStringDefault)}}render(){var e,t,r,a;const{schema:o,uiSchema:s={},formData:l,errorSchema:c,idSchema:d,name:u,required:m=!1,disabled:h,readonly:p,hideError:f,idPrefix:y,idSeparator:g,onBlur:v,onFocus:b,registry:S,title:x}=this.props,{fields:j,formContext:C,schemaUtils:F,translateString:A,globalUiOptions:D}=S,{SchemaField:O}=j,k=F.retrieveSchema(o,l),N=ie(s,D),{properties:B={}}=k,I=null!==(r=null!==(t=null!==(e=N.title)&&void 0!==e?e:k.title)&&void 0!==t?t:x)&&void 0!==r?r:u,$=null!==(a=N.description)&&void 0!==a?a:k.description;let T;try{T=function(e,t){if(!Array.isArray(t))return e;const r=e=>e.reduce(((e,t)=>(e[t]=!0,e)),{}),i=r(e),a=t.filter((e=>"*"===e||i[e])),n=r(a),o=e.filter((e=>!n[e])),s=a.indexOf("*");if(-1===s){if(o.length)throw new Error("uiSchema order list does not contain "+((l=o).length>1?`properties '${l.join("', '")}'`:`property '${l[0]}'`));return a}var l;if(s!==a.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const c=[...a];return c.splice(s,1,...o),c}(Object.keys(B),N.order)}catch(W){return w.jsxs("div",{children:[w.jsx("p",{className:"config-error",style:{color:"red"},children:w.jsx(E,{options:{disableParsingRawHTML:!0},children:A(Dt.InvalidObjectField,[u||"root",W.message])})}),w.jsx("pre",{children:JSON.stringify(k)})]})}const _=nt("ObjectFieldTemplate",S,N),P={title:!1===N.label?"":I,description:!1===N.label?void 0:$,properties:T.map((e=>{const t=n(k,[J,e,U]),r=t?s.additionalProperties:s[e],a="hidden"===ie(r).widget,o=i(d,[e],{});return{content:w.jsx(O,{name:e,required:this.isRequired(e),schema:i(k,[J,e],{}),uiSchema:r,errorSchema:i(c,e),idSchema:o,idPrefix:y,idSeparator:g,formData:i(l,e),formContext:C,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(e),onChange:this.onPropertyChange(e,t),onBlur:v,onFocus:b,registry:S,disabled:h,readonly:p,hideError:f,onDropPropertyClick:this.onDropPropertyClick},e),name:e,readonly:p,disabled:h,required:m,hidden:a}})),readonly:p,disabled:h,required:m,idSchema:d,uiSchema:s,errorSchema:c,schema:k,formData:l,formContext:C,registry:S};return w.jsx(_,{...P,onAddClick:this.handleAddClick})}}const Pt={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function Wt(e){var t,i,a;const{schema:n,idSchema:o,uiSchema:s,formData:l,errorSchema:c,idPrefix:d,idSeparator:u,name:m,onChange:h,onKeyChange:p,onDropPropertyClick:y,required:g,registry:v,wasPropertyKeyModified:b=!1}=e,{formContext:S,schemaUtils:x,globalUiOptions:j}=v,C=ie(s,j),F=nt("FieldTemplate",v,C),A=nt("DescriptionFieldTemplate",v,C),O=nt("FieldHelpTemplate",v,C),k=nt("FieldErrorTemplate",v,C),N=x.retrieveSchema(n,l),B=o[V],I=Ne(x.toIdSchema(N,B,l,d,u),o),$=D.useCallback(((e,t,r)=>h(e,t,r||B)),[B,h]),T=function(e,t,r,i){const a=t.field,{fields:n,translateString:o}=i;if("function"==typeof a)return a;if("string"==typeof a&&a in n)return n[a];const s=fe(e),l=Array.isArray(s)?s[0]:s||"",c=e.$id;let d=Pt[l];return c&&c in n&&(d=c),d||!e.anyOf&&!e.oneOf?d in n?n[d]:()=>{const a=nt("UnsupportedFieldTemplate",i,t);return w.jsx(a,{schema:e,idSchema:r,reason:o(Dt.UnknownFieldType,[String(e.type)]),registry:i})}:()=>null}(N,C,I,v),_=Boolean(null!==(t=C.disabled)&&void 0!==t?t:e.disabled),P=Boolean(null!==(i=C.readonly)&&void 0!==i?i:e.readonly||e.schema.readOnly||N.readOnly),W=C.hideError,q=void 0===W?e.hideError:Boolean(W),M=Boolean(null!==(a=C.autofocus)&&void 0!==a?a:e.autofocus);if(0===Object.keys(N).length)return null;const R=x.getDisplayLabel(N,s,j),{__errors:L,...K}=c||{},H=r(s,["ui:classNames","classNames","ui:style"]);re in H&&(H[re]=r(H[re],["classNames","style"]));const z=w.jsx(T,{...e,onChange:$,idSchema:I,schema:N,uiSchema:H,disabled:_,readonly:P,hideError:q,autofocus:M,errorSchema:K,formContext:S,rawErrors:L}),Y=I[V];let J;J=b||U in N?m:C.title||e.schema.title||N.title||e.title||m;const G=C.description||e.schema.description||N.description||"",Q=C.enableMarkdownInDescription?w.jsx(E,{options:{disableParsingRawHTML:!0},children:G}):G,X=C.help,Z="hidden"===C.widget,ee=["form-group","field",`field-${fe(N)}`];!q&&L&&L.length>0&&ee.push("field-error has-error has-danger"),(null==s?void 0:s.classNames)&&ee.push(s.classNames),C.classNames&&ee.push(C.classNames);const te=w.jsx(O,{help:X,idSchema:I,schema:N,uiSchema:s,hasErrors:!q&&L&&L.length>0,registry:v}),ae=q||(N.anyOf||N.oneOf)&&!x.isSelect(N)?void 0:w.jsx(k,{errors:L,errorSchema:c,idSchema:I,schema:N,uiSchema:s,registry:v}),ne={description:w.jsx(A,{id:ct(Y),description:Q,schema:N,uiSchema:s,registry:v}),rawDescription:G,help:te,rawHelp:"string"==typeof X?X:void 0,errors:ae,rawErrors:q?void 0:L,id:Y,label:J,hidden:Z,onChange:h,onKeyChange:p,onDropPropertyClick:y,required:g,disabled:_,readonly:P,hideError:q,displayLabel:R,classNames:ee.join(" ").trim(),style:C.style,formContext:S,formData:l,schema:N,uiSchema:s,registry:v},oe=v.fields.AnyOfField,se=v.fields.OneOfField,le=(null==s?void 0:s["ui:field"])&&!0===(null==s?void 0:s["ui:fieldReplacesAnyOrOneOf"]);return w.jsx(F,{...ne,children:w.jsxs(w.Fragment,{children:[z,N.anyOf&&!le&&!x.isSelect(N)&&w.jsx(oe,{name:m,disabled:_,readonly:P,hideError:q,errorSchema:c,formData:l,formContext:S,idPrefix:d,idSchema:I,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:N.anyOf.map((e=>x.retrieveSchema(f(e)?e:{},l))),registry:v,schema:N,uiSchema:s}),N.oneOf&&!le&&!x.isSelect(N)&&w.jsx(se,{name:m,disabled:_,readonly:P,hideError:q,errorSchema:c,formData:l,formContext:S,idPrefix:d,idSchema:I,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:N.oneOf.map((e=>x.retrieveSchema(f(e)?e:{},l))),registry:v,schema:N,uiSchema:s})]})})}class qt extends D.Component{shouldComponentUpdate(e){return!oe(this.props,e)}render(){return w.jsx(Wt,{...this.props})}}function Mt(e){var t;const{schema:r,name:i,uiSchema:a,idSchema:n,formData:o,required:s,disabled:l=!1,readonly:c=!1,autofocus:d=!1,onChange:u,onBlur:m,onFocus:h,registry:p,rawErrors:f,hideError:y}=e,{title:g,format:v}=r,{widgets:b,formContext:S,schemaUtils:x,globalUiOptions:j}=p,C=x.isSelect(r)?gt(r,a):void 0;let F=C?"select":"text";v&&function(e,t,r={}){try{return st(e,t,r),!0}catch(i){const e=i;if(e.message&&(e.message.startsWith("No widget")||e.message.startsWith("Unsupported widget")))return!1;throw i}}(r,v,b)&&(F=v);const{widget:A=F,placeholder:D="",title:O,...k}=ie(a),E=x.getDisplayLabel(r,a,j),N=null!==(t=null!=O?O:g)&&void 0!==t?t:i,B=st(r,A,b);return w.jsx(B,{options:{...k,enumOptions:C},schema:r,uiSchema:a,id:n.$id,name:i,label:N,hideLabel:!E,hideError:y,value:o,onChange:u,onBlur:m,onFocus:h,required:s,disabled:l,readonly:c,formContext:S,autofocus:d,registry:p,placeholder:D,rawErrors:f})}function Rt(e){const{formData:t,onChange:r}=e;return D.useEffect((()=>{void 0===t&&r(null)}),[t,r]),null}function Lt(e){const{idSchema:t,description:r,registry:i,schema:a,uiSchema:n}=e,o=ie(n,i.globalUiOptions),{label:s=!0}=o;if(!r||!s)return null;const l=nt("DescriptionFieldTemplate",i,o);return w.jsx(l,{id:ct(t),description:r,schema:a,uiSchema:n,registry:i})}function Vt(e){const{children:t,className:r,disabled:i,hasToolbar:a,hasMoveDown:n,hasMoveUp:o,hasRemove:s,hasCopy:l,index:c,onCopyIndexClick:d,onDropIndexClick:u,onReorderClick:m,readonly:h,registry:p,uiSchema:f}=e,{CopyButton:y,MoveDownButton:g,MoveUpButton:v,RemoveButton:b}=p.templates.ButtonTemplates,S={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return w.jsxs("div",{className:r,children:[w.jsx("div",{className:a?"col-xs-9":"col-xs-12",children:t}),a&&w.jsx("div",{className:"col-xs-3 array-item-toolbox",children:w.jsxs("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(o||n)&&w.jsx(v,{style:S,disabled:i||h||!o,onClick:m(c,c-1),uiSchema:f,registry:p}),(o||n)&&w.jsx(g,{style:S,disabled:i||h||!n,onClick:m(c,c+1),uiSchema:f,registry:p}),l&&w.jsx(y,{style:S,disabled:i||h,onClick:d(c),uiSchema:f,registry:p}),s&&w.jsx(b,{style:S,disabled:i||h,onClick:u(c),uiSchema:f,registry:p})]})})]})}function Kt(e){const{canAdd:t,className:r,disabled:i,idSchema:a,uiSchema:n,items:o,onAddClick:s,readonly:l,registry:c,required:d,schema:u,title:m}=e,h=ie(n),p=nt("ArrayFieldDescriptionTemplate",c,h),f=nt("ArrayFieldItemTemplate",c,h),y=nt("ArrayFieldTitleTemplate",c,h),{ButtonTemplates:{AddButton:g}}=c.templates;return w.jsxs("fieldset",{className:r,id:a.$id,children:[w.jsx(y,{idSchema:a,title:h.title||m,required:d,schema:u,uiSchema:n,registry:c}),w.jsx(p,{idSchema:a,description:h.description||u.description,schema:u,uiSchema:n,registry:c}),w.jsx("div",{className:"row array-item-list",children:o&&o.map((({key:e,...t})=>w.jsx(f,{...t},e)))}),t&&w.jsx(g,{className:"array-item-add",onClick:s,disabled:i||l,uiSchema:n,registry:c})]})}function Ht(e){const{idSchema:t,title:r,schema:i,uiSchema:a,required:n,registry:o}=e,s=ie(a,o.globalUiOptions),{label:l=!0}=s;if(!r||!l)return null;const c=nt("TitleFieldTemplate",o,s);return w.jsx(c,{id:ht(t),title:r,required:n,schema:i,uiSchema:a,registry:o})}function zt(e){const{id:t,name:r,value:i,readonly:a,disabled:n,autofocus:o,onBlur:s,onFocus:l,onChange:c,onChangeOverride:d,options:u,schema:m,uiSchema:h,formContext:p,registry:f,rawErrors:y,type:g,hideLabel:v,hideError:b,...S}=e;if(!t)throw new Error(`no id for props ${JSON.stringify(e)}`);const x={...S,...it(m,g,u)};let j;j="number"===x.type||"integer"===x.type?i||0===i?i:"":null==i?"":i;const C=D.useCallback((({target:{value:e}})=>c(""===e?u.emptyValue:e)),[c,u]),F=D.useCallback((({target:e})=>s(t,e&&e.value)),[s,t]),A=D.useCallback((({target:e})=>l(t,e&&e.value)),[l,t]);return w.jsxs(w.Fragment,{children:[w.jsx("input",{id:t,name:t,className:"form-control",readOnly:a,disabled:n,autoFocus:o,value:j,...x,list:m.examples?ut(t):void 0,onChange:d||C,onBlur:F,onFocus:A,"aria-describedby":pt(t,!!m.examples)}),Array.isArray(m.examples)&&w.jsx("datalist",{id:ut(t),children:m.examples.concat(m.default&&!m.examples.includes(m.default)?[m.default]:[]).map((e=>w.jsx("option",{value:e},e)))},`datalist_${t}`)]})}function Yt({uiSchema:e}){const{submitText:t,norender:r,props:i={}}=function(e={}){const t=ie(e);if(t&&t[Q]){const e=t[Q];return{...at,...e}}return at}(e);return r?null:w.jsx("div",{children:w.jsx("button",{type:"submit",...i,className:`btn btn-info ${i.className||""}`,children:t})})}function Jt(e){const{iconType:t="default",icon:r,className:i,uiSchema:a,registry:n,...o}=e;return w.jsx("button",{type:"button",className:`btn btn-${t} ${i}`,...o,children:w.jsx("i",{className:`glyphicon glyphicon-${r}`})})}function Gt(e){const{registry:{translateString:t}}=e;return w.jsx(Jt,{title:t(Dt.CopyButton),className:"array-item-copy",...e,icon:"copy"})}function Qt(e){const{registry:{translateString:t}}=e;return w.jsx(Jt,{title:t(Dt.MoveDownButton),className:"array-item-move-down",...e,icon:"arrow-down"})}function Xt(e){const{registry:{translateString:t}}=e;return w.jsx(Jt,{title:t(Dt.MoveUpButton),className:"array-item-move-up",...e,icon:"arrow-up"})}function Zt(e){const{registry:{translateString:t}}=e;return w.jsx(Jt,{title:t(Dt.RemoveButton),className:"array-item-remove",...e,iconType:"danger",icon:"remove"})}function er({className:e,onClick:t,disabled:r,registry:i}){const{translateString:a}=i;return w.jsx("div",{className:"row",children:w.jsx("p",{className:`col-xs-3 col-xs-offset-9 text-right ${e}`,children:w.jsx(Jt,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:a(Dt.AddButton),onClick:t,disabled:r,registry:i})})})}function tr(e){const{id:t,description:r}=e;return r?"string"==typeof r?w.jsx("p",{id:t,className:"field-description",children:r}):w.jsx("div",{id:t,className:"field-description",children:r}):null}function rr({errors:e,registry:t}){const{translateString:r}=t;return w.jsxs("div",{className:"panel panel-danger errors",children:[w.jsx("div",{className:"panel-heading",children:w.jsx("h3",{className:"panel-title",children:r(Dt.ErrorsLabel)})}),w.jsx("ul",{className:"list-group",children:e.map(((e,t)=>w.jsx("li",{className:"list-group-item text-danger",children:e.stack},t)))})]})}const ir="*";function ar(e){const{label:t,required:r,id:i}=e;return t?w.jsxs("label",{className:"control-label",htmlFor:i,children:[t,r&&w.jsx("span",{className:"required",children:ir})]}):null}function nr(e){const{id:t,label:r,children:i,errors:a,help:n,description:o,hidden:s,required:l,displayLabel:c,registry:d,uiSchema:u}=e,m=nt("WrapIfAdditionalTemplate",d,ie(u));return s?w.jsx("div",{className:"hidden",children:i}):w.jsxs(m,{...e,children:[c&&w.jsx(ar,{label:r,required:l,id:t}),c&&o?o:null,i,a,n]})}function or(e){const{errors:t=[],idSchema:r}=e;if(0===t.length)return null;const i=dt(r);return w.jsx("div",{children:w.jsx("ul",{id:i,className:"error-detail bs-callout bs-callout-info",children:t.filter((e=>!!e)).map(((e,t)=>w.jsx("li",{className:"text-danger",children:e},t)))})})}function sr(e){const{idSchema:t,help:r}=e;if(!r)return null;const i=mt(t);return"string"==typeof r?w.jsx("p",{id:i,className:"help-block",children:r}):w.jsx("div",{id:i,className:"help-block",children:r})}function lr(e){const{description:t,disabled:r,formData:i,idSchema:a,onAddClick:n,properties:o,readonly:s,registry:l,required:c,schema:d,title:u,uiSchema:m}=e,h=ie(m),p=nt("TitleFieldTemplate",l,h),f=nt("DescriptionFieldTemplate",l,h),{ButtonTemplates:{AddButton:y}}=l.templates;return w.jsxs("fieldset",{id:a.$id,children:[u&&w.jsx(p,{id:ht(a),title:u,required:c,schema:d,uiSchema:m,registry:l}),t&&w.jsx(f,{id:ct(a),description:t,schema:d,uiSchema:m,registry:l}),o.map((e=>e.content)),ae(d,m,i)&&w.jsx(y,{className:"object-property-expand",onClick:n(d),disabled:r||s,uiSchema:m,registry:l})]})}const cr="*";function dr(e){const{id:t,title:r,required:i}=e;return w.jsxs("legend",{id:t,children:[r,i&&w.jsx("span",{className:"required",children:cr})]})}function ur(e){const{schema:t,idSchema:r,reason:i,registry:a}=e,{translateString:n}=a;let o=Dt.UnsupportedField;const s=[];return r&&r.$id&&(o=Dt.UnsupportedFieldWithId,s.push(r.$id)),i&&(o=o===Dt.UnsupportedField?Dt.UnsupportedFieldWithReason:Dt.UnsupportedFieldWithIdAndReason,s.push(i)),w.jsxs("div",{className:"unsupported-field",children:[w.jsx("p",{children:w.jsx(E,{options:{disableParsingRawHTML:!0},children:n(o,s)})}),t&&w.jsx("pre",{children:JSON.stringify(t,null,2)})]})}function mr(e){const{id:t,classNames:r,style:i,disabled:a,label:n,onKeyChange:o,onDropPropertyClick:s,readonly:l,required:c,schema:d,children:u,uiSchema:m,registry:h}=e,{templates:p,translateString:f}=h,{RemoveButton:y}=p.ButtonTemplates,g=f(Dt.KeyLabel,[n]);return U in d?w.jsx("div",{className:r,style:i,children:w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-xs-5 form-additional",children:w.jsxs("div",{className:"form-group",children:[w.jsx(ar,{label:g,required:c,id:`${t}-key`}),w.jsx("input",{className:"form-control",type:"text",id:`${t}-key`,onBlur:({target:e})=>o(e&&e.value),defaultValue:n})]})}),w.jsx("div",{className:"form-additional form-group col-xs-5",children:u}),w.jsx("div",{className:"col-xs-2",children:w.jsx(y,{className:"array-item-remove btn-block",style:{border:"0"},disabled:a||l,onClick:s(n),uiSchema:m,registry:h})})]})}):w.jsx("div",{className:r,style:i,children:u})}function hr({type:e,range:t,value:r,select:i,rootId:a,name:n,disabled:o,readonly:s,autofocus:l,registry:c,onBlur:d,onFocus:u}){const m=a+"_"+e,{SelectWidget:h}=c.widgets;return w.jsx(h,{schema:{type:"integer"},id:m,name:n,className:"form-control",options:{enumOptions:Ge(t[0],t[1])},placeholder:e,value:r,disabled:o,readonly:s,autofocus:l,onChange:t=>i(e,t),onBlur:d,onFocus:u,registry:c,label:"","aria-describedby":pt(a)})}function pr({time:e=!1,disabled:t=!1,readonly:r=!1,autofocus:i=!1,options:a,id:n,name:o,registry:s,onBlur:l,onFocus:c,onChange:d,value:u}){const{translateString:m}=s,[h,p]=D.useState(u),[f,y]=D.useReducer(((e,t)=>({...e,...t})),vt(u,e));D.useEffect((()=>{const t=St(f,e);!function(e){return Object.values(e).every((e=>-1!==e))}(f)||t===u?h!==u&&(p(u),y(vt(u,e))):d(t)}),[e,u,d,f,h]);const g=D.useCallback(((e,t)=>{y({[e]:t})}),[]),v=D.useCallback((i=>{if(i.preventDefault(),t||r)return;const a=vt((new Date).toJSON(),e);d(St(a,e))}),[t,r,e]),b=D.useCallback((e=>{e.preventDefault(),t||r||d(void 0)}),[t,r,d]);return w.jsxs("ul",{className:"list-inline",children:[tt(f,e,a.yearsRange,a.format).map(((e,a)=>w.jsx("li",{className:"list-inline-item",children:w.jsx(hr,{rootId:n,name:o,select:g,...e,disabled:t,readonly:r,registry:s,onBlur:l,onFocus:c,autofocus:i&&0===a})},a))),("undefined"===a.hideNowButton||!a.hideNowButton)&&w.jsx("li",{className:"list-inline-item",children:w.jsx("a",{href:"#",className:"btn btn-info btn-now",onClick:v,children:m(Dt.NowLabel)})}),("undefined"===a.hideClearButton||!a.hideClearButton)&&w.jsx("li",{className:"list-inline-item",children:w.jsx("a",{href:"#",className:"btn btn-warning btn-clear",onClick:b,children:m(Dt.ClearLabel)})})]})}function fr({time:e=!0,...t}){const{AltDateWidget:r}=t.registry.widgets;return w.jsx(r,{time:e,...t})}function yr({schema:e,uiSchema:t,options:r,id:i,value:a,disabled:n,readonly:o,label:s,hideLabel:l,autofocus:c=!1,onBlur:d,onFocus:u,onChange:m,registry:h}){var p;const f=nt("DescriptionFieldTemplate",h,r),y=bt(e),g=D.useCallback((e=>m(e.target.checked)),[m]),v=D.useCallback((e=>d(i,e.target.checked)),[d,i]),b=D.useCallback((e=>u(i,e.target.checked)),[u,i]),S=null!==(p=r.description)&&void 0!==p?p:e.description;return w.jsxs("div",{className:"checkbox "+(n||o?"disabled":""),children:[!l&&!!S&&w.jsx(f,{id:ct(i),description:S,schema:e,uiSchema:t,registry:h}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",id:i,name:i,checked:void 0!==a&&a,required:y,disabled:n||o,autoFocus:c,onChange:g,onBlur:v,onFocus:b,"aria-describedby":pt(i)}),yt(w.jsx("span",{children:s}),l)]})]})}function gr({id:e,disabled:t,options:{inline:r=!1,enumOptions:i,enumDisabled:a,emptyValue:n},value:o,autofocus:s=!1,readonly:l,onChange:c,onBlur:d,onFocus:u}){const h=Array.isArray(o)?o:[o],p=D.useCallback((({target:t})=>d(e,Xe(t&&t.value,i,n))),[d,e]),f=D.useCallback((({target:t})=>u(e,Xe(t&&t.value,i,n))),[u,e]);return w.jsx("div",{className:"checkboxes",id:e,children:Array.isArray(i)&&i.map(((n,o)=>{const d=Ze(n.value,h),u=Array.isArray(a)&&-1!==a.indexOf(n.value),y=t||u||l?"disabled":"",g=w.jsxs("span",{children:[w.jsx("input",{type:"checkbox",id:ft(e,o),name:e,checked:d,value:String(o),disabled:t||u||l,autoFocus:s&&0===o,onChange:e=>{e.target.checked?c(function(e,t,r=[]){const i=Xe(e,r);if(!v(i)){const e=r.findIndex((e=>i===e.value)),a=r.map((({value:e})=>e));return t.slice(0,e).concat(i,t.slice(e)).sort(((e,t)=>Number(a.indexOf(e)>a.indexOf(t))))}return t}(o,h,i)):c(function(e,t,r=[]){const i=Xe(e,r);return Array.isArray(t)?t.filter((e=>!m(e,i))):m(i,t)?void 0:t}(o,h,i))},onBlur:p,onFocus:f,"aria-describedby":pt(e)}),w.jsx("span",{children:n.label})]});return r?w.jsx("label",{className:`checkbox-inline ${y}`,children:g},o):w.jsx("div",{className:`checkbox ${y}`,children:w.jsx("label",{children:g})},o)}))})}function vr(e){const{disabled:t,readonly:r,options:i,registry:a}=e,n=nt("BaseInputTemplate",a,i);return w.jsx(n,{type:"color",...e,disabled:t||r})}function br(e){const{onChange:t,options:r,registry:i}=e,a=nt("BaseInputTemplate",i,r),n=D.useCallback((e=>t(e||void 0)),[t]);return w.jsx(a,{type:"date",...e,onChange:n})}function Sr(e){const{onChange:t,value:r,options:i,registry:a}=e,n=nt("BaseInputTemplate",a,i);return w.jsx(n,{type:"datetime-local",...e,value:Ct(r),onChange:e=>{return t((r=e)?new Date(r).toJSON():void 0);var r}})}function xr(e){const{options:t,registry:r}=e,i=nt("BaseInputTemplate",r,t);return w.jsx(i,{type:"email",...e})}function jr(e,t){return null===e?null:e.replace(";base64",`;name=${encodeURIComponent(t)};base64`)}function Cr(e){const{name:t,size:r,type:i}=e;return new Promise(((a,n)=>{const o=new window.FileReader;o.onerror=n,o.onload=e=>{var n;"string"==typeof(null===(n=e.target)||void 0===n?void 0:n.result)?a({dataURL:jr(e.target.result,t),name:t,size:r,type:i}):a({dataURL:null,name:t,size:r,type:i})},o.readAsDataURL(e)}))}function Fr({fileInfo:e,registry:t}){const{translateString:r}=t,{dataURL:i,type:a,name:n}=e;return i?["image/jpeg","image/png"].includes(a)?w.jsx("img",{src:i,style:{maxWidth:"100%"},className:"file-preview"}):w.jsxs(w.Fragment,{children:[" ",w.jsx("a",{download:`preview-${n}`,href:i,className:"file-download",children:r(Dt.PreviewLabel)})]}):null}function Ar({filesInfo:e,registry:t,preview:r,onRemove:i,options:a}){if(0===e.length)return null;const{translateString:n}=t,{RemoveButton:o}=nt("ButtonTemplates",t,a);return w.jsx("ul",{className:"file-info",children:e.map(((e,a)=>{const{name:s,size:l,type:c}=e;return w.jsxs("li",{children:[w.jsx(E,{children:n(Dt.FilesInfo,[s,c,String(l)])}),r&&w.jsx(Fr,{fileInfo:e,registry:t}),w.jsx(o,{onClick:()=>i(a),registry:t})]},a)}))})}function Dr(e){return e.reduce(((e,t)=>{if(!t)return e;try{const{blob:r,name:i}=function(e){var t;if(-1===e.indexOf("data:"))throw new Error("File is invalid: URI must be a dataURI");const r=e.slice(5).split(";base64,");if(2!==r.length)throw new Error("File is invalid: dataURI must be base64");const[i,a]=r,[n,...o]=i.split(";"),s=n||"",l=decodeURI((null===(t=o.map((e=>e.split("="))).find((([e])=>"name"===e)))||void 0===t?void 0:t[1])||"unknown");try{const e=atob(a),t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return{blob:new window.Blob([new Uint8Array(t)],{type:s}),name:l}}catch(c){throw new Error("File is invalid: "+c.message)}}(t);return[...e,{dataURL:t,name:i,size:r.size,type:r.type}]}catch(r){return e}}),[])}function wr(e){const{disabled:t,readonly:r,required:i,multiple:a,onChange:n,value:o,options:s,registry:l}=e,c=nt("BaseInputTemplate",l,s),d=D.useCallback((e=>{var t;e.target.files&&(t=e.target.files,Promise.all(Array.from(t).map(Cr))).then((e=>{const t=e.map((e=>e.dataURL));n(a?o.concat(t[0]):t[0])}))}),[a,o,n]),u=D.useMemo((()=>Dr(Array.isArray(o)?o:[o])),[o]),m=D.useCallback((e=>{if(a){const t=o.filter(((t,r)=>r!==e));n(t)}else n(void 0)}),[a,o,n]);return w.jsxs("div",{children:[w.jsx(c,{...e,disabled:t||r,type:"file",required:!o&&i,onChangeOverride:d,value:"",accept:s.accept?String(s.accept):void 0}),w.jsx(Ar,{filesInfo:u,onRemove:m,registry:l,preview:s.filePreview,options:s})]})}function Or({id:e,value:t}){return w.jsx("input",{type:"hidden",id:e,name:e,value:void 0===t?"":t})}function kr(e){const{options:t,registry:r}=e,i=nt("BaseInputTemplate",r,t);return w.jsx(i,{type:"password",...e})}function Er({options:e,value:t,required:r,disabled:i,readonly:a,autofocus:n=!1,onBlur:o,onFocus:s,onChange:l,id:c}){const{enumOptions:d,enumDisabled:u,inline:m,emptyValue:h}=e,p=D.useCallback((({target:e})=>o(c,Xe(e&&e.value,d,h))),[o,c]),f=D.useCallback((({target:e})=>s(c,Xe(e&&e.value,d,h))),[s,c]);return w.jsx("div",{className:"field-radio-group",id:c,children:Array.isArray(d)&&d.map(((e,o)=>{const s=Ze(e.value,t),d=Array.isArray(u)&&-1!==u.indexOf(e.value),h=i||d||a?"disabled":"",y=w.jsxs("span",{children:[w.jsx("input",{type:"radio",id:ft(c,o),checked:s,name:c,required:r,value:String(o),disabled:i||d||a,autoFocus:n&&0===o,onChange:()=>l(e.value),onBlur:p,onFocus:f,"aria-describedby":pt(c)}),w.jsx("span",{children:e.label})]});return m?w.jsx("label",{className:`radio-inline ${h}`,children:y},o):w.jsx("div",{className:`radio ${h}`,children:w.jsx("label",{children:y})},o)}))})}function Nr(e){const{value:t,registry:{templates:{BaseInputTemplate:r}}}=e;return w.jsxs("div",{className:"field-range-wrapper",children:[w.jsx(r,{type:"range",...e}),w.jsx("span",{className:"range-view",children:t})]})}function Br(e,t){return t?Array.from(e.target.options).slice().filter((e=>e.selected)).map((e=>e.value)):e.target.value}function Ir({schema:e,id:t,options:r,value:i,required:a,disabled:n,readonly:o,multiple:s=!1,autofocus:l=!1,onChange:c,onBlur:d,onFocus:u,placeholder:m}){const{enumOptions:h,enumDisabled:p,emptyValue:f}=r,y=s?[]:"",g=D.useCallback((e=>{const r=Br(e,s);return u(t,Xe(r,h,f))}),[u,t,e,s,h,f]),v=D.useCallback((e=>{const r=Br(e,s);return d(t,Xe(r,h,f))}),[d,t,e,s,h,f]),b=D.useCallback((e=>{const t=Br(e,s);return c(Xe(t,h,f))}),[c,e,s,h,f]),S=function(e,t=[],r=!1){const i=t.map(((t,r)=>Ze(t.value,e)?String(r):void 0)).filter((e=>void 0!==e));return r?i:i[0]}(i,h,s),x=!s&&void 0===e.default;return w.jsxs("select",{id:t,name:t,multiple:s,className:"form-control",value:void 0===S?y:S,required:a,disabled:n||o,autoFocus:l,onBlur:v,onFocus:g,onChange:b,"aria-describedby":pt(t),children:[x&&w.jsx("option",{value:"",children:m}),Array.isArray(h)&&h.map((({value:e,label:t},r)=>{const i=p&&-1!==p.indexOf(e);return w.jsx("option",{value:String(r),disabled:i,children:t},r)}))]})}function $r({id:e,options:t={},placeholder:r,value:i,required:a,disabled:n,readonly:o,autofocus:s=!1,onChange:l,onBlur:c,onFocus:d}){const u=D.useCallback((({target:{value:e}})=>l(""===e?t.emptyValue:e)),[l,t.emptyValue]),m=D.useCallback((({target:t})=>c(e,t&&t.value)),[c,e]),h=D.useCallback((({target:t})=>d(e,t&&t.value)),[e,d]);return w.jsx("textarea",{id:e,name:e,className:"form-control",value:i||"",placeholder:r,required:a,disabled:n,readOnly:o,autoFocus:s,rows:t.rows,onBlur:m,onFocus:h,onChange:u,"aria-describedby":pt(e)})}function Ur(e){const{options:t,registry:r}=e,i=nt("BaseInputTemplate",r,t);return w.jsx(i,{...e})}function Tr(e){const{onChange:t,options:r,registry:i}=e,a=nt("BaseInputTemplate",i,r),n=D.useCallback((e=>t(e?`${e}:00`:void 0)),[t]);return w.jsx(a,{type:"time",...e,onChange:n})}function _r(e){const{options:t,registry:r}=e,i=nt("BaseInputTemplate",r,t);return w.jsx(i,{type:"url",...e})}function Pr(e){const{options:t,registry:r}=e,i=nt("BaseInputTemplate",r,t);return w.jsx(i,{type:"number",...e})}$r.defaultProps={autofocus:!1,options:{}};class Wr extends D.Component{constructor(e){if(super(e),this.getUsedFormData=(e,t)=>{if(0===t.length&&"object"!=typeof e)return e;const r=j(e,t);return Array.isArray(e)?Object.keys(r).map((e=>r[e])):r},this.getFieldNames=(e,t)=>{const r=(e,a=[],n=[[]])=>(Object.keys(e).forEach((o=>{if("object"==typeof e[o]){const t=n.map((e=>[...e,o]));e[o][Z]&&""!==e[o][z]?a.push(e[o][z]):r(e[o],a,t)}else o===z&&""!==e[o]&&n.forEach((e=>{const r=i(t,e);("object"!=typeof r||g(r)||Array.isArray(r)&&r.every((e=>"object"!=typeof e)))&&a.push(e)}))})),a);return r(e)},this.omitExtraData=e=>{const{schema:t,schemaUtils:r}=this.state,i=r.retrieveSchema(t,e),a=r.toPathSchema(i,"",e),n=this.getFieldNames(a,e);return this.getUsedFormData(e,n)},this.onChange=(e,t,r)=>{const{extraErrors:i,omitExtraData:a,liveOmit:n,noValidate:o,liveValidate:s,onChange:l}=this.props,{schemaUtils:c,schema:d,retrievedSchema:u}=this.state;if(I(e)||Array.isArray(e)){e=this.getStateFromProps(this.props,e,u).formData}const m=!o&&s;let h={formData:e,schema:d},p=e;if(!0===a&&!0===n&&(p=this.omitExtraData(e),h={formData:p}),m){const e=this.validate(p,d,c,u);let r=e.errors,a=e.errorSchema;const n=r,o=a;if(i){const t=Ft(e,i);a=t.errorSchema,r=t.errors}if(t){a=Ne(a,this.filterErrorsBasedOnSchema(t,u,p),"preventDuplicates")}h={formData:p,errors:r,errorSchema:a,schemaValidationErrors:n,schemaValidationErrorSchema:o}}else if(!o&&t){const e=i?Ne(t,i,"preventDuplicates"):t;h={formData:p,errorSchema:e,errors:xt(e)}}this.setState(h,(()=>l&&l({...this.state,...h},r)))},this.reset=()=>{const{onChange:e}=this.props,t={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(t,(()=>e&&e({...this.state,...t})))},this.onBlur=(e,t)=>{const{onBlur:r}=this.props;r&&r(e,t)},this.onFocus=(e,t)=>{const{onFocus:r}=this.props;r&&r(e,t)},this.onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:t,extraErrors:r,noValidate:i,onSubmit:a}=this.props;let{formData:n}=this.state;if(!0===t&&(n=this.omitExtraData(n)),i||this.validateFormWithFormData(n)){const t=r||{},i=r?xt(r):[];this.setState({formData:n,errors:i,errorSchema:t,schemaValidationErrors:[],schemaValidationErrorSchema:{}},(()=>{a&&a({...this.state,formData:n,status:"submitted"},e)}))}},this.submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=e=>{const{extraErrors:t,extraErrorsBlockSubmit:r,focusOnFirstError:i,onError:a}=this.props,{errors:n}=this.state,o=this.validate(e);let s=o.errors,l=o.errorSchema;const c=s,d=l,u=s.length>0||t&&r;if(u){if(t){const e=Ft(o,t);l=e.errorSchema,s=e.errors}i&&("function"==typeof i?i(s[0]):this.focusOnError(s[0])),this.setState({errors:s,errorSchema:l,schemaValidationErrors:c,schemaValidationErrorSchema:d},(()=>{a&&a(s)}))}else n.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!u},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!oe(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=D.createRef()}getSnapshotBeforeUpdate(e,t){if(!oe(this.props,e)){const r=!oe(e.schema,this.props.schema),i=!oe(e.formData,this.props.formData),a=this.getStateFromProps(this.props,this.props.formData,r||i?void 0:this.state.retrievedSchema,r);return{nextState:a,shouldUpdate:!oe(a,t)}}return{shouldUpdate:!1}}componentDidUpdate(e,t,r){if(r.shouldUpdate){const{nextState:e}=r;oe(e.formData,this.props.formData)||oe(e.formData,t.formData)||!this.props.onChange||this.props.onChange(e),this.setState(e)}}getStateFromProps(e,t,r,i=!1){var a;const n=this.state||{},o="schema"in e?e.schema:this.props.schema,s=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},l=void 0!==t,c="liveValidate"in e?e.liveValidate:this.props.liveValidate,d=l&&!e.noValidate&&c,u=o,m="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior;let h=n.schemaUtils;h&&!h.doesSchemaUtilsDiffer(e.validator,u,m)||(h=function(e,t,r={}){return new Ye(e,t,r)}(e.validator,u,m));const p=h.getDefaultFormState(o,t),f=null!=r?r:h.retrieveSchema(o,p);let y,g,v=n.schemaValidationErrors,b=n.schemaValidationErrorSchema;if(d){const e=this.validate(p,o,h,f);y=e.errors,g=i?e.errorSchema:Ne(null===(a=this.state)||void 0===a?void 0:a.errorSchema,e.errorSchema,"preventDuplicates"),v=y,b=g}else{const t=e.noValidate||i?{errors:[],errorSchema:{}}:e.liveValidate?{errors:n.errors||[],errorSchema:n.errorSchema||{}}:{errors:n.schemaValidationErrors||[],errorSchema:n.schemaValidationErrorSchema||{}};y=t.errors,g=t.errorSchema}if(e.extraErrors){const t=Ft({errorSchema:g,errors:y},e.extraErrors);g=t.errorSchema,y=t.errors}const S=h.toIdSchema(f,s["ui:rootFieldId"],p,e.idPrefix,e.idSeparator);return{schemaUtils:h,schema:o,uiSchema:s,idSchema:S,formData:p,edit:l,errors:y,errorSchema:g,schemaValidationErrors:v,schemaValidationErrorSchema:b,retrievedSchema:f}}shouldComponentUpdate(e,t){return function(e,t,r){const{props:i,state:a}=e;return!oe(i,t)||!oe(a,r)}(this,e,t)}validate(e,t=this.props.schema,r,i){const a=r||this.state.schemaUtils,{customValidate:n,transformErrors:o,uiSchema:s}=this.props,l=null!=i?i:a.retrieveSchema(t,e);return a.getValidator().validateFormData(e,l,n,o,s)}renderErrors(e){const{errors:t,errorSchema:r,schema:i,uiSchema:a}=this.state,{formContext:n}=this.props,o=nt("ErrorListTemplate",e,ie(a));return t&&t.length?w.jsx(o,{errors:t,errorSchema:r||{},schema:i,uiSchema:a,formContext:n,registry:e}):null}filterErrorsBasedOnSchema(e,t,r){const{retrievedSchema:i,schemaUtils:a}=this.state,n=null!=t?t:i,o=a.toPathSchema(n,"",r),s=this.getFieldNames(o,r),l=j(e,s);"object"!==(null==t?void 0:t.type)&&"array"!==(null==t?void 0:t.type)&&(l.__errors=e.__errors);const c=e=>(C(e,((t,r)=>{void 0===t?delete e[r]:"object"!=typeof t||Array.isArray(t.__errors)||c(t)})),e);return c(l)}getRegistry(){var e;const{translateString:t,uiSchema:r={}}=this.props,{schemaUtils:i}=this.state,{fields:a,templates:n,widgets:o,formContext:s,translateString:l}={fields:{AnyOfField:It,ArrayField:Nt,BooleanField:Bt,NumberField:Tt,ObjectField:_t,OneOfField:It,SchemaField:qt,StringField:Mt,NullField:Rt},templates:{ArrayFieldDescriptionTemplate:Lt,ArrayFieldItemTemplate:Vt,ArrayFieldTemplate:Kt,ArrayFieldTitleTemplate:Ht,ButtonTemplates:{SubmitButton:Yt,AddButton:er,CopyButton:Gt,MoveDownButton:Qt,MoveUpButton:Xt,RemoveButton:Zt},BaseInputTemplate:zt,DescriptionFieldTemplate:tr,ErrorListTemplate:rr,FieldTemplate:nr,FieldErrorTemplate:or,FieldHelpTemplate:sr,ObjectFieldTemplate:lr,TitleFieldTemplate:dr,UnsupportedFieldTemplate:ur,WrapIfAdditionalTemplate:mr},widgets:{AltDateWidget:pr,AltDateTimeWidget:fr,CheckboxWidget:yr,CheckboxesWidget:gr,ColorWidget:vr,DateWidget:br,DateTimeWidget:Sr,EmailWidget:xr,FileWidget:wr,HiddenWidget:Or,PasswordWidget:kr,RadioWidget:Er,RangeWidget:Nr,SelectWidget:Ir,TextWidget:Ur,TextareaWidget:$r,TimeWidget:Tr,UpDownWidget:Pr,URLWidget:_r},rootSchema:{},formContext:{},translateString:Qe};return{fields:{...a,...this.props.fields},templates:{...n,...this.props.templates,ButtonTemplates:{...n.ButtonTemplates,...null===(e=this.props.templates)||void 0===e?void 0:e.ButtonTemplates}},widgets:{...o,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||s,schemaUtils:i,translateString:t||l,globalUiOptions:r["ui:globalOptions"]}}focusOnError(e){const{idPrefix:t="root",idSeparator:r="_"}=this.props,{property:i}=e,a=S(i);""===a[0]?a[0]=t:a.unshift(t);const n=a.join(r);let o=this.formElement.current.elements[n];o||(o=this.formElement.current.querySelector(`input[id^=${n}`)),o&&o.length&&(o=o[0]),o&&o.focus()}validateForm(){const{omitExtraData:e}=this.props;let{formData:t}=this.state;return!0===e&&(t=this.omitExtraData(t)),this.validateFormWithFormData(t)}render(){const{children:e,id:t,idPrefix:r,idSeparator:i,className:a="",tagName:n,name:o,method:s,target:l,action:c,autoComplete:d,enctype:u,acceptcharset:m,acceptCharset:h,noHtml5Validate:p=!1,disabled:f,readonly:y,formContext:g,showErrorList:v="top",_internalFormWrapper:b}=this.props,{schema:S,uiSchema:x,formData:j,errorSchema:C,idSchema:F}=this.state,A=this.getRegistry(),{SchemaField:D}=A.fields,{SubmitButton:O}=A.templates.ButtonTemplates,k=b?n:void 0,E=b||n||"form";let{[Q]:N={}}=ie(x);f&&(N={...N,props:{...N.props,disabled:!0}});const B={[re]:{[Q]:N}};return w.jsxs(E,{className:a||"rjsf",id:t,name:o,method:s,target:l,action:c,autoComplete:d,encType:u,acceptCharset:h||m,noValidate:p,onSubmit:this.onSubmit,as:k,ref:this.formElement,children:["top"===v&&this.renderErrors(A),w.jsx(D,{name:"",schema:S,uiSchema:x,errorSchema:C,idSchema:F,idPrefix:r,idSeparator:i,formContext:g,formData:j,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:A,disabled:f,readonly:y}),e||w.jsx(O,{uiSchema:B,registry:A}),"bottom"===v&&this.renderErrors(A)]})}}const qr={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},Mr=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Rr=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function Lr(e,t,r,a,n,o,s){const{validationError:l}=t;let c=function(e=[],t){return e.map((e=>{const{instancePath:r,keyword:a,params:n,schemaPath:o,parentSchema:s,...l}=e;let{message:c=""}=l,d=r.replace(/\//g,"."),u=`${d} ${c}`.trim();if("missingProperty"in n){d=d?`${d}.${n.missingProperty}`:n.missingProperty;const e=n.missingProperty,r=ie(i(t,`${d.replace(/^\./,"")}`)).title;if(r)c=c.replace(e,r);else{const t=i(s,[J,e,"title"]);t&&(c=c.replace(e,t))}u=c}else{const e=ie(i(t,`${d.replace(/^\./,"")}`)).title;if(e)u=`'${e}' ${c}`.trim();else{const e=null==s?void 0:s.title;e&&(u=`'${e}' ${c}`.trim())}}return{name:a,property:d,message:c,params:n,stack:u,schemaPath:o}}))}(t.errors,s);l&&(c=[...c,{stack:l.message}]),"function"==typeof o&&(c=o(c,s));let d=function(e){const t=new et;return e.length&&e.forEach((e=>{const{property:r,message:i}=e,a="."===r?[]:S(r);a.length>0&&""===a[0]&&a.splice(0,1),i&&t.addErrors(i,a)})),t.ErrorSchema}(c);if(l&&(d={...d,$schema:{__errors:[l.message]}}),"function"!=typeof n)return{errors:c,errorSchema:d};const u=We(e,a,r,a,!0);return Ft({errors:c,errorSchema:d},jt(n(u,ne(u),s)))}class Vr{constructor(e,t){const{additionalMetaSchemas:r,customFormats:i,ajvOptionsOverrides:a,ajvFormatOptions:n,AjvClass:o}=e;this.ajv=function(e,t,r={},i,a=N){const n=new a({...qr,...r});return i?B(n,i):!1!==i&&B(n),n.addFormat("data-url",Rr),n.addFormat("color",Mr),n.addKeyword(U),n.addKeyword(Z),Array.isArray(e)&&n.addMetaSchema(e),f(t)&&Object.keys(t).forEach((e=>{n.addFormat(e,t[e])})),n}(r,i,a,n,o),this.localizer=t}reset(){this.ajv.removeSchema()}toErrorList(e,t=[]){return xt(e,t)}rawValidation(e,t){let r,i,a;e[V]&&(i=this.ajv.getSchema(e[V]));try{void 0===i&&(i=this.ajv.compile(e)),i(t)}catch(n){r=n}return i&&("function"==typeof this.localizer&&this.localizer(i.errors),a=i.errors||void 0,i.errors=null),{errors:a,validationError:r}}validateFormData(e,t,r,i,a){return Lr(this,this.rawValidation(t,e),e,t,r,i,a)}handleSchemaUpdate(e){var t,r;const i=null!==(t=e[V])&&void 0!==t?t:ee;void 0===this.ajv.getSchema(i)?this.ajv.addSchema(e,i):oe(e,null===(r=this.ajv.getSchema(i))||void 0===r?void 0:r.schema)||(this.ajv.removeSchema(i),this.ajv.addSchema(e,i))}isValid(e,t,r){var i;try{this.handleSchemaUpdate(r);const a=At(e),n=null!==(i=a[V])&&void 0!==i?i:function(e){const t=new Set;return JSON.stringify(e,((e,r)=>(t.add(e),r))),function(e){let t=0;for(let r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t.toString(16)}(JSON.stringify(e,Array.from(t).sort()))}(a);let o;o=this.ajv.getSchema(n),void 0===o&&(o=this.ajv.addSchema(a,n).getSchema(n)||this.ajv.compile(a));return o(t)}catch(a){return!1}}}const Kr=function(e={},t){return new Vr(e,t)}();export{Wr as F,it as g,Kr as v};
