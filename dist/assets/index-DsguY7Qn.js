const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainDashboard-n-bU1pM9.js","assets/vendor-BORITBlt.js","assets/Logo-5T_b-ZIv.js","assets/AuthLayout-CqIn7IEm.js","assets/Layout2-DG-OQWZu.js","assets/LandingDoubleClasic-A0yw7b2r.js","assets/ActionBlock-D4GVTLGc.js","assets/HeadingText-Dr7_v3HE.js","assets/HorizontalHero-BOKxtxvi.js","assets/Image-C5Ei4zn4.js","assets/InfoColumns-D3hZBDBm.js","assets/InputBlock-BOPL_UWv.js","assets/Leed-BaMrghUO.js","assets/Link-CTVXUrzC.js","assets/ListBlock-CyryqXAc.js","assets/ListTableBlock-D7ESGzeS.js","assets/Paragraph-7pTMGX4t.js","assets/SubmitForm-LoPzb7yD.js","assets/WorkspacesHero-CAsa9KBE.js"])))=>i.map(i=>d[i]);
import{Q as e,j as t,a,r as s,b as l,R as o,F as r,L as n,c,d as i,H as d,e as m,f as b,g as u,h as p,i as h,k as g,l as f,m as x,n as k,o as j,u as y,p as S,q as _,s as v,t as N,v as w,w as C,x as E,y as T,z as L,A as P,B as D,C as O,D as B,E as I,G as A,I as F,J as R,K as M,M as $,N as z,O as U,P as H,S as V,T as q,U as W,V as K,W as J,X as G,Y as Q,Z,_ as X,$ as Y,a0 as ee,a1 as te,a2 as ae,a3 as se,a4 as le}from"./vendor-BORITBlt.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const oe=new e({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),re=({children:e})=>t.jsx(a,{client:oe,children:e}),ne=s.createContext({user:null,setUserToContext:()=>{}}),ce=({children:e})=>{const[a,l]=s.useState(null);return t.jsx(ne.Provider,{value:{user:a,setUserToContext:l},children:e})},ie=l((e=>({slots:{},isEditing:!0,selectedSlot:null,selectedBlock:null,copiedBlock:null,setSlots:t=>e({slots:t}),addBlockToSlot:(t,a)=>{e((e=>({slots:{...e.slots,[t]:[...e.slots[t]||[],a]}})))},setSelectedSlot:t=>e({selectedSlot:t}),setSelectedBlock:t=>e({selectedBlock:t}),setCopiedBlock:t=>e({copiedBlock:t}),removeBlock:(t,a)=>{e((e=>({slots:{...e.slots,[a]:e.slots[a].filter((e=>e.id!==t))}})))},deselectBlock:()=>e({selectedBlock:null}),moveBlock:(t,a,s)=>{e((e=>{const l=[...e.slots[a]||[]],o=l.findIndex((e=>e.id===t));if(-1===o)return e;const r="up"===s?o-1:o+1;if(r<0||r>=l.length)return e;const[n]=l.splice(o,1);return l.splice(r,0,n),{slots:{...e.slots,[a]:l}}}))},setBlockData:(t,a)=>{e((e=>{const s={...e.slots};return Object.keys(s).forEach((e=>{const l=s[e];Array.isArray(l)&&(s[e]=l.map((e=>e.id===t?{...e,data:a}:e)))})),{slots:s}}))}}))),de={},me=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");s=Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in de)return;de[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const l=document.createElement("link");return l.rel=t?"stylesheet":"modulepreload",t||(l.as="script",l.crossOrigin=""),l.href=e,a&&l.setAttribute("nonce",a),document.head.appendChild(l),t?new Promise(((t,a)=>{l.addEventListener("load",t),l.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return s.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},be={MainDashboard:{id:"MainDashboard",component:o.lazy((()=>me((()=>import("./MainDashboard-n-bU1pM9.js")),__vite__mapDeps([0,1,2])))),slots:["header","primaryContent","secondaryContent","footer"],parentSlots:["header","footer"]},AuthLayout:{id:"AuthLayout",component:o.lazy((()=>me((()=>import("./AuthLayout-CqIn7IEm.js")),__vite__mapDeps([3,1,2])))),slots:["header"],parentSlots:["header"]},layout2:{id:"layout2",component:o.lazy((()=>me((()=>import("./Layout2-DG-OQWZu.js")),__vite__mapDeps([4,1])))),slots:["header","primaryContent","secondaryContent","footer"],parentSlots:["header","footer"]},LandingDoubleClasic:{id:"LandingDoubleClasic",component:o.lazy((()=>me((()=>import("./LandingDoubleClasic-A0yw7b2r.js")),__vite__mapDeps([5,1,2])))),slots:["header","primaryContent","secondaryContent","tertiaryContent","footer"],parentSlots:["header","footer"]}},ue={},pe=e=>!e||e.endsWith(".")?()=>{}:(ue[e]||(ue[e]=t=>{try{return e.split(".").reduce(((e,t)=>e?e[t]:void 0),t)}catch{return}}),ue[e]),he=l(((e,t)=>({pageData:{},initialScope:{},selectedLayoutName:Object.keys(be)[0],setSelectedLayoutName:t=>{e((e=>({selectedLayoutName:t,pageData:{...e.pageData,layout:t}})))},updateField:(a,s)=>{const l={...t().pageData},o=((e,t,a)=>t.reduceRight(((a,s,l)=>{if(isNaN(Number(s)))return{...pe(t.slice(0,l).join("."))(e),[s]:a};const o=pe(t.slice(0,l).join("."))(e)||[];return o[Number(s)]=a,o}),a))(l,a.split("."),s);e({pageData:{...l,...o}})},getFieldValue:e=>pe(e)(t().pageData)??"",resetPage:()=>e({pageData:{}})}))),ge={"base-100":"bg-base-100","base-200":"bg-base-200","base-300":"bg-base-300",primary:"bg-primary",secondary:"bg-secondary",outerLights:"bg-[radial-gradient(60%_40%_at_40%_0%,oklch(var(--s)/0.1)_0%,oklch(var(--s)/0.15)_5%,oklch(var(--b1)/0.8)_100%)]"},fe={type:"string",label:"Background",enum:["","base-100","base-200","base-300","primary","secondary","outerLights"]},xe={id:"query",filename:"ActionBlock",jsonSchema:{title:"Initial actions block",description:"Schemat definiujący blok akcji, które będą wykonywane sekwencyjnie.",properties:{actions:{label:"Akcje (lista)",type:"array",title:"Available actions",items:{type:"object",properties:{scope:{type:"string",enum:["workspaces","documents"],title:"Scope",default:"workspaces"},action:{type:"string",enum:["","AlertAction","InsertAction","UpdateAction","DeleteAction","SignInAction","FetchItemsAction","FilterScopeByIdAction"],default:"",title:"Action"}}},description:"Lista akcji do wykonania. Każda akcja zawiera zakres (scope) oraz identyfikator akcji (action)."},reloadOnParamsChange:{type:"boolean",default:!1,description:"Określa, czy blok akcji ma się przeładować, gdy zmienią się parametry URL."}},required:["actions"]},icon:r,group:"data",data:{}},ke=Object.freeze(Object.defineProperty({__proto__:null,ActionBlockSchema:xe,default:xe},Symbol.toStringTag,{value:"Module"})),je={id:"279e0f10-79ce-427a-91a2-81b2e54fb38a",filename:"HeadingText",jsonSchema:{title:"Heading text block",description:"Schemat definiujący blok nagłówka tekstowego, który wyświetla tytuł z opcjonalnymi klasami CSS.",properties:{text:{type:"string",label:"Header Text",description:"Tekst, który będzie wyświetlany jako nagłówek."},className:{type:"string",label:"CSS Class",description:"Opcjonalna klasa CSS do zastosowania dla elementu nagłówka w celu dostosowania stylów. [py-md text-4xl pb-md text-center font-bold]"}},required:["text"]},icon:n,group:"content",data:{text:"Default Header",className:""}},ye=Object.freeze(Object.defineProperty({__proto__:null,HeadingTextSchema:je,default:je},Symbol.toStringTag,{value:"Module"})),Se={id:"xad8f7d6-2302-4772-ac5f-8a792b000c8d",filename:"HorizontalHero",jsonSchema:{title:"Horizontal Hero",properties:{prefix:{type:"string",label:"Prefix text"},title:{type:"string",label:"Header Text"},text:{type:"string",label:"Content Text"},className:{type:"string",label:"CSS Class"},background:fe}},icon:c,group:"content",data:{text:"Default Header",className:"header-class"}},_e=Object.freeze(Object.defineProperty({__proto__:null,HorizontalHeroSchema:Se,default:Se},Symbol.toStringTag,{value:"Module"})),ve={id:"d1e9bb07-0b85-4860-bf19-0ec647c6f8b7",filename:"Image",jsonSchema:{title:"Image Block",properties:{url:{type:"string",label:"Image URL"},className:{type:"string",label:"CSS Class"}}},icon:i,group:"content",data:{url:"https://via.placeholder.com/150",className:"image-class"}},Ne=Object.freeze(Object.defineProperty({__proto__:null,ImageSchema:ve,default:ve},Symbol.toStringTag,{value:"Module"})),we={id:"xad8f7d6-2302-4772-ac5f-8a792b000c8d",filename:"InfoColumns",jsonSchema:{title:"Info Columns",properties:{text:{type:"string",label:"Header Text"},className:{type:"string",label:"CSS Class"}}},icon:d,group:"collection",data:{text:"Default Header",className:"header-class"}},Ce=Object.freeze(Object.defineProperty({__proto__:null,InfoColumnsSchema:we,default:we},Symbol.toStringTag,{value:"Module"})),Ee={id:"8d6a0d21-e548-4f0c-bb8a-4ae456479b68",filename:"InputBlock",jsonSchema:{title:"Input Block",properties:{label:{type:"string",label:"Input Label"},fieldName:{type:"string",label:"Field Name"},className:{type:"string",label:"CSS Class"}}},icon:m,group:"data",data:{label:"Input Label",fieldName:"inputField",className:"input-class"}},Te=Object.freeze(Object.defineProperty({__proto__:null,InputBlockSchema:Ee,default:Ee},Symbol.toStringTag,{value:"Module"})),Le={filename:"Leed",jsonSchema:{title:"Leed Block",type:"object",properties:{title:{type:"string",label:"Header text"},text:{type:"string",label:"Paragraph text"},className:{type:"string",label:"CSS Class"},background:fe},required:["title","text"]},icon:b,group:"content",data:{title:"Default Header",text:"Default paragraph text",className:"header-class",background:""}},Pe=Object.freeze(Object.defineProperty({__proto__:null,LeedSchema:Le,default:Le},Symbol.toStringTag,{value:"Module"})),De={id:"bc0d1b89-f8b0-48b9-8978-1f7ed1c5e5c9",filename:"Link",jsonSchema:{title:"Link Block",properties:{name:{type:"string",label:"Link Text"},to:{type:"string",label:"Link URL"},className:{type:"string",label:"CSS Class"}}},icon:u,group:"content",data:{name:"Link",to:"/",className:"link-class"}},Oe=Object.freeze(Object.defineProperty({__proto__:null,LinkSchema:De,default:De},Symbol.toStringTag,{value:"Module"})),Be={id:"b8a6f7a8-7f84-4cbe-b8e6-245a72b9cfa6",filename:"ListBlock",jsonSchema:{title:"List Block",properties:{path:{type:"string",label:"Path to Data"},repeater:{type:"array",label:"Repeater Fields",items:{type:"object",properties:{label:{type:"string",label:"Label for Data Field"},key:{type:"string",label:"Key for Data Field"}}}},className:{type:"string",label:"CSS Class"}}},icon:p,group:"collection",data:{path:"data.items",repeater:[{label:"Name",key:"name"},{label:"Description",key:"description"}],className:"list-component-class"}},Ie=Object.freeze(Object.defineProperty({__proto__:null,ListBlockSchema:Be,default:Be},Symbol.toStringTag,{value:"Module"})),Ae={id:"b8a6f7a8-7f84-4cbe-b8e6-245a72b9cfa6",filename:"ListTableBlock",jsonSchema:{title:"ListTable",properties:{path:{type:"string",label:"Path to Data"},repeater:{type:"array",label:"Repeater Fields",items:{type:"object",properties:{label:{type:"string",label:"Label for Data Field"},key:{type:"string",label:"Key for Data Field"}}}},url:{type:"string",label:"Row url"},actions:{type:"array",label:"Actions",items:{type:"object",properties:{icon:{type:"string",label:"Icon name",enum:["","trash","edit","file"]},url:{type:"string",label:"Action url"}}}},className:{type:"string",label:"CSS Class"}}},icon:h,group:"collection",data:{path:"data.items",repeater:[{label:"Name",key:"name"},{label:"Description",key:"description"}],className:"list-component-class"}},Fe=Object.freeze(Object.defineProperty({__proto__:null,ListTableBlockSchema:Ae,default:Ae},Symbol.toStringTag,{value:"Module"})),Re={id:"9c8fd44a-b4d2-4b6d-a9ab-d8ac6d52d44c",filename:"Logo",jsonSchema:{title:"Logo Block",properties:{className:{type:"string",label:"CSS Class"}}},icon:g,group:"content",data:{className:"logo-class"}},Me=Object.freeze(Object.defineProperty({__proto__:null,LogoSchema:Re,default:Re},Symbol.toStringTag,{value:"Module"})),$e={id:"3b6883c2-4cd2-40f0-8bb9-63223362bf9e",filename:"Paragraph",jsonSchema:{title:"Paragraph Block",properties:{text:{type:"string",label:"Paragraph Text"},className:{type:"string",label:"CSS Class"}}},icon:f,group:"content",data:{text:"Default paragraph text.",className:"paragraph-class"}},ze=Object.freeze(Object.defineProperty({__proto__:null,ParagraphSchema:$e,default:$e},Symbol.toStringTag,{value:"Module"})),Ue={id:"unique-select-block-id",filename:"SelectBlock",jsonSchema:{title:"Select Block",properties:{label:{type:"string",label:"Select Label"},fieldName:{type:"string",label:"Field Name"},options:{type:"array",label:"Options",items:{type:"object",properties:{label:{type:"string",label:"Option Label"},value:{type:"string",label:"Option Value"}}}},className:{type:"string",label:"CSS Class"}}},icon:x,group:"data",data:{label:"Select an Option",fieldName:"selectField",options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"},{label:"Option 3",value:"option3"}],className:"select-class"}},He=Object.freeze(Object.defineProperty({__proto__:null,SelectBlockSchema:Ue,default:Ue},Symbol.toStringTag,{value:"Module"})),Ve={id:"6744c21b-5194-4a58-833a-341d8b0ab31f",filename:"SubmitForm",jsonSchema:{title:"Submit Form",properties:{className:{type:"string",label:"CSS Class"},endpoint:{type:"string",label:"API Endpoint"},method:{type:"string",enum:["GET","POST","PUT","DELETE"],label:"HTTP Method"}}},icon:k,group:"data",data:{className:"submit-button-class"}},qe=Object.freeze(Object.defineProperty({__proto__:null,SubmitFormSchema:Ve,default:Ve},Symbol.toStringTag,{value:"Module"})),We={id:"xad8f7ds-2302-4772-ac5f-8a792b000c8d",filename:"WorkspacesHero",jsonSchema:{title:"Workspaces Hero",properties:{text:{type:"string",label:"Header Text"},className:{type:"string",label:"CSS Class"}}},icon:b,group:"content",data:{text:"Default Header",className:"header-class"}},Ke=Object.freeze(Object.defineProperty({__proto__:null,WorkspacesHeroSchema:We,default:We},Symbol.toStringTag,{value:"Module"})),Je=()=>null,Ge=e=>{const{schema:a,id:s,options:l,value:o,type:r,placeholder:n,required:c,disabled:i,readonly:d,autofocus:m,formContext:b,hideError:u,hideLabel:p,uiSchema:h,rawErrors:g,onChange:f,onChangeOverride:x,...k}=e,y={...k,...j(a,r,l)};return t.jsx("input",{id:s,className:"w-full input input-bordered my-sm",autoFocus:m,value:o,onChange:x||(({target:{value:e}})=>{f(""===e?l.emptyValue||"":e)}),type:r,placeholder:n,disabled:i,readOnly:d,required:c,...y})},Qe=e=>{const{id:a,options:s,value:l,required:o,disabled:r,readonly:n,autofocus:c,placeholder:i,onChange:d,onBlur:m,onFocus:b,rawErrors:u=[]}=e;return t.jsxs("div",{className:"my-select-wrapper",children:[t.jsxs("select",{id:a,className:"select select-bordered w-full my-sm",value:l||"",required:o,disabled:r||n,autoFocus:c,onChange:e=>{const{value:t}=e.target;d(""===t?s.emptyValue:t)},onBlur:m&&(e=>m(a,e.target.value)),onFocus:b&&(e=>b(a,e.target.value)),children:[i&&t.jsx("option",{value:"",children:i}),(s.enumOptions||[]).map((({value:e,label:a},s)=>t.jsx("option",{value:e,children:a},s)))]}),u.length>0&&t.jsx("div",{className:"text-red-600 text-sm mt-2",children:u.join(", ")})]})};function Ze(e){const{canAdd:a,items:s,onAddClick:l}=e;return t.jsxs("div",{className:"mb-sm",children:[s.map(((e,a)=>t.jsxs("div",{className:"array-item",children:[t.jsx("div",{className:"border-l-8 pl-1 border-base-content border-opacity-70 -ml-sm",children:e.children}),t.jsxs("div",{className:"flex justify-end gap-1 mb-sm",children:[e.hasMoveUp&&t.jsx("button",{type:"button","aria-label":"Move up",className:"btn btn-sm btn-outline",onClick:e.onReorderClick(e.index,e.index-1),children:"Move Up"}),e.hasMoveDown&&t.jsx("button",{"aria-label":"Move Down",type:"button",className:"btn btn-sm btn-outline",onClick:e.onReorderClick(e.index,e.index+1),children:"Move Down"}),e.hasRemove&&t.jsx("button",{"aria-label":"Remove",type:"button",className:"btn btn-sm btn-danger",onClick:e.onDropIndexClick(e.index),children:"Remove"})]})]},a))),a&&t.jsx("button",{"aria-label":"Add item",type:"button",className:"btn btn-primary btn-sm w-full mt-sm no-animation",onClick:l,children:"Add Item"})]})}function Xe(e){const{children:a,className:s}=e;return t.jsxs("div",{className:s,children:["#####",a,"####"]})}function Ye(e){const{description:a,id:s}=e;return t.jsx("div",{id:s,className:"text-xs text-neutral pt-1",children:a})}function et(e){const{id:a,help:s,required:l,description:o,errors:r,children:n,schema:c}=e;return t.jsxs("div",{className:`${2===a.split("_").length&&"border-b px-sm mb-sm"}  border-base-300`,children:[c.label&&c.type&&t.jsxs("label",{htmlFor:a,className:`block form-label ${2===a.split("_").length?"text-xl font-normal text-base-content text-opacity-70":"-mt-sm"}  pt-sm`,children:[c.label,l&&t.jsx("span",{className:"text-danger",children:"*"})]}),o&&t.jsx(t.Fragment,{children:o}),t.jsx(t.Fragment,{children:n}),r&&t.jsx("div",{className:"form-errors text-danger",children:r}),s&&t.jsx("div",{className:"form-help text-muted",children:s})]})}const tt=({label:e,fieldName:a,options:s=[]})=>{const l=he((e=>e.updateField)),o=he((e=>e.getFieldValue(a)))||"";return t.jsxs("div",{children:[t.jsx("label",{className:"block pb-sm ",children:e}),t.jsx("select",{className:"select select-bordered w-full mb-2",value:o,onChange:e=>{l(a,e.target.value)},children:s.map((e=>t.jsx("option",{value:e.value,children:e.label},e.value)))})]})},at=Object.freeze(Object.defineProperty({__proto__:null,SelectBlock:tt,default:tt},Symbol.toStringTag,{value:"Module"})),st=({label:e})=>{he((e=>({layout:e.pageData.layout})));const a=Object.keys(be).map((e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e})));return t.jsx("div",{className:"p-md border-b border-base-300",children:t.jsx(tt,{label:e,fieldName:"layout",options:a})})},lt={users:"user",workspaces:"workspace",documents:"document",categories:"category",documentCategories:"documentCategory",files:"file",courseLevels:"courseLevel",courseObjectives:"courseObjective",courseTitles:"courseTitle",unitTitles:"unitTitle",subjects:"subject",lessonStrategies:"lessonStrategy",pools:"pool"},ot=()=>{const e=(()=>{const e="auth_token=",t=decodeURIComponent(document.cookie).split(";");for(const a of t){const t=a.trim();if(t.startsWith(e))return t.substring(11)}return null})();return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},rt=async(e,t)=>{if(!e.ok){const t=await e.json();throw new Error(JSON.stringify(t))}return e.json()},nt=async(e,t,a,s,l)=>{const o=`http://localhost:3004/${e}?${new URLSearchParams}`,r=await fetch(o);return rt(r)},ct=async(e,t)=>{const a=`http://localhost:3004/${e}/slug/${t}`,s=await fetch(a);return rt(s)},it=async(e,t)=>{const a=lt[e]||"",s=await fetch(`http://localhost:3004/${a}`,{method:"POST",headers:ot(),body:JSON.stringify(t)});return rt(s)},dt=async(e,t,a)=>{const s=await fetch(`http://localhost:3004/${e}/${t}`,{method:"PUT",headers:ot(),body:JSON.stringify(a)});return rt(s)},mt=async(e,t)=>{const a=await fetch(`http://localhost:3004/${e}/${t}`,{method:"DELETE",headers:ot()});return rt(a)},bt=({model:e,setSelectedItem:t,setErrorMessage:a})=>{const s=y(),l=()=>{s.invalidateQueries({queryKey:[e]}),t(null),a(null)},o=e=>{e instanceof Error?a(e.message):a("An unexpected error occurred.")},r=S({mutationFn:t=>it(e||"",t),onSuccess:l,onError:o}),n=S({mutationFn:({id:t,item:a})=>dt(e||"",t,a),onSuccess:l,onError:o}),c=S({mutationFn:({model:e,slug:t,slot:a,content:s})=>(async(e,t,a,s)=>{const l=`http://localhost:3004/${e}/slug/${t}/content`,o=await fetch(l,{method:"PUT",headers:ot(),body:JSON.stringify({key:a,value:s})});return rt(o)})(e,t,a,s),onSuccess:l,onError:o});return{createMutation:r,updateMutation:n,deleteMutation:S({mutationFn:t=>mt(e||"",t),onSuccess:l,onError:o}),updateContentMutation:c}},ut=l(((e,t)=>({userData:{},relationsData:{},mainMessage:{message:"",type:"info"},globalScope:()=>{const{userData:e,relationsData:a,mainMessage:s}=t();return{userData:e||{},relationsData:a||{},mainMessage:s||{}}},setUserData:t=>e({userData:t}),setMainMessage:(t,a)=>e({mainMessage:{message:t,type:a}})}))),pt=()=>{const e=_(),[t,a]=v(),l=e=>{const s=new URLSearchParams(t);e(s),a(s,{replace:!0})},o=e=>t.get(e),r=(e,t)=>{l((a=>{a.set(e,t)}))},n=e=>{const t=new URLSearchParams(e);l((e=>{t.forEach(((t,a)=>{e.set(a,t)}))}))},c=e=>{l((t=>{t.delete(e)}))},i=t=>{e(t)},d=()=>{const e=[];return t.forEach((t=>e.push(t))),e.join(",")};return s.useMemo((()=>({getUSParam:o,setUSParam:r,upSParams:n,removeUSParam:c,navigateTo:i,getAll:d})),[t,e])},ht=(e,t)=>e.replace(/{(\w+)}/g,((e,a)=>t[a]||`{${a}}`)),gt=()=>{const{getUSParam:e}=pt(),{layout:a}=he((e=>({layout:e.pageData.layout}))),{selectedSlot:l,slots:o}=ie((e=>({selectedSlot:e.selectedSlot,slots:e.slots}))),{workspace:r,slug:n}=N(),[c,i]=s.useState(null),{updateContentMutation:d}=bt({model:"content",setSelectedItem:()=>{},setErrorMessage:i}),m=ut((e=>e.setMainMessage)),b=e("rightbar");return t.jsxs("div",{className:"p-md border-t border-base-300",children:[b?t.jsx("div",{className:"text-center",children:"SLOT"}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-semibold",children:"Selected Slot: "}),t.jsx("span",{children:l||"No slot selected"})]}),c&&t.jsx("div",{className:"bg-error"}),l&&t.jsxs("button",{"aria-label":"Save",onClick:()=>{if(l){const e=be[a].parentSlots.includes(l),t=e?r:n;if(!t)return i("Slug is undefined. Cannot save content."),void m("Slug is undefined. Cannot save content.","error");d.mutate({model:e?"workspace":"document",slug:t,slot:l,content:o[l]},{onSuccess:()=>{m("Content saved successfully!","success")},onError:e=>{m(`Failed to save content: ${e.message}`,"error")}})}else m("No slot selected to save.","error")},className:"btn btn-md btn-outline w-full no-animation font-light mt-sm",children:[t.jsx(w,{})," ",!b&&t.jsx("span",{children:"Save selected slot data"})]})]})},ft=Object.assign({"../../blocks/ActionBlockSchema.ts":()=>me((()=>Promise.resolve().then((()=>ke))),void 0),"../../blocks/HeadingTextSchema.ts":()=>me((()=>Promise.resolve().then((()=>ye))),void 0),"../../blocks/HorizontalHeroSchema.ts":()=>me((()=>Promise.resolve().then((()=>_e))),void 0),"../../blocks/ImageSchema.ts":()=>me((()=>Promise.resolve().then((()=>Ne))),void 0),"../../blocks/InfoColumnsSchema.ts":()=>me((()=>Promise.resolve().then((()=>Ce))),void 0),"../../blocks/InputBlockSchema.ts":()=>me((()=>Promise.resolve().then((()=>Te))),void 0),"../../blocks/LeedSchema.ts":()=>me((()=>Promise.resolve().then((()=>Pe))),void 0),"../../blocks/LinkSchema.ts":()=>me((()=>Promise.resolve().then((()=>Oe))),void 0),"../../blocks/ListBlockSchema.ts":()=>me((()=>Promise.resolve().then((()=>Ie))),void 0),"../../blocks/ListTableBlockSchema.ts":()=>me((()=>Promise.resolve().then((()=>Fe))),void 0),"../../blocks/LogoSchema.ts":()=>me((()=>Promise.resolve().then((()=>Me))),void 0),"../../blocks/ParagraphSchema.ts":()=>me((()=>Promise.resolve().then((()=>ze))),void 0),"../../blocks/SelectBlockSchema.ts":()=>me((()=>Promise.resolve().then((()=>He))),void 0),"../../blocks/SubmitFormSchema.ts":()=>me((()=>Promise.resolve().then((()=>qe))),void 0),"../../blocks/WorkspacesHeroSchema.ts":()=>me((()=>Promise.resolve().then((()=>Ke))),void 0)}),xt=()=>{const{selectedSlot:e,addBlockToSlot:a,setSelectedBlock:l,slots:r,selectedBlock:n}=ie((e=>({selectedSlot:e.selectedSlot,addBlockToSlot:e.addBlockToSlot,setSelectedBlock:e.setSelectedBlock,slots:e.slots,selectedBlock:e.selectedBlock}))),[c,i]=s.useState("content"),[d,m]=s.useState({}),{getUSParam:b}=pt(),u=b("rightbar");s.useEffect((()=>{(async()=>{const e={};for(const a in ft){const s=(await ft[a]()).default;s.icon=s.icon||t.jsx(t.Fragment,{});const l=s.group||"others";e[l]||(e[l]=[]),e[l].push(s)}m(e)})()}),[]);const p=(()=>{if(!n)return null;for(const[e,t]of Object.entries(d))if(t.some((e=>e.filename===n.filename)))return e;return null})();return t.jsxs("div",{className:(u?"w-20":"w-80")+" bg-base-200 h-full flex flex-col",children:[t.jsxs("div",{className:`flex items-center gap-sm ${u?"justify-center":""} px-md py-sm border-b border-base-300`,children:[t.jsx(C,{strokeWidth:.5,className:"w-8 h-8"}),!u&&t.jsx(E,{to:"/",children:t.jsx("h1",{className:"text-xl font-black text-accent m-0.5",children:"BlockBox EDITOR"})})]}),!u&&t.jsx(st,{label:"Choose layout:"}),!u&&t.jsx("div",{className:"border-b border-base-300",children:t.jsx("label",{className:"block p-md",children:"Choose block:"})}),t.jsx("div",{className:"tabs tabs-bordered bg-base-300",children:Object.keys(d).map((e=>{const a=c===e;let s="tab";return a?s+=" tab-active bg-base-100":e===p&&!a&&(s+=" tab-selected-block-group bg-primary"),u&&(s+=" px-px"),t.jsx("button",{"aria-label":"Tab",className:s,onClick:()=>i(e),children:u?e.charAt(0):e.charAt(0).toUpperCase()+e.slice(1)},e)}))}),t.jsx("div",{className:"border-b border-base-300",children:t.jsx("div",{className:`grid ${u?"p-md":"p-sm py-md"} ${u?"grid-cols-1":"grid-cols-2"} gap-sm`,children:d[c]?.map(((s,r)=>{const i=n?.filename===s.filename;return t.jsxs("button",{"aria-label":"Add Block",className:"btn btn-md w-full no-animation font-light px-3 flex items-center gap-xs "+(i?"btn-primary":"btn-outline"),onClick:()=>(t=>{if(!e)return void alert("Please select a slot first.");const s=d[c]?.find((e=>e.filename===t));if(!s)return;const o={id:T(),filename:t,data:s.data||{}};a(e,o),l(o)})(s.filename),children:[t.jsx("div",{className:"text-lg",children:s.icon&&"function"==typeof s.icon&&o.createElement(s.icon)}),!u&&t.jsx("div",{className:"text-sm text-left flex-1",children:s.jsonSchema.title})]},r)}))})}),t.jsx("div",{className:"flex-1"}),t.jsx(gt,{})]})},kt=({callback:e,label:a})=>{const s=_();return t.jsxs("div",{className:"sticky top-0 flex bg-base-100 items-center justify-between border-b border-base-300 px-md py-sm",children:[t.jsx("button",{className:"btn btn-circle btn-outline btn-xs",onClick:()=>{e();const t=new URLSearchParams(window.location.search);t.delete("rightbar"),s({pathname:window.location.pathname,search:t.toString()})},"aria-label":"Zamknij",children:t.jsx(L,{})}),t.jsx("h3",{className:"text-2xl font-extrabold drop-shadow-sm text-accent",children:a})]})},jt=({label:e,value:a,isRequired:l,isReadOnly:o=!1,onChange:r})=>{const[n,c]=s.useState(null),i=JSON.stringify(a,null,2);return t.jsxs("div",{className:"json-editor",children:[t.jsxs("label",{className:"block p-md",children:[e," ",l&&t.jsx("span",{children:"*"})]}),t.jsx(P,{height:"calc(100vh - 280px)",language:"json",value:i,onChange:e=>{if(!o&&void 0!==e)try{const t=JSON.parse(e);c(null),r(t)}catch(t){c("Niepoprawna składnia JSON")}},theme:"vs-dark",options:{readOnly:o,minimap:{enabled:!1},lineNumbers:"on"}}),n&&t.jsx("p",{className:"alert alert-error rounded-none",children:n})]})},yt=()=>{const e=_(),a=D(),{workspace:s,slug:l,action:o}=N(),r=a.pathname.endsWith(`/${s}/${l}/`);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"tooltip tooltip-bottom tooltip-accent","data-tip":"[Tab] Preview",children:t.jsx("button",{"aria-label":"Tab",className:"btn btn-sm btn-square "+(r?"btn-active":""),onClick:()=>e(`/${s}/${l}/`),children:t.jsx(O,{})})}),t.jsx("div",{className:"tooltip tooltip-bottom tooltip-accent","data-tip":"[Tab] Document edit",children:t.jsx("button",{"aria-label":"Tab",className:"btn btn-sm btn-square "+("edit-document"===o?"btn-active":""),onClick:()=>e(`/${s}/${l}/edit-document/`),children:t.jsx(B,{})})}),t.jsx("button",{"aria-label":"Tab",className:"btn btn-sm btn-square "+("edit-side"===o?"btn-active":""),onClick:()=>e(`/${s}/${l}/edit-side/`),children:t.jsx(I,{})}),t.jsx("button",{"aria-label":"Tab",className:"btn btn-sm btn-square "+("edit-workspace"===o?"btn-active":""),onClick:()=>e(`/${s}/${l}/edit-workspace/`),children:t.jsx(A,{})}),t.jsx("button",{"aria-label":"Tab",className:"btn btn-sm btn-square "+("edit-modal"===o?"btn-active":""),onClick:()=>e(`/${s}/${l}/edit-modal/`),children:t.jsx(F,{})}),t.jsx("button",{"aria-label":"Tab",className:"btn btn-sm btn-square "+("edit-scope"===o?"btn-active":""),onClick:()=>e(`/${s}/${l}/edit-scope/`),children:t.jsx(R,{})})]})},St=()=>{const[e,a]=s.useState("initialScope"),[l,o]=s.useState({}),[r,n]=s.useState(null),c=he((e=>e.initialScope)),i=he((e=>e.pageData)),d=ie((e=>e.slots)),m=ut((e=>e.globalScope())),b=ut((e=>e.setMainMessage)),{workspace:u}=N(),{updateContentMutation:p}=bt({model:"content",setSelectedItem:()=>{},setErrorMessage:n});let h=null,g=!1;"initialScope"===e?h=c:"actualScope"===e?(h=i,g=!0):"slotsPreview"===e?h=d:"globalScope"===e&&(h=m,g=!0),s.useEffect((()=>{o(h||{})}),[h]);return t.jsxs("div",{className:"w-full sticky top-16",children:[t.jsxs("div",{className:"tabs tabs-lifted border-b border-base-200 mt-sm",children:[t.jsx("button",{"aria-label":"Tab",className:"tab "+("initialScope"===e?"tab-active":""),onClick:()=>a("initialScope"),children:"Initial Scope"}),t.jsx("button",{"aria-label":"Tab",className:"tab "+("actualScope"===e?"tab-active":""),onClick:()=>a("actualScope"),children:"Actual Scope"}),t.jsx("button",{"aria-label":"Tab",className:"tab "+("slotsPreview"===e?"tab-active":""),onClick:()=>a("slotsPreview"),children:"Slots Preview"}),t.jsx("button",{"aria-label":"Tab",className:"tab "+("globalScope"===e?"tab-active":""),onClick:()=>a("globalScope"),children:"Global Scope"})]}),t.jsx(jt,{id:"json-block-id",label:"initialScope"===e?"Page scope range":"actualScope"===e?"Actual page scope":"slotsPreview"===e?"Slots Preview":"Global Scope",value:l,isRequired:!0,isReadOnly:g,onChange:e=>{o(e)}}),r&&t.jsx("div",{className:"bg-error text-white p-2 my-2 rounded",children:r}),"initialScope"===e&&t.jsx("div",{className:"p-sm",children:t.jsxs("button",{onClick:()=>{const e=u;if(!e)return n("Workspace is undefined. Cannot save content."),void b("Workspace is undefined. Cannot save content.","error");p.mutate({model:"workspace",slug:e,slot:"_pageData",content:l},{onSuccess:()=>{b("Initial scope saved successfully!","success"),n(null)},onError:e=>{const t=e?.message||"An error occurred.";n(t),b(`Failed to save initial scope: ${t}`,"error")}})},className:"btn btn-success btn-outline w-full",children:[t.jsx(w,{})," Update initial scope"]})})]})},_t=s.createContext({theme:"default",updateTheme:e=>{}}),vt=({children:e})=>{const[a,l]=s.useState((()=>localStorage.getItem("theme")||"default")),o=s.useCallback((e=>{l(e),localStorage.setItem("theme",e),r(e)}),[]),r=e=>{const t=document.querySelector('meta[name="theme-color"]');t&&("dark"===e?t.setAttribute("content","#000000"):t.setAttribute("content","#FFFFFF"))};return s.useEffect((()=>{r(a)}),[a]),t.jsx(_t.Provider,{value:{theme:a,updateTheme:o},children:e})},Nt=({theme:e,handleThemeChange:a})=>t.jsx("div",{className:"join join-vertical w-full",children:["default","light","dark","cupcake","aqua","retro","cyberpunk","pastel","nord"].map((s=>t.jsx("input",{type:"radio",name:"theme-buttons",className:"btn theme-controller join-item btn-sm font-thin","aria-label":s.charAt(0).toUpperCase()+s.slice(1),value:s,checked:e===s,onChange:a},s)))}),wt=e=>{switch(e){case"success":return"bg-success";case"error":return"bg-error";case"info":return"bg-info";default:return"gb-base-300"}},Ct=e=>{switch(e){case"success":return"text-success";case"error":return"text-error";case"info":return"text-info";default:return"text-neutral"}},Et=e=>{switch(e){case"trash":return U;case"edit":return z;case"file":return $;default:return M}},Tt=()=>{const{theme:e,updateTheme:a}=s.useContext(_t),{mainMessage:l}=ut((e=>({mainMessage:e.mainMessage}))),{setUSParam:o}=pt(),r=N().action,n=e=>{o("rightbar",e)};return t.jsxs("div",{className:`\n        ${"edit-document"===r?"bg-neutral":"bg-base-300"}\n        sticky top-0 p-sm px-md  text-xs z-20 flex gap-0.5 w-full \n        border-b border-base-300 shadow-lg`,children:[t.jsxs("div",{className:"dropdown",children:[t.jsx("button",{"aria-label":"Theme",role:"button",className:"btn btn-sm btn-square",children:t.jsx(H,{})}),t.jsx("div",{className:"dropdown-content z-[1] w-52 pb-2",children:t.jsx(Nt,{theme:e,handleThemeChange:e=>{a(e.target.value)}})})]}),t.jsx(yt,{}),l.message&&t.jsx("div",{className:`${Ct(l.type)} toast toast-center -top-2.5 toast-top animate-init-pulse text-xs`,children:t.jsxs("div",{className:"flex px-sm items-center py-sm p-md justify-center gap-sm bg-info-content rounded",children:["error"===l.type&&t.jsx(V,{className:"text-base"}),"success"===l.type&&t.jsx(q,{}),l.message]})}),t.jsx("div",{className:"flex-1"}),t.jsx("button",{className:"btn btn-sm btn-square",onClick:()=>n("workspaces"),"aria-label":"Workspaces",children:t.jsx(W,{})}),t.jsx("button",{className:"btn btn-sm btn-square",onClick:()=>n("user"),"aria-label":"Użytkownik",children:t.jsx(K,{})})]})},Lt=o.lazy((()=>me((()=>import("./vendor-BORITBlt.js").then((e=>e.aa))),[]))),Pt=Object.assign({"../../blocks/ActionBlockSchema.ts":ke,"../../blocks/HeadingTextSchema.ts":ye,"../../blocks/HorizontalHeroSchema.ts":_e,"../../blocks/ImageSchema.ts":Ne,"../../blocks/InfoColumnsSchema.ts":Ce,"../../blocks/InputBlockSchema.ts":Te,"../../blocks/LeedSchema.ts":Pe,"../../blocks/LinkSchema.ts":Oe,"../../blocks/ListBlockSchema.ts":Ie,"../../blocks/ListTableBlockSchema.ts":Fe,"../../blocks/LogoSchema.ts":Me,"../../blocks/ParagraphSchema.ts":ze,"../../blocks/SelectBlockSchema.ts":He,"../../blocks/SubmitFormSchema.ts":qe,"../../blocks/WorkspacesHeroSchema.ts":Ke}),Dt=()=>{const{selectedBlock:e,selectedSlot:a,setBlockData:l,removeBlock:o,moveBlock:r,deselectBlock:n}=ie(),[c,i]=s.useState(null),[d,m]=s.useState(null);s.useEffect((()=>{if(e){const t=`../../blocks/${e.filename}Schema.ts`,a=Pt[t]?.default;i(a?a.jsonSchema:null)}me((()=>import("./vendor-BORITBlt.js").then((e=>e.ab))),[]).then((e=>{m((()=>e.default))}))}),[e]);const b={SelectWidget:Qe};return e?c?t.jsxs(t.Fragment,{children:[t.jsx(kt,{label:e.filename,callback:()=>{n()}}),t.jsx(s.Suspense,{fallback:t.jsx("div",{children:"Loading form..."}),children:d&&t.jsx(Lt,{schema:c,validator:d,formData:e.data,onChange:t=>{e&&l(e.id,t.formData)},uiSchema:{"ui:submitButtonOptions":{norender:!0}},templates:{BaseInputTemplate:Ge,TitleFieldTemplate:Je,ArrayFieldTemplate:Ze,ArrayFieldItemTemplate:Xe,DescriptionFieldTemplate:Ye,FieldTemplate:et},widgets:b})}),t.jsxs("div",{className:"flex gap-2 p-md border-b border-base-300",children:[t.jsxs("button",{"aria-label":"Move Up",className:"btn btn-outline btn-sm",onClick:()=>a&&r(e.id,a,"up"),children:[t.jsx(J,{})," Move Up"]}),t.jsxs("button",{"aria-label":"Move Down",className:"btn btn-outline btn-sm",onClick:()=>a&&r(e.id,a,"down"),children:[t.jsx(G,{})," Move Down"]}),t.jsxs("button",{"aria-label":"Delete Block",className:"btn btn-outline btn-sm text-red-600",onClick:()=>a&&o(e.id,a),children:[t.jsx(Q,{})," Delete Block"]})]})]}):t.jsx("div",{className:"p-4",children:"Loading block schema..."}):t.jsx("div",{className:"p-4",children:"No block selected"})},Ot=({children:e})=>t.jsx("div",{className:"fixed right-0 top-0 w-1/3 h-full bg-base-100 z-50 border-l border-base-300 overflow-y-auto",children:e}),Bt={},It=({block:e})=>{const a=ie((e=>e.isEditing));let l=Bt[e.filename];return l||(l=o.lazy((()=>((e,t,a)=>{const s=e[t];return s?"function"==typeof s?s():Promise.resolve(s):new Promise(((e,s)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))}))})(Object.assign({"../blocks/ActionBlock.tsx":()=>me((()=>import("./ActionBlock-D4GVTLGc.js").then((e=>e.b))),__vite__mapDeps([6,1])),"../blocks/HeadingText.tsx":()=>me((()=>import("./HeadingText-Dr7_v3HE.js")),__vite__mapDeps([7,1])),"../blocks/HorizontalHero.tsx":()=>me((()=>import("./HorizontalHero-BOKxtxvi.js")),__vite__mapDeps([8,1])),"../blocks/Image.tsx":()=>me((()=>import("./Image-C5Ei4zn4.js")),__vite__mapDeps([9,1])),"../blocks/InfoColumns.tsx":()=>me((()=>import("./InfoColumns-D3hZBDBm.js")),__vite__mapDeps([10,1])),"../blocks/InputBlock.tsx":()=>me((()=>import("./InputBlock-BOPL_UWv.js")),__vite__mapDeps([11,1])),"../blocks/Leed.tsx":()=>me((()=>import("./Leed-BaMrghUO.js")),__vite__mapDeps([12,1])),"../blocks/Link.tsx":()=>me((()=>import("./Link-CTVXUrzC.js")),__vite__mapDeps([13,1])),"../blocks/ListBlock.tsx":()=>me((()=>import("./ListBlock-CyryqXAc.js")),__vite__mapDeps([14,1])),"../blocks/ListTableBlock.tsx":()=>me((()=>import("./ListTableBlock-D7ESGzeS.js")),__vite__mapDeps([15,1])),"../blocks/Logo.tsx":()=>me((()=>import("./Logo-5T_b-ZIv.js")),__vite__mapDeps([2,1])),"../blocks/Paragraph.tsx":()=>me((()=>import("./Paragraph-7pTMGX4t.js")),__vite__mapDeps([16,1])),"../blocks/SelectBlock.tsx":()=>me((()=>Promise.resolve().then((()=>at))),void 0),"../blocks/SubmitForm.tsx":()=>me((()=>import("./SubmitForm-LoPzb7yD.js")),__vite__mapDeps([17,1,6])),"../blocks/WorkspacesHero.tsx":()=>me((()=>import("./WorkspacesHero-CAsa9KBE.js")),__vite__mapDeps([18,1]))}),`../blocks/${e.filename}.tsx`,3).then((e=>({default:e.default}))).catch((e=>({default:()=>t.jsx("div",{children:"Nie udało się załadować komponentu."})}))))),Bt[e.filename]=l),t.jsx("div",{className:a?"editing-class":"view-class",children:t.jsx(s.Suspense,{fallback:t.jsx("div",{children:"Ładowanie..."}),children:t.jsx(l,{...e.data})})})},At=({slots:e,slotName:a})=>e[a]?t.jsx(t.Fragment,{children:e[a].map((e=>t.jsx("div",{className:"block-wrapper",children:t.jsx(It,{block:e})},e.id)))}):t.jsx(t.Fragment,{}),Ft=({slots:e,slotName:a})=>{const{selectedSlot:s,selectedBlock:l,setSelectedSlot:o,setSelectedBlock:r,isEditing:n}=ie(),c=D(),i=_(),d=()=>{if(n&&s!==a){o(a),r(null);const e=new URLSearchParams(c.search);e.delete("rightbar"),i({pathname:c.pathname,search:e.toString()})}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute w-full h-full border z-10 pointer-events-none "+(s===a?"border-primary":"border-base-300 ")}),t.jsxs("div",{onClick:d,className:"absolute -top-8 h-8 z-10 rounded-t "+(s===a?"bg-primary":"bg-base-300 "),children:[t.jsxs("div",{className:"flex px-md gap-xs items-center h-full text-sm cursor-pointer",children:[t.jsx(X,{className:""+(s===a?"text-neutral":"text-warning")}),t.jsx("span",{className:""+(s===a?"text-neutral":""),children:a})]}),t.jsx("div",{className:"absolute w-full h-full top-0 ",onClick:d})]}),t.jsx("div",{className:"h-px"}),e[a]&&e[a].map((e=>t.jsxs("div",{className:"block-wrapper m-px relative",children:[t.jsx(It,{block:e}),t.jsx("div",{className:"absolute top-px bottom-px left-px right-px w-full h-full border "+(l?.id===e.id?"bg-primary bg-opacity-10 border-secondary":"border-base-300 border-dashed"),onPointerDown:t=>{t.stopPropagation(),(e=>{r(e),o(a);const t=new URLSearchParams(c.search);t.set("rightbar","block"),i({pathname:c.pathname,search:t.toString()})})(e)}})]},e.id)))]})},Rt=()=>t.jsxs(t.Fragment,{children:[t.jsx(kt,{callback:()=>{},label:"Login form"}),t.jsx("form",{className:"flex flex-col gap-sm p-sm",children:t.jsx(At,{slots:{loginForm:[{id:"75f19de7-4bab-4343-99eb-80a81dc38306",filename:"InputBlock",data:{label:"User email",fieldName:"user.email",className:""}},{id:"9b7b7f4d-889c-440d-88ed-bf9f4920c256",filename:"InputBlock",data:{label:"Password",fieldName:"user.password",className:""}},{id:"5b8d9266-a445-425b-aae2-59aa0b181314",filename:"SubmitForm",data:{actions:[{scope:"user",action:"SignInAction"}]}}]},slotName:"loginForm"})})]}),Mt=()=>{const{getUSParam:e,setUSParam:a}=pt(),s=e("rightview")||"table",l=e=>{a("rightview",e)},o={workspaceList:[{id:"e5a47be2-a39b-4dd7-b759-46e628e9eb82",filename:"ListTableBlock",data:{repeater:[{label:"Title",key:"title"},{label:"Slug",key:"slug"}],url:"/dashboard/documents?workspace_id={id}",actions:[{icon:"edit",url:"rightview=edit&rightbar=workspaces&workspace_id={id}"},{icon:"trash",url:"rightview=delete&rightbar=workspaces&workspace_id={id}"}],path:"workspaces.workspaces.items",className:"list-component-class"}}],workspaceNew:[{id:"4bab",filename:"InputBlock",data:{label:"Title",fieldName:"workspace.title",className:""}},{id:"889c",filename:"InputBlock",data:{label:"Content",fieldName:"workspace.content",className:"",default:"default",type:"hidden"}},{id:"a445",filename:"SubmitForm",data:{actions:[{scope:"workspace",action:"InsertAction"}]}}],workspaceUpdate:[{id:"854148c4-6371-4221-8f29-d9d17c662849",data:{reloadOnParamsChange:!0,actions:[{scope:"workspaces.workspaces.items",action:"FilterScopeByIdAction"}]},filename:"ActionBlock"},{id:"4343",filename:"InputBlock",data:{label:"Title",fieldName:"workspace.title",className:""}},{id:"440d",filename:"InputBlock",data:{label:"Slug",fieldName:"workspace.slug",className:"",readonly:"readonly"}},{id:"425b",filename:"SubmitForm",data:{actions:[{scope:"workspace",action:"UpdateAction"}]}}],workspaceDelete:[{id:"854148c4-6371-4221-8f29-d9d17c662849",data:{reloadOnParamsChange:!0,actions:[{scope:"workspaces.workspaces.items",action:"FilterScopeByIdAction"}]},filename:"ActionBlock"},{id:"4343",filename:"InputBlock",data:{label:"Id",fieldName:"workspace.id",className:""}},{id:"440d",filename:"InputBlock",data:{label:"Slug",fieldName:"workspace.slug",className:"",readonly:"readonly"}},{id:"425b",filename:"SubmitForm",data:{actions:[{scope:"workspace",action:"DeleteAction"}]}}]};return t.jsxs(t.Fragment,{children:[t.jsx(kt,{callback:()=>{l("table")},label:"Workspaces"}),t.jsxs("div",{role:"tablist",className:"tabs tabs-bordered tabs-lg",children:[t.jsx("a",{role:"tab",className:"tab "+("table"===s?"tab-active":""),onClick:()=>l("table"),children:"List"}),t.jsx("a",{role:"tab",className:"tab "+("createNew"===s?"tab-active":""),onClick:()=>{l("createNew")},children:"Create new"})]}),"table"===s&&t.jsx(At,{slots:o,slotName:"workspaceList"}),"createNew"===s&&t.jsxs("form",{className:"flex flex-col gap-sm p-sm",children:[t.jsxs("h2",{className:"font-extrabold text-3xl p-md",children:["Create ",t.jsx("br",{}),"new Workspace"]}),t.jsx(At,{slots:o,slotName:"workspaceNew"})]}),"edit"===s&&t.jsxs("form",{className:"flex flex-col gap-sm p-sm",children:[t.jsx("div",{className:"p-md",children:t.jsx("h2",{className:"font-extrabold text-3xl",children:"Edit Workspace:"})}),t.jsx(At,{slots:o,slotName:"workspaceUpdate"})]}),"delete"===s&&t.jsxs("form",{className:"flex flex-col gap-sm p-sm",children:[t.jsx("div",{className:"p-md",children:t.jsx("h2",{className:"font-extrabold text-3xl",children:"Delete Workspace:"})}),t.jsx(At,{slots:o,slotName:"workspaceDelete"})]})]})},$t=({context:e,content:a})=>t.jsxs("div",{className:`${e&&"drawer lg:drawer-open"} font-inter relative bg-base-100 min-h-screen`,children:[e&&t.jsx("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),t.jsxs("div",{className:"drawer-content",children:[a,t.jsx("label",{htmlFor:"my-drawer-2",className:"btn btn-primary drawer-button lg:hidden",children:"Open drawer"})]}),e&&t.jsxs("div",{className:"drawer-side",children:[t.jsx("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),e]})]}),zt=()=>{const{isEditing:e,selectedSlot:t,selectedBlock:a,copiedBlock:l,setCopiedBlock:o,addBlockToSlot:r,removeBlock:n,deselectBlock:c,moveBlock:i}=ie(),d=_(),{workspace:m,slug:b,action:u}=N(),p=s.useCallback((()=>{if(!m||!b)return;d(`/${m}/${b}${"edit-document"===u?"":"/edit-document"}`)}),[d,m,b,u]),h=s.useCallback((()=>{const e=new URLSearchParams(window.location.search);e.set("rightbar","workspaces"),d({pathname:window.location.pathname,search:`?${e.toString()}`},{replace:!0})}),[d]),g=s.useCallback((()=>{a&&o(a)}),[a,o]),f=s.useCallback((()=>{if(t&&l){const e={...l,id:Date.now().toString()};r(t,e)}}),[t,l,r]),x=s.useCallback((()=>{a&&t&&(n(a.id,t),c())}),[a,t,n,c]),k=s.useCallback((e=>{a&&t&&i(a.id,t,e)}),[a,t,i]),j=s.useCallback((()=>{alert("Q")}),[]),y=s.useCallback((t=>{if(e)switch(t.key){case"Tab":t.preventDefault(),p();break;case"e":case"E":t.ctrlKey&&(t.preventDefault(),h());break;case"c":case"C":t.ctrlKey&&(t.preventDefault(),g());break;case"v":case"V":t.ctrlKey&&!(()=>{const e=document.activeElement;return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable})()&&(t.preventDefault(),f());break;case"q":case"Q":t.ctrlKey&&(t.preventDefault(),j());break;case"Delete":t.preventDefault(),x();break;case"ArrowUp":t.preventDefault(),k("up");break;case"ArrowDown":t.preventDefault(),k("down")}}),[e,p,h,g,f,j,x,k]);return s.useEffect((()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)})),[y]),null},Ut=()=>{const{slots:e,setSlots:a}=ie(),{action:l}=N(),{getUSParam:r}=pt(),n=r("rightbar"),c=he((e=>e.pageData?.layout)),{workspaceData:i,documentData:d,isWorkspaceLoading:m,isDocumentLoading:b,workspaceError:u,documentError:p}=(()=>{const{workspace:e,slug:t}=N(),{data:a,isLoading:s,error:l}=Z({queryKey:["workspace",e],queryFn:()=>ct("workspace",e||"dashboard")}),{data:o,isLoading:r,error:n}=Z({queryKey:["document",t],queryFn:()=>ct("document",t||"documents"),enabled:!!a});return{workspaceData:a,documentData:o,isWorkspaceLoading:s,isDocumentLoading:r,workspaceError:l,documentError:n}})();if(s.useEffect((()=>{if(i){const{_pageData:e,...t}=i.workspace.content,s=((e,t)=>({...e,...t}))(t,d?.document?.content||{});a(s),he.setState((()=>({pageData:e}))),(e=>{if(e){const t=be[e.layout]?e.layout:Object.keys(be)[0];he.setState((a=>({...a,pageData:{...a.pageData,layout:t},initialScope:{...e}})))}})(e)}}),[d,a,i]),m||b)return null;if(u||p)return t.jsxs("div",{className:"text-error",children:["Error loading content:"," ",u?.message||p?.message]});const h=be[c]?c:Object.keys(be)[0],g=be[h];if(!g)return t.jsx("div",{className:"text-error",children:"Error: layout config not found"});const f=g.slots.reduce(((a,s)=>{const o="edit-scope"===l||"edit-document"===l||"edit-block"===l?Ft:At;return a[s]=t.jsx(o,{slots:e,slotName:s}),a}),{});return t.jsx($t,{context:l?t.jsx(xt,{}):null,content:t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${n&&"w-2/3"} ${"edit-scope"===l||"edit-document"===l||"edit-block"===l&&"pr-24"}`,children:[t.jsx(Tt,{}),t.jsx(zt,{}),t.jsxs("div",{className:"flex items-stretch",children:["edit-scope"===l&&t.jsx("div",{className:"bg-base-300 w-3/5",children:t.jsx(St,{})}),t.jsx("div",{className:"container-type-inline flex-1 ",children:t.jsx(s.Suspense,{fallback:t.jsx(t.Fragment,{}),children:g.component&&o.createElement(g.component,f)})}),("edit-side"===l||"edit-modal"===l||"edit-workspace"===l)&&t.jsxs("div",{className:"bg-base-300 p-lg shadow text-center",children:[t.jsx(Y,{}),l]})]})]}),n&&t.jsxs(Ot,{children:["user"===n&&t.jsx(Rt,{}),"block"===n&&t.jsx(Dt,{}),"workspaces"===n&&t.jsx(Mt,{})]})]})})},Ht=()=>t.jsx(ce,{children:t.jsx(re,{children:t.jsx(ee,{children:t.jsxs(te,{children:[t.jsx(ae,{path:"/",element:t.jsx(se,{to:"/dashboard/headpage/",replace:!0})}),t.jsx(ae,{path:"/:workspace/:slug",element:t.jsx(Ut,{})}),t.jsx(ae,{path:"/:workspace/:slug/:action",element:t.jsx(Ut,{})})]})})})});le.createRoot(document.getElementById("root")).render(t.jsxs(vt,{children:[" ",t.jsx(Ht,{})]}));export{lt as M,ne as U,me as _,pt as a,Et as b,ut as c,mt as d,it as e,nt as f,pe as g,dt as h,ge as i,wt as n,ht as p,he as u};
