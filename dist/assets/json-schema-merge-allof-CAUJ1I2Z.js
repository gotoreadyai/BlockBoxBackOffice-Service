import{C as e,F as t,G as r,B as n,y as i,H as o,I as s,J as a,K as l,L as c,D as p,x as u,E as f,M as m}from"./lodash-C4siI3Fs.js";import{g as d}from"./ajv-Dq24E4CF.js";import{s as y}from"./json-schema-compare-81NA3FRX.js";import{l as h}from"./compute-lcm-DluO9b7R.js";const v=t,P=r,g=n,A=i,O=o;const x=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),w=e=>g(e)||Array.isArray(e)?Object.keys(e):[],I=e=>!w(e).length&&!1!==e&&!0!==e;var j={allUniqueKeys:e=>A(P(e.map(w))),deleteUndefinedProps:function(e){for(const t in e)x(e,t)&&I(e[t])&&delete e[t];return e},getValues:(e,t)=>e.map((e=>e&&e[t])),has:x,isEmptySchema:I,isSchema:e=>g(e)||!0===e||!1===e,keys:w,notUndefined:e=>void 0!==e,uniqWith:e,withoutArr:(e,...t)=>O.apply(null,[e].concat(v(t)))};const E=y,k=s,{allUniqueKeys:q,deleteUndefinedProps:U,getValues:b,keys:M,notUndefined:N,uniqWith:R,withoutArr:K}=j;function S(e,t){return q(e).reduce((function(r,n){const i=b(e,n),o=R(i.filter(N),E);return r[n]=t(o,n),r}),{})}var L={keywords:["properties","patternProperties","additionalProperties"],resolver(e,t,r,n){n.ignoreAdditionalProperties||(e.forEach((function(t){const n=e.filter((e=>e!==t)),i=M(t.properties),o=M(t.patternProperties).map((e=>new RegExp(e)));n.forEach((function(e){const n=M(e.properties),s=n.filter((e=>o.some((t=>t.test(e)))));K(n,i,s).forEach((function(n){e.properties[n]=r.properties([e.properties[n],t.additionalProperties],n)}))}))})),e.forEach((function(t){const r=e.filter((e=>e!==t)),n=M(t.patternProperties);!1===t.additionalProperties&&r.forEach((function(e){const t=M(e.patternProperties);K(t,n).forEach((t=>delete e.patternProperties[t]))}))})));const i={additionalProperties:r.additionalProperties(e.map((e=>e.additionalProperties))),patternProperties:S(e.map((e=>e.patternProperties)),r.patternProperties),properties:S(e.map((e=>e.properties)),r.properties)};var o;return!1===i.additionalProperties&&k(o=i.properties,(function(e,t){!1===e&&delete o[t]})),U(i)}};const V=y,W=s,{allUniqueKeys:$,deleteUndefinedProps:C,has:J,isSchema:B,notUndefined:D,uniqWith:F}=j;function G(e,t,r){return $(r).reduce((function(r,n){const i=function(e,t){return e.map((function(e){if(e){if(!Array.isArray(e.items))return e.items;{const r=e.items[t];if(B(r))return r;if(J(e,"additionalItems"))return e.additionalItems}}}))}(e,n),o=F(i.filter(D),V);return r[n]=t(o,n),r}),[])}const H=a,T=y,Y=h,z=l,Q=t,X=r,Z=c,_=p,ee=u,te=n,re=m,ne=f,ie=i,oe=e,se=L,ae={keywords:["items","additionalItems"],resolver(e,t,r){const n=e.map((e=>e.items)),i=n.filter(D),o={};let s;var a;return i.every(B)?o.items=r.items(n):o.items=G(e,r.items,n),i.every(Array.isArray)?s=e.map((e=>e.additionalItems)):i.some(Array.isArray)&&(s=e.map((function(e){if(e)return Array.isArray(e.items)?e.additionalItems:e.items}))),s&&(o.additionalItems=r.additionalItems(s)),!1===o.additionalItems&&Array.isArray(o.items)&&(a=o.items,W(a,(function(e,t){!1===e&&a.splice(t,1)}))),C(o)}},le=(e,t)=>-1!==e.indexOf(t),ce=e=>te(e)||!0===e||!1===e,pe=e=>!1===e,ue=e=>!0===e,fe=(e,t,r)=>r(e),me=e=>ne(ie(X(e))),de=e=>void 0!==e,ye=e=>ie(X(e.map(Oe))),he=e=>e[0],ve=e=>Math.max.apply(Math,e),Pe=e=>Math.min.apply(Math,e);function ge(e){let{allOf:t=[],...r}=e;return r=te(e)?r:e,[r,...t.map(ge)]}function Ae(e,t){return e.map((e=>e&&e[t]))}function Oe(e){return te(e)||Array.isArray(e)?Object.keys(e):[]}function xe(e,t){if(t=t||[],!e.length)return t;const r=e.slice(0).shift(),n=e.slice(1);return t.length?xe(n,Q(t.map((e=>r.map((t=>[t].concat(e))))))):xe(n,r.map((e=>e)))}function we(e,t){let r;try{r=e.map((function(e){return JSON.stringify(e,null,2)})).join("\n")}catch(n){r=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+'". They are probably incompatible. Values: \n'+r)}function Ie(e,t,r,n,i,o){if(e.length){const s=i.complexResolvers[t];if(!s||!s.resolver)throw new Error("No resolver found for "+t);const a=r.map((t=>e.reduce(((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e)),{}))),l=oe(a,T),c=s.keywords.reduce(((e,t)=>({...e,[t]:(e,r=[])=>n(e,null,o.concat(t,r))})),{}),p=s.resolver(l,o.concat(t),c,i);return te(p)||we(l,o.concat(t)),p}}function je(e){return{required:e}}const Ee=["properties","patternProperties","definitions","dependencies"],ke=["anyOf","oneOf"],qe=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Ue={type(e){if(e.some(Array.isArray)){const t=e.map((function(e){return Array.isArray(e)?e:[e]})),r=Z.apply(null,t);if(1===r.length)return r[0];if(r.length>1)return ie(r)}},dependencies:(e,t,r)=>ye(e).reduce((function(t,n){const i=Ae(e,n);let o=oe(i.filter(de),ee);const s=o.filter(Array.isArray);if(s.length){if(s.length===o.length)t[n]=me(o);else{const e=o.filter(ce),i=s.map(je);t[n]=r(e.concat(i),n)}return t}return o=oe(o,T),t[n]=r(o,n),t}),{}),oneOf(e,t,r){const n=function(e,t){return e.map((function(e,r){try{return t(e,r)}catch(n){return}})).filter(de)}(xe(H(e)),r),i=oe(n,T);if(i.length)return i},not:e=>({anyOf:e}),pattern:e=>e.map((e=>"(?="+e+")")).join(""),multipleOf(e){let t=e.slice(0),r=1;for(;t.some((e=>!Number.isInteger(e)));)t=t.map((e=>10*e)),r*=10;return Y(t)/r},enum(e){const t=_.apply(null,e.concat(ee));if(t.length)return ne(t)}};Ue.$id=he,Ue.$ref=he,Ue.$schema=he,Ue.additionalItems=fe,Ue.additionalProperties=fe,Ue.anyOf=Ue.oneOf,Ue.contains=fe,Ue.default=he,Ue.definitions=Ue.dependencies,Ue.description=he,Ue.examples=e=>oe(Q(e),ee),Ue.exclusiveMaximum=Pe,Ue.exclusiveMinimum=ve,Ue.items=ae,Ue.maximum=Pe,Ue.maxItems=Pe,Ue.maxLength=Pe,Ue.maxProperties=Pe,Ue.minimum=ve,Ue.minItems=ve,Ue.minLength=ve,Ue.minProperties=ve,Ue.properties=se,Ue.propertyNames=fe,Ue.required=e=>me(e),Ue.title=he,Ue.uniqueItems=e=>e.some(ue);const be={properties:se,items:ae};function Me(e,t,r){t=z(t,{ignoreAdditionalProperties:!1,resolvers:Ue,complexResolvers:be,deep:!0});const n=Object.entries(t.complexResolvers);const i=function e(r,i,o){r=H(r.filter(de)),o=o||[];const s=te(i)?i:{};if(!r.length)return;if(r.some(pe))return!1;if(r.every(ue))return!0;r=r.filter(te);const a=ye(r);if(t.deep&&le(a,"allOf"))return Me({allOf:r},t);const l=n.map((([e,t])=>a.filter((e=>t.keywords.includes(e)))));return l.forEach((e=>re(a,e))),a.forEach((function(n){const i=Ae(r,n),a=oe(i.filter(de),function(e){return function(t,r){return T({[e]:t},{[e]:r})}}(n));if(1===a.length&&le(ke,n))s[n]=a[0].map((t=>e([t],t)));else if(1!==a.length||le(Ee,n)||le(qe,n)){const r=t.resolvers[n]||t.resolvers.defaultResolver;if(!r)throw new Error("No resolver found for key "+n+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const i=(t,r=[])=>e(t,null,o.concat(n,r));s[n]=r(a,o.concat(n),i,t),void 0===s[n]?we(a,o.concat(n)):void 0===s[n]&&delete s[n]}else s[n]=a[0]})),n.reduce(((n,[i,s],a)=>({...n,...Ie(l[a],i,r,e,t,o)})),s)}(X(ge(e)));return i}Me.options={resolvers:Ue};const Ne=d(Me);export{Ne as m};
