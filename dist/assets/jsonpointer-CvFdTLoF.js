var r={},t=/~/,e=/~[01]/g;function n(r){switch(r){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+r)}function o(r){return t.test(r)?r.replace(e,n):r}function i(r){if("string"==typeof r){if(""===(r=r.split("/"))[0])return r;throw new Error("Invalid JSON pointer.")}if(Array.isArray(r)){for(const t of r)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return r}throw new Error("Invalid JSON pointer.")}function f(r,t){if("object"!=typeof r)throw new Error("Invalid input object.");var e=(t=i(t)).length;if(1===e)return r;for(var n=1;n<e;){if(r=r[o(t[n++])],e===n)return r;if("object"!=typeof r||null===r)return}}function u(r,t,e){if("object"!=typeof r)throw new Error("Invalid input object.");if(0===(t=i(t)).length)throw new Error("Invalid JSON pointer for set.");return function(r,t,e){for(var n,i,f=1,u=t.length;f<u;){if("constructor"===t[f]||"prototype"===t[f]||"__proto__"===t[f])return r;if(n=o(t[f++]),i=u>f,void 0===r[n]&&(Array.isArray(r)&&"-"===n&&(n=r.length),i&&(""!==t[f]&&t[f]<1/0||"-"===t[f]?r[n]=[]:r[n]={})),!i)break;r=r[n]}var a=r[n];return void 0===e?delete r[n]:r[n]=e,a}(r,t,e)}r.get=f,r.set=u,r.compile=function(r){var t=i(r);return{get:function(r){return f(r,t)},set:function(r,e){return u(r,t,e)}}};export{r as j};
