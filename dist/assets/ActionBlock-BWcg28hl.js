import{r as e,j as t}from"./vendor-D21JgsWP.js";import{b as s,l as n}from"./index-ClqwfEUu.js";import{A as a}from"./ActionMsg-CNHBAleQ.js";const i=({actions:i=[],reloadOnParamsChange:o=!1,onComplete:r})=>{const[c,l]=e.useState(null),[u,m]=e.useState(0),[f,d]=e.useState(!1),[p,j]=e.useState(null),{getAll:y}=s(),[g,h]=e.useState(JSON.stringify(y()));e.useEffect((()=>{if(o&&g!==JSON.stringify(y())&&(h(JSON.stringify(y())),m(0),d(!1),j(null)),i[u]&&!p){(async()=>{try{await n(i[u].action,l,j)}catch(e){j("Failed to load component")}})()}else u>=i.length&&!p&&(d(!0),r?.(!0))}),[i,u,p,y,o,g,r]);return t.jsxs("div",{className:"min-h-12 flex items-center justify-center",children:[p&&t.jsx(a,{type:"error",children:p}),!f&&c&&i[u]&&!p&&t.jsx(c,{scope:i[u].scope,onActionResult:async e=>{e?(await new Promise((e=>setTimeout(e,500))),u<i.length-1?m(u+1):(d(!0),r?.(!0))):(j("Action failed"),r?.(!1))}},u),f&&!p&&t.jsx(a,{type:"success",children:"Actions queue complete"})]})};export{i as default};
