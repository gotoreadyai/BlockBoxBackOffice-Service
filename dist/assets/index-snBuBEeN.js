const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainDashboard-BeoRdEWv.js","assets/react-oZDKVO_S.js","assets/ajv-Dq24E4CF.js","assets/fast-deep-equal-BfsdOM8n.js","assets/json-schema-traverse-CSPPDTu_.js","assets/fast-uri-DB0GTO5Q.js","assets/Logo--wv-RbEb.js","assets/schemaParts-DFUc7vJU.js","assets/Layout2-ePEcbH75.js","assets/ActionBlockSchema-CoCpQgEv.js","assets/react-icons-ArMHyCzB.js","assets/HeadingTextSchema-DNKaxVpI.js","assets/HorizontalHeroSchema-CtKkYoRz.js","assets/ImageSchema-CX2Z97gZ.js","assets/InfoColumnsSchema-CotgnrIW.js","assets/InputBlockSchema-BurpMnpB.js","assets/LeedSchema-EuGRuqny.js","assets/LinkSchema-Cgv6HbHw.js","assets/ListBlockSchema-ZyEvm1GH.js","assets/LogoSchema-DWorf_al.js","assets/ParagraphSchema-rjEd42Rl.js","assets/SelectBlockSchema-DCDTndGK.js","assets/SubmitFormSchema-BLJ-J1Jz.js","assets/WorkspacesHeroSchema-C2Yobh3L.js","assets/ActionBlock-C_op7xfZ.js","assets/react-dom-LQPgCP33.js","assets/scheduler-DhxmCZ7v.js","assets/react-router-dom-CyMmjZ09.js","assets/react-router-D2EW8VTN.js","assets/@remix-run-BGIWjZ3f.js","assets/@tanstack-DSP7eJVA.js","assets/zustand-Cz8s1w90.js","assets/use-sync-external-store-BzEbalcz.js","assets/@rjsf-8hShb_6G.js","assets/lodash-C4siI3Fs.js","assets/json-schema-merge-allof-CAUJ1I2Z.js","assets/json-schema-compare-81NA3FRX.js","assets/compute-lcm-DluO9b7R.js","assets/compute-gcd-C3gVrxBz.js","assets/validate.io-array-K7AlgBFX.js","assets/validate.io-integer-array-CDpatKg4.js","assets/validate.io-integer-Dqa_6kz1.js","assets/validate.io-number-E8555gXQ.js","assets/validate.io-function-CsX-6D6V.js","assets/jsonpointer-CvFdTLoF.js","assets/react-is-BhM-FsKG.js","assets/nanoid-BV3C3NLD.js","assets/markdown-to-jsx-Bh8rhLW0.js","assets/ajv-formats-B7rDf6Ua.js","assets/@monaco-editor-C30kv2pB.js","assets/state-local-BC9ybJZH.js","assets/uuid-aGgpFg1T.js","assets/HeadingText-DXTXMLC6.js","assets/HorizontalHero-D2q8P2rb.js","assets/Image-DH6XigRj.js","assets/InfoColumns-BpPj5qcw.js","assets/InputBlock-Bav62RQf.js","assets/Leed-p4X5psTA.js","assets/Link-CU1lURPA.js","assets/ListBlock-BjMH_EsH.js","assets/Paragraph-BwA9NrPd.js","assets/SubmitForm-BVfH80SJ.js","assets/WorkspacesHero-Dkok_2OC.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,W as s}from"./react-oZDKVO_S.js";import{c as a}from"./react-dom-LQPgCP33.js";import{B as o}from"./react-router-dom-CyMmjZ09.js";import{Q as l,a as r,u as n,b as c,c as i}from"./@tanstack-DSP7eJVA.js";import{r as d}from"./zustand-Cz8s1w90.js";import{g as m,F as u,v as p}from"./@rjsf-8hShb_6G.js";import"./lodash-C4siI3Fs.js";import"./json-schema-merge-allof-CAUJ1I2Z.js";import"./jsonpointer-CvFdTLoF.js";import"./react-is-BhM-FsKG.js";import{F as h,a as b,b as x,c as j,d as g,e as k,f as _,g as f,h as S,i as v,j as N,k as y,l as E,m as w,n as A,o as L,p as C,q as D}from"./react-icons-ArMHyCzB.js";import{d as I,a as P,b as T,e as B,f as O,g as R}from"./react-router-D2EW8VTN.js";import{F}from"./@monaco-editor-C30kv2pB.js";import{v as V}from"./uuid-aGgpFg1T.js";import"./ajv-Dq24E4CF.js";import"./fast-deep-equal-BfsdOM8n.js";import"./json-schema-traverse-CSPPDTu_.js";import"./fast-uri-DB0GTO5Q.js";import"./scheduler-DhxmCZ7v.js";import"./@remix-run-BGIWjZ3f.js";import"./use-sync-external-store-BzEbalcz.js";import"./nanoid-BV3C3NLD.js";import"./markdown-to-jsx-Bh8rhLW0.js";import"./ajv-formats-B7rDf6Ua.js";import"./json-schema-compare-81NA3FRX.js";import"./compute-lcm-DluO9b7R.js";import"./compute-gcd-C3gVrxBz.js";import"./validate.io-array-K7AlgBFX.js";import"./validate.io-integer-array-CDpatKg4.js";import"./validate.io-integer-Dqa_6kz1.js";import"./validate.io-number-E8555gXQ.js";import"./validate.io-function-CsX-6D6V.js";import"./state-local-BC9ybJZH.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const $=e.createContext({theme:"default",updateTheme:e=>{}}),M=({children:s})=>{const[a,o]=e.useState(localStorage.getItem("theme")||"default");return t.jsx($.Provider,{value:{theme:a,updateTheme:e=>{o(e),localStorage.setItem("theme",e)}},children:s})},H=new l,U=({children:e})=>t.jsx(r,{client:H,children:e}),q=e.createContext({user:null,setUserToContext:()=>{}}),W=({children:s})=>{const[a,o]=e.useState(null);return t.jsx(q.Provider,{value:{user:a,setUserToContext:o},children:s})},z=d((e=>({slots:{},isEditing:!0,selectedSlot:null,selectedBlock:null,setSlots:t=>e({slots:t}),addBlockToSlot:(t,s)=>e((e=>({slots:{...e.slots,[t]:[...e.slots[t]||[],s]}}))),setSelectedSlot:t=>e({selectedSlot:t}),setSelectedBlock:t=>e({selectedBlock:t}),removeBlock:(t,s)=>e((e=>({slots:{...e.slots,[s]:e.slots[s].filter((e=>e.id!==t))}}))),deselectBlock:()=>e({selectedBlock:null}),moveBlock:(t,s,a)=>e((e=>{const o=[...e.slots[s]||[]],l=o.findIndex((e=>e.id===t));if(-1===l)return e;const r="up"===a?l-1:l+1;if(r<0||r>=o.length)return e;const[n]=o.splice(l,1);return o.splice(r,0,n),{slots:{...e.slots,[s]:o}}})),setBlockData:(t,s)=>e((e=>{const a={...e.slots};return Object.keys(a).forEach((e=>{a[e]=a[e].map((e=>e.id===t?{...e,data:s}:e))})),{slots:a}}))}))),J={},G=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in J)return;J[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),t?new Promise(((t,s)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return a.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},K={MainDashboard:{id:"MainDashboard",component:s.lazy((()=>G((()=>import("./MainDashboard-BeoRdEWv.js")),__vite__mapDeps([0,1,2,3,4,5,6,7])))),slots:["header","primaryContent","secondaryContent","footer"],parentSlots:["header","footer"]},layout2:{id:"layout2",component:s.lazy((()=>G((()=>import("./Layout2-ePEcbH75.js")),__vite__mapDeps([8,1,2,3,4,5])))),slots:["header","primaryContent","footer"],parentSlots:["header","footer"]}},Q={},Y=e=>!e||e.endsWith(".")?()=>{}:(Q[e]||(Q[e]=t=>{try{return e.split(".").reduce(((e,t)=>e?e[t]:void 0),t)}catch{return}}),Q[e]),X=d(((e,t)=>({pageData:{},initialScope:{},selectedLayoutName:Object.keys(K)[0],setSelectedLayoutName:t=>{e((e=>({selectedLayoutName:t,pageData:{...e.pageData,layout:t}})))},updateField:(s,a)=>{const o={...t().pageData},l=((e,t,s)=>t.reduceRight(((s,a,o)=>{if(isNaN(Number(a)))return{...Y(t.slice(0,o).join("."))(e),[a]:s};const l=Y(t.slice(0,o).join("."))(e)||[];return l[Number(a)]=s,l}),s))(o,s.split("."),a);e({pageData:{...o,...l}})},getFieldValue:e=>Y(e)(t().pageData)??"",resetPage:()=>e({pageData:{}})}))),Z=()=>null,ee=e=>{const{schema:s,id:a,options:o,value:l,type:r,placeholder:n,required:c,disabled:i,readonly:d,autofocus:u,formContext:p,hideError:h,hideLabel:b,uiSchema:x,rawErrors:j,onChange:g,onChangeOverride:k,..._}=e,f={..._,...m(s,r,o)};return t.jsx("input",{id:a,className:"w-full input input-bordered my-sm",autoFocus:u,value:l,onChange:k||(({target:{value:e}})=>{g(""===e?o.emptyValue||"":e)}),type:r,placeholder:n,disabled:i,readOnly:d,required:c,...f})},te=e=>{const{id:s,options:a,value:o,required:l,disabled:r,readonly:n,autofocus:c,placeholder:i,onChange:d,onBlur:m,onFocus:u,rawErrors:p=[]}=e;return t.jsxs("div",{className:"my-select-wrapper",children:[t.jsxs("select",{id:s,className:"select select-bordered w-full my-sm",value:o||"",required:l,disabled:r||n,autoFocus:c,onChange:e=>{const{value:t}=e.target;d(""===t?a.emptyValue:t)},onBlur:m&&(e=>m(s,e.target.value)),onFocus:u&&(e=>u(s,e.target.value)),children:[i&&t.jsx("option",{value:"",children:i}),(a.enumOptions||[]).map((({value:e,label:s},a)=>t.jsx("option",{value:e,children:s},a)))]}),p.length>0&&t.jsx("div",{className:"text-red-600 text-sm mt-2",children:p.join(", ")})]})};function se(e){const{canAdd:s,items:a,onAddClick:o}=e;return t.jsxs("div",{className:"mb-sm",children:[a.map(((e,s)=>t.jsxs("div",{className:"array-item",children:[t.jsx("div",{className:"border-l-8 pl-1 border-primary-content -ml-sm",children:e.children}),t.jsxs("div",{className:"flex justify-end gap-1 mb-sm",children:[e.hasMoveUp&&t.jsx("button",{type:"button",className:"btn btn-sm btn-outline",onClick:e.onReorderClick(e.index,e.index-1),children:"Move Up"}),e.hasMoveDown&&t.jsx("button",{type:"button",className:"btn btn-sm btn-outline",onClick:e.onReorderClick(e.index,e.index+1),children:"Move Down"}),e.hasRemove&&t.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:e.onDropIndexClick(e.index),children:"Remove"})]})]},s))),s&&t.jsx("button",{type:"button",className:"btn btn-primary btn-sm w-full mt-sm no-animation",onClick:o,children:"Add Item"})]})}function ae(e){const{description:s,id:a}=e;return t.jsx("div",{id:a,className:"text-xs text-neutral pt-1",children:s})}function oe(e){const{id:s,help:a,required:o,description:l,errors:r,children:n,schema:c}=e;return t.jsxs("div",{className:`${2===s.split("_").length&&"border-b px-sm mb-sm"}  border-base-300`,children:[c.label&&c.type&&t.jsxs("label",{htmlFor:s,className:"form-label",children:[c.label,o&&t.jsx("span",{className:"text-danger",children:"*"})]}),l&&t.jsx(t.Fragment,{children:l}),t.jsx(t.Fragment,{children:n}),r&&t.jsx("div",{className:"form-errors text-danger",children:r}),a&&t.jsx("div",{className:"form-help text-muted",children:a})]})}const le=({label:e,fieldName:s,options:a=[]})=>{const o=X((e=>e.updateField)),l=X((e=>e.getFieldValue(s)))||"";return t.jsxs("div",{children:[t.jsx("label",{className:"block pb-sm ",children:e}),t.jsx("select",{className:"select select-bordered w-full mb-2",value:l,onChange:e=>{o(s,e.target.value)},children:a.map((e=>t.jsx("option",{value:e.value,children:e.label},e.value)))})]})},re=Object.freeze(Object.defineProperty({__proto__:null,SelectBlock:le,default:le},Symbol.toStringTag,{value:"Module"})),ne=({label:e})=>{X((e=>({layout:e.pageData.layout})));const s=Object.keys(K).map((e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e})));return t.jsx("div",{className:"p-md border-b border-base-300",children:t.jsx(le,{label:e,fieldName:"layout",options:s})})},ce={users:"user",workspaces:"workspace",documents:"document",categories:"category",documentCategories:"documentCategory",files:"file",courseLevels:"courseLevel",courseObjectives:"courseObjective",courseTitles:"courseTitle",unitTitles:"unitTitle",subjects:"subject",lessonStrategies:"lessonStrategy",pools:"pool"},ie=()=>{const e=(()=>{const e="auth_token=",t=decodeURIComponent(document.cookie).split(";");for(const s of t){const t=s.trim();if(t.startsWith(e))return t.substring(11)}return null})();return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},de=async(e,t)=>{if(!e.ok){const t=await e.json();throw new Error(JSON.stringify(t))}return e.json()},me=async(e,t)=>{const s=`http://localhost:3004/${e}/slug/${t}`,a=await fetch(s);return de(a)},ue=async(e,t)=>{const s=ce[e]||"",a=await fetch(`http://localhost:3004/${s}`,{method:"POST",headers:ie(),body:JSON.stringify(t)});return de(a)},pe=({model:e,setSelectedItem:t,setErrorMessage:s})=>{const a=n(),o=()=>{a.invalidateQueries({queryKey:[e]}),t(null),s(null)},l=e=>{e instanceof Error?s(e.message):s("An unexpected error occurred.")},r=c({mutationFn:t=>ue(e||"",t),onSuccess:o,onError:l}),i=c({mutationFn:({id:t,item:s})=>(async(e,t,s)=>{const a=ce[e]||"",o=await fetch(`http://localhost:3004/${a}/${t}`,{method:"PUT",headers:ie(),body:JSON.stringify(s)});return de(o)})(e||"",t,s),onSuccess:o,onError:l}),d=c({mutationFn:({model:e,slug:t,slot:s,content:a})=>(async(e,t,s,a)=>{const o=`http://localhost:3004/${e}/slug/${t}/content`,l=await fetch(o,{method:"PUT",headers:ie(),body:JSON.stringify({key:s,value:a})});return de(l)})(e,t,s,a),onSuccess:o,onError:l});return{createMutation:r,updateMutation:i,deleteMutation:c({mutationFn:t=>(async(e,t)=>{const s=ce[e]||"",a=await fetch(`http://localhost:3004/${s}/${t}`,{method:"DELETE",headers:ie()});return de(a)})(e||"",t),onSuccess:o,onError:l}),updateContentMutation:d}},he=e=>new URLSearchParams(location.search).get(e),be=d(((e,t)=>({userData:{},relationsData:{},mainMessage:{message:"",type:"info"},globalScope:()=>{const{userData:e,relationsData:s,mainMessage:a}=t();return{userData:e||{},relationsData:s||{},mainMessage:a||{}}},setUserData:t=>e({userData:t}),setMainMessage:(t,s)=>e({mainMessage:{message:t,type:s}})}))),xe=()=>{const{layout:s}=X((e=>({layout:e.pageData.layout}))),{selectedSlot:a,slots:o}=z((e=>({selectedSlot:e.selectedSlot,slots:e.slots}))),{workspace:l,slug:r}=I(),[n,c]=e.useState(null),{updateContentMutation:i}=pe({model:"content",setSelectedItem:()=>{},setErrorMessage:c}),d=be((e=>e.setMainMessage)),m=he("rightbar");return t.jsxs("div",{className:"p-md border-t border-base-300",children:[!m&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-semibold",children:"Selected Slot: "}),t.jsx("span",{children:a||"No slot selected"})]}),n&&t.jsx("div",{className:"text-error",children:n}),a&&t.jsxs("button",{onClick:()=>{if(a){const e=K[s].parentSlots.includes(a),t=e?l:r;if(!t)return c("Slug is undefined. Cannot save content."),void d("Slug is undefined. Cannot save content.","error");i.mutate({model:e?"workspace":"document",slug:t,slot:a,content:o[a]},{onSuccess:()=>{d("Content saved successfully!","success")},onError:e=>{d(`Failed to save content: ${e.message}`,"error")}})}else d("No slot selected to save.","error")},className:"btn btn-md btn-outline w-full no-animation font-light mt-sm",children:[t.jsx(h,{})," ",!m&&t.jsx("span",{children:"Save selected slot data"})]})]})},je=Object.assign({"../../blocks/ActionBlockSchema.ts":()=>G((()=>import("./ActionBlockSchema-CoCpQgEv.js")),__vite__mapDeps([9,10,1,2,3,4,5,7])),"../../blocks/HeadingTextSchema.ts":()=>G((()=>import("./HeadingTextSchema-DNKaxVpI.js")),__vite__mapDeps([11,10,1,2,3,4,5])),"../../blocks/HorizontalHeroSchema.ts":()=>G((()=>import("./HorizontalHeroSchema-CtKkYoRz.js")),__vite__mapDeps([12,10,1,2,3,4,5,7])),"../../blocks/ImageSchema.ts":()=>G((()=>import("./ImageSchema-CX2Z97gZ.js")),__vite__mapDeps([13,10,1,2,3,4,5])),"../../blocks/InfoColumnsSchema.ts":()=>G((()=>import("./InfoColumnsSchema-CotgnrIW.js")),__vite__mapDeps([14,10,1,2,3,4,5])),"../../blocks/InputBlockSchema.ts":()=>G((()=>import("./InputBlockSchema-BurpMnpB.js")),__vite__mapDeps([15,10,1,2,3,4,5])),"../../blocks/LeedSchema.ts":()=>G((()=>import("./LeedSchema-EuGRuqny.js")),__vite__mapDeps([16,10,1,2,3,4,5,7])),"../../blocks/LinkSchema.ts":()=>G((()=>import("./LinkSchema-Cgv6HbHw.js")),__vite__mapDeps([17,10,1,2,3,4,5])),"../../blocks/ListBlockSchema.ts":()=>G((()=>import("./ListBlockSchema-ZyEvm1GH.js")),__vite__mapDeps([18,10,1,2,3,4,5])),"../../blocks/LogoSchema.ts":()=>G((()=>import("./LogoSchema-DWorf_al.js")),__vite__mapDeps([19,10,1,2,3,4,5])),"../../blocks/ParagraphSchema.ts":()=>G((()=>import("./ParagraphSchema-rjEd42Rl.js")),__vite__mapDeps([20,10,1,2,3,4,5])),"../../blocks/SelectBlockSchema.ts":()=>G((()=>import("./SelectBlockSchema-DCDTndGK.js")),__vite__mapDeps([21,10,1,2,3,4,5])),"../../blocks/SubmitFormSchema.ts":()=>G((()=>import("./SubmitFormSchema-BLJ-J1Jz.js")),__vite__mapDeps([22,10,1,2,3,4,5])),"../../blocks/WorkspacesHeroSchema.ts":()=>G((()=>import("./WorkspacesHeroSchema-C2Yobh3L.js")),__vite__mapDeps([23,10,1,2,3,4,5]))}),ge=()=>{const{selectedSlot:a,addBlockToSlot:o,setSelectedBlock:l,slots:r}=z((e=>({selectedSlot:e.selectedSlot,addBlockToSlot:e.addBlockToSlot,setSelectedBlock:e.setSelectedBlock,slots:e.slots}))),[n,c]=e.useState("content"),[i,d]=e.useState({}),m=he("rightbar");e.useEffect((()=>{(async()=>{const e={};for(const t in je){const s=(await je[t]()).default;s.icon=s.icon||{};const a=s.group||"others";e[a]||(e[a]=[]),e[a].push(s)}d(e)})()}),[]);return t.jsxs("div",{className:(m?"w-20":"w-80")+" bg-base-200 h-full flex flex-col",children:[t.jsxs("div",{className:`flex items-center gap-sm ${m?"justify-center":""} px-md py-sm border-b border-base-300`,children:[t.jsx(b,{strokeWidth:.5,className:"w-8 h-8"}),!m&&t.jsx("h1",{className:"text-xl font-black m-0.5",children:"BlockBox"})]}),!m&&t.jsx(ne,{label:"Choose layout:"}),!m&&t.jsx("div",{className:"border-b border-base-300",children:t.jsx("label",{className:"block p-md",children:"Choose block:"})}),t.jsx("div",{className:"tabs tabs-bordered bg-base-300",children:Object.keys(i).map((e=>t.jsx("button",{className:`tab ${n===e?"tab-active bg-base-100":""} ${m?"px-px":""}`,onClick:()=>c(e),children:m?e.charAt(0):e.charAt(0).toUpperCase()+e.slice(1)},e)))}),t.jsx("div",{className:"border-b border-base-300",children:t.jsx("div",{className:`grid ${m?"p-md":"p-sm py-md"} ${m?"grid-cols-1":"grid-cols-2"} gap-sm`,children:null==(u=i[n])?void 0:u.map(((e,r)=>t.jsxs("button",{className:"btn btn-md btn-outline w-full no-animation font-light px-3",onClick:()=>(e=>{var t;if(!a)return void alert("Please select a slot first.");const s=null==(t=i[n])?void 0:t.find((t=>t.filename===e));if(!s)return;const r={id:V(),filename:e,data:s.data||{},icon:s.icon||void 0};o(a,r),l(r)})(e.filename),children:[t.jsx("div",{className:"text-lg",children:e.icon&&"function"==typeof e.icon&&s.createElement(e.icon)}),!m&&t.jsx("div",{className:"text-sm text-left flex-1",children:e.jsonSchema.title})]},r)))})}),t.jsx("div",{className:"flex-1"}),t.jsx(xe,{})]});var u},ke=({callback:e,label:s})=>{const a=P();return t.jsxs("div",{className:"sticky top-0 flex bg-base-100 items-center justify-between border-b border-base-300 px-md py-sm",children:[t.jsx("button",{className:"btn btn-circle btn-outline btn-xs",onClick:()=>{e();const t=new URLSearchParams(location.search);t.delete("rightbar"),a({pathname:location.pathname,search:t.toString()})},children:t.jsx(x,{})}),t.jsx("h3",{className:"text-2xl font-extrabold drop-shadow-sm text-warning",children:s})]})},_e=({label:s,value:a,isRequired:o,onChange:l})=>{const[r,n]=e.useState(null),c=JSON.stringify(a,null,2);return t.jsxs("div",{className:"json-editor",children:[t.jsxs("label",{className:"block p-md",children:[s," ",o&&t.jsx("span",{children:"*"})]}),t.jsx(F,{height:"calc(100vh - 280px)",language:"json",value:c,onChange:e=>{if(void 0!==e)try{const t=JSON.parse(e);n(null),l(t)}catch(t){n("Invalid JSON syntax")}},theme:"vs-dark",options:{minimap:{enabled:!1},lineNumbers:"on"}}),r&&t.jsx("p",{className:"alert alert-error rounded-none",children:r})]})},fe=()=>{const e=P(),s=T(),{workspace:a,slug:o,action:l}=I(),r=s.pathname.endsWith(`/${a}/${o}/`);return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"btn btn-sm btn-square "+("edit-side"===l?"btn-active":""),onClick:()=>e(`/${a}/${o}/edit-side/`),children:t.jsx(j,{})}),t.jsx("button",{className:"btn btn-sm btn-square "+("edit-workspace"===l?"btn-active":""),onClick:()=>e(`/${a}/${o}/edit-workspace/`),children:t.jsx(g,{})}),t.jsx("button",{className:"btn btn-sm btn-square "+("edit-document"===l?"btn-active":""),onClick:()=>e(`/${a}/${o}/edit-document/`),children:t.jsx(k,{})}),t.jsx("button",{className:"btn btn-sm btn-square "+("edit-modal"===l?"btn-active":""),onClick:()=>e(`/${a}/${o}/edit-modal/`),children:t.jsx(_,{})}),t.jsx("button",{className:"btn btn-sm btn-square "+("edit-scope"===l?"btn-active":""),onClick:()=>e(`/${a}/${o}/edit-scope/`),children:t.jsx(f,{})}),t.jsx("button",{className:"btn btn-sm btn-square "+(r?"btn-active":""),onClick:()=>e(`/${a}/${o}/`),children:t.jsx(S,{})})]})},Se=()=>{const[s,a]=e.useState("initialScope"),o=X((e=>e.initialScope)),l=X((e=>e.pageData)),r=z((e=>e.slots)),n=be((e=>e.globalScope()));let c;return"initialScope"===s?c=o:"actualScope"===s?c=l:"slotsPreview"===s?c=r:"globalScope"===s&&(c=n),t.jsxs("div",{className:"w-full sticky top-16",children:[t.jsxs("div",{className:"tabs tabs-lifted border-b border-base-200 mt-sm",children:[t.jsx("button",{className:"tab "+("initialScope"===s?"tab-active":""),onClick:()=>a("initialScope"),children:"Initial Scope"}),t.jsx("button",{className:"tab "+("actualScope"===s?"tab-active":""),onClick:()=>a("actualScope"),children:"Actual Scope"}),t.jsx("button",{className:"tab "+("slotsPreview"===s?"tab-active":""),onClick:()=>a("slotsPreview"),children:"Slots Preview"}),t.jsx("button",{className:"tab "+("globalScope"===s?"tab-active":""),onClick:()=>a("globalScope"),children:"Global Scope"})]}),t.jsx(_e,{id:"json-block-id",label:"initialScope"===s?"Page scope range":"actualScope"===s?"Actual page scope":"slotsPreview"===s?"Slots Preview":"Global Scope",value:c||{},isRequired:!0,onChange:e=>{}}),t.jsx("div",{className:"p-sm",children:t.jsx("button",{className:"btn btn-success btn-outline w-full",children:"Update page scope"})})]})},ve=({theme:e,handleThemeChange:s})=>t.jsx("div",{className:"join join-vertical w-full",children:["default","light","dark","cupcake","aqua","retro","cyberpunk","pastel","nord"].map((a=>t.jsx("input",{type:"radio",name:"theme-buttons",className:"btn theme-controller join-item btn-sm font-thin","aria-label":a.charAt(0).toUpperCase()+a.slice(1),value:a,checked:e===a,onChange:s},a)))}),Ne=()=>{const{theme:s,updateTheme:a}=e.useContext($),o=P(),l=T(),{mainMessage:r}=be((e=>({mainMessage:e.mainMessage}))),n=e=>{const t=new URLSearchParams(l.search);t.set("rightbar",e),o({pathname:l.pathname,search:t.toString()})};return t.jsxs("div",{className:"sticky top-0 p-sm px-md bg-base-300 text-xs z-20 flex gap-0.5 w-full border-b border-base-300 shadow-lg",children:[t.jsx("button",{className:"btn btn-sm btn-square",onClick:()=>o("/"),children:t.jsx(v,{})}),t.jsx(fe,{}),t.jsxs("div",{className:"dropdown",children:[t.jsx("div",{tabIndex:1,role:"button",className:"btn btn-sm btn-square",children:t.jsx(N,{})}),t.jsx("div",{tabIndex:1,className:"dropdown-content z-[1] w-52 pb-2",children:t.jsx(ve,{theme:s,handleThemeChange:e=>{a(e.target.value)}})})]}),r.message&&t.jsx("div",{className:`text-${r.type} grid px-md items-center justify-center`,children:r.message}),t.jsx("div",{className:"flex-1"}),t.jsx("button",{className:"btn btn-sm btn-square",onClick:()=>n("workspaces"),children:t.jsx(y,{})}),t.jsx("button",{className:"btn btn-sm btn-square",onClick:()=>n("user"),children:t.jsx(E,{})})]})},ye=Object.assign({"../../blocks/ActionBlockSchema.ts":()=>G((()=>import("./ActionBlockSchema-CoCpQgEv.js")),__vite__mapDeps([9,10,1,2,3,4,5,7])),"../../blocks/HeadingTextSchema.ts":()=>G((()=>import("./HeadingTextSchema-DNKaxVpI.js")),__vite__mapDeps([11,10,1,2,3,4,5])),"../../blocks/HorizontalHeroSchema.ts":()=>G((()=>import("./HorizontalHeroSchema-CtKkYoRz.js")),__vite__mapDeps([12,10,1,2,3,4,5,7])),"../../blocks/ImageSchema.ts":()=>G((()=>import("./ImageSchema-CX2Z97gZ.js")),__vite__mapDeps([13,10,1,2,3,4,5])),"../../blocks/InfoColumnsSchema.ts":()=>G((()=>import("./InfoColumnsSchema-CotgnrIW.js")),__vite__mapDeps([14,10,1,2,3,4,5])),"../../blocks/InputBlockSchema.ts":()=>G((()=>import("./InputBlockSchema-BurpMnpB.js")),__vite__mapDeps([15,10,1,2,3,4,5])),"../../blocks/LeedSchema.ts":()=>G((()=>import("./LeedSchema-EuGRuqny.js")),__vite__mapDeps([16,10,1,2,3,4,5,7])),"../../blocks/LinkSchema.ts":()=>G((()=>import("./LinkSchema-Cgv6HbHw.js")),__vite__mapDeps([17,10,1,2,3,4,5])),"../../blocks/ListBlockSchema.ts":()=>G((()=>import("./ListBlockSchema-ZyEvm1GH.js")),__vite__mapDeps([18,10,1,2,3,4,5])),"../../blocks/LogoSchema.ts":()=>G((()=>import("./LogoSchema-DWorf_al.js")),__vite__mapDeps([19,10,1,2,3,4,5])),"../../blocks/ParagraphSchema.ts":()=>G((()=>import("./ParagraphSchema-rjEd42Rl.js")),__vite__mapDeps([20,10,1,2,3,4,5])),"../../blocks/SelectBlockSchema.ts":()=>G((()=>import("./SelectBlockSchema-DCDTndGK.js")),__vite__mapDeps([21,10,1,2,3,4,5])),"../../blocks/SubmitFormSchema.ts":()=>G((()=>import("./SubmitFormSchema-BLJ-J1Jz.js")),__vite__mapDeps([22,10,1,2,3,4,5])),"../../blocks/WorkspacesHeroSchema.ts":()=>G((()=>import("./WorkspacesHeroSchema-C2Yobh3L.js")),__vite__mapDeps([23,10,1,2,3,4,5]))}),Ee=()=>{const{selectedBlock:s,selectedSlot:a,setBlockData:o,removeBlock:l,moveBlock:r,deselectBlock:n}=z((e=>({selectedBlock:e.selectedBlock,selectedSlot:e.selectedSlot,setBlockData:e.setBlockData,removeBlock:e.removeBlock,moveBlock:e.moveBlock,deselectBlock:e.deselectBlock}))),[c,i]=e.useState(null);e.useEffect((()=>{if(s){(async()=>{const e=`../../blocks/${s.filename}Schema.ts`;if(ye[e]){const t=await ye[e]();i(t.default.jsonSchema)}else i(null)})()}}),[s]);const d={SelectWidget:te};return s?c?t.jsxs(t.Fragment,{children:[t.jsx(ke,{label:s.filename,callback:()=>{n()}}),t.jsx(u,{schema:c,validator:p,formData:s.data,onChange:e=>{s&&o(s.id,e.formData)},uiSchema:{"ui:submitButtonOptions":{norender:!0}},templates:{BaseInputTemplate:ee,TitleFieldTemplate:Z,ArrayFieldTemplate:se,DescriptionFieldTemplate:ae,FieldTemplate:oe},widgets:d}),t.jsxs("div",{className:"flex gap-2 p-md border-b border-base-300",children:[t.jsxs("button",{className:"btn btn-outline btn-sm",onClick:()=>a&&r(s.id,a,"up"),children:[t.jsx(w,{})," Move Up"]}),t.jsxs("button",{className:"btn btn-outline btn-sm",onClick:()=>a&&r(s.id,a,"down"),children:[t.jsx(A,{})," Move Down"]}),t.jsxs("button",{className:"btn btn-outline btn-sm text-red-600",onClick:()=>a&&l(s.id,a),children:[t.jsx(L,{})," Delete Block"]})]})]}):t.jsx("div",{className:"p-4",children:"Loading block schema..."}):t.jsx("div",{className:"p-4",children:"No block selected"})},we=({context:e,content:s})=>t.jsxs("div",{className:`${e&&"drawer lg:drawer-open"} font-inter relative`,children:[e&&t.jsx("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),t.jsxs("div",{className:"drawer-content",children:[s,t.jsx("label",{htmlFor:"my-drawer-2",className:"btn btn-primary drawer-button lg:hidden",children:"Open drawer"})]}),e&&t.jsxs("div",{className:"drawer-side",children:[t.jsx("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),e]}),"|"]}),Ae=({children:e})=>t.jsx("div",{className:"fixed right-0 top-0 w-1/3 h-full bg-base-100 z-50 border-l border-base-300 overflow-y-auto",children:e}),Le=Object.assign({"../blocks/ActionBlock.tsx":()=>G((()=>import("./ActionBlock-C_op7xfZ.js")),__vite__mapDeps([24,1,2,3,4,5,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,10,49,50,51])),"../blocks/HeadingText.tsx":()=>G((()=>import("./HeadingText-DXTXMLC6.js")),__vite__mapDeps([52,1,2,3,4,5])),"../blocks/HorizontalHero.tsx":()=>G((()=>import("./HorizontalHero-D2q8P2rb.js")),__vite__mapDeps([53,1,2,3,4,5,10])),"../blocks/Image.tsx":()=>G((()=>import("./Image-DH6XigRj.js")),__vite__mapDeps([54,1,2,3,4,5])),"../blocks/InfoColumns.tsx":()=>G((()=>import("./InfoColumns-BpPj5qcw.js")),__vite__mapDeps([55,1,2,3,4,5,10])),"../blocks/InputBlock.tsx":()=>G((()=>import("./InputBlock-Bav62RQf.js")),__vite__mapDeps([56,1,2,3,4,5,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,10,49,50,51])),"../blocks/Leed.tsx":()=>G((()=>import("./Leed-p4X5psTA.js")),__vite__mapDeps([57,1,2,3,4,5,7])),"../blocks/Link.tsx":()=>G((()=>import("./Link-CU1lURPA.js")),__vite__mapDeps([58,1,2,3,4,5,27,25,26,28,29])),"../blocks/ListBlock.tsx":()=>G((()=>import("./ListBlock-BjMH_EsH.js")),__vite__mapDeps([59,1,2,3,4,5,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,10,49,50,51])),"../blocks/Logo.tsx":()=>G((()=>import("./Logo--wv-RbEb.js")),__vite__mapDeps([6,1,2,3,4,5])),"../blocks/Paragraph.tsx":()=>G((()=>import("./Paragraph-BwA9NrPd.js")),__vite__mapDeps([60,1,2,3,4,5])),"../blocks/SelectBlock.tsx":()=>G((()=>Promise.resolve().then((()=>re))),void 0),"../blocks/SubmitForm.tsx":()=>G((()=>import("./SubmitForm-BVfH80SJ.js")),__vite__mapDeps([61,1,2,3,4,5,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,10,49,50,51])),"../blocks/WorkspacesHero.tsx":()=>G((()=>import("./WorkspacesHero-Dkok_2OC.js")),__vite__mapDeps([62,1,2,3,4,5,10,27,25,26,28,29]))}),Ce=({block:s})=>{const[a,o]=e.useState(null);z((e=>e.isEditing));return e.useEffect((()=>{(async()=>{const e=Le[`../blocks/${s.filename}.tsx`];if(e){const t=await e();o((()=>t.default))}})()}),[s.filename]),a?t.jsx("div",{className:"",children:t.jsx(a,{...s.data})}):t.jsx(t.Fragment,{})},De=({slots:e,slotName:s})=>e[s]?t.jsx(t.Fragment,{children:e[s].map((e=>t.jsx("div",{className:"block-wrapper",children:t.jsx(Ce,{block:e})},e.id)))}):t.jsxs("div",{children:["No content for ",s]}),Ie={backgroundRepeat:"repeat",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAACJJREFUGFdjZMAEDYxoYg1APoogWACkCKYSLgATRBEACQIAziQEhlXGa64AAAAASUVORK5CYII=")'},Pe=({slots:e,slotName:s})=>{const{selectedSlot:a,selectedBlock:o,setSelectedSlot:l,setSelectedBlock:r,isEditing:n}=z(),c=T(),i=P(),d=()=>{if(n&&a!==s){l(s),r(null);const e=new URLSearchParams(c.search);e.delete("rightbar"),i({pathname:c.pathname,search:e.toString()})}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute w-full h-full border z-10 pointer-events-none "+(a===s?"border-primary":"border-base-300 ")}),t.jsxs("div",{onClick:d,className:"absolute -top-8 h-8 z-10 rounded-t "+(a===s?"bg-primary":"bg-base-300 "),children:[t.jsxs("div",{className:"flex px-md gap-xs items-center h-full text-sm cursor-pointer",children:[t.jsx(C,{className:""+(a===s?"text-neutral":"text-warning")}),t.jsx("span",{className:""+(a===s?"text-neutral":""),children:s})]}),t.jsx("div",{className:"absolute w-full h-full top-0 ",onClick:d})]}),t.jsx("div",{className:"h-px"}),e[s]&&e[s].map((e=>t.jsxs("div",{className:"block-wrapper m-px relative",children:[t.jsx(Ce,{block:e}),t.jsx("div",{style:(null==o?void 0:o.id)===e.id?Ie:{},className:"absolute top-px bottom-px left-px right-px w-full h-full border  "+((null==o?void 0:o.id)===e.id?"bg-primary bg-opacity-10 border-secondaary":"border-base-300 border-dashed"),onPointerDown:t=>{t.stopPropagation(),(e=>{r(e),l(s);const t=new URLSearchParams(c.search);t.set("rightbar","block"),i({pathname:c.pathname,search:t.toString()})})(e)}})]},e.id)))]})},Te=()=>t.jsxs(t.Fragment,{children:[t.jsx(ke,{callback:()=>{},label:"Login form"}),t.jsx("form",{className:"flex flex-col gap-sm p-sm",children:t.jsx(De,{slots:{loginForm:[{id:"75f19de7-4bab-4343-99eb-80a81dc38306",filename:"InputBlock",data:{label:"User email",fieldName:"user.email",className:""}},{id:"9b7b7f4d-889c-440d-88ed-bf9f4920c256",filename:"InputBlock",data:{label:"Password",fieldName:"user.password",className:""}},{id:"5b8d9266-a445-425b-aae2-59aa0b181314",filename:"SubmitForm",data:{actions:["AlertAction","SignInAction"]}}]},slotName:"loginForm"})})]}),Be=()=>{const[s,a]=e.useState("table"),[o,l]=e.useState(null),r={workspaceNew:[{id:"4bab",filename:"InputBlock",data:{label:"Title",fieldName:"workspace.title",className:""}},{id:"889c",filename:"InputBlock",data:{label:"Content",fieldName:"workspace.content",className:"",default:"default"}},{id:"a445",filename:"SubmitForm",data:{actions:["AlertAction","InsertAction"],scope:"workspace"}}],workspaceUpdate:[{id:"4343",filename:"InputBlock",data:{label:"Title",fieldName:"workspace.title",className:""}},{id:"440d",filename:"InputBlock",data:{label:"Content",fieldName:"workspace.content",className:"",default:"default"}},{id:"425b",filename:"SubmitForm",data:{actions:["AlertAction","InsertAction"],scope:"workspace"}}]},n=e=>{a("edit"),l(e)};return t.jsxs(t.Fragment,{children:[t.jsx(ke,{callback:()=>{},label:"Workspaces"}),t.jsxs("div",{role:"tablist",className:"tabs tabs-bordered tabs-lg",children:[t.jsx("a",{role:"tab",className:"tab "+("table"===s?"tab-active":""),onClick:()=>a("table"),children:"List"}),t.jsx("a",{role:"tab",className:"tab "+("createNew"===s?"tab-active":""),onClick:()=>{a("createNew"),l(null)},children:"Create new"})]}),"table"===s&&t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Job"}),t.jsx("th",{children:"Favorite Color"}),t.jsx("th",{})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{onClick:()=>n({name:"Cy Ganderton"}),children:[t.jsx("th",{children:"1"}),t.jsx("td",{children:"Cy Ganderton"}),t.jsx("td",{children:"Quality Control Specialist"}),t.jsx("td",{children:"Blue"}),t.jsx("td",{children:t.jsx("div",{children:t.jsx(D,{})})})]}),t.jsxs("tr",{onClick:()=>n({name:"Hart Hagerty"}),children:[t.jsx("th",{children:"2"}),t.jsx("td",{children:"Hart Hagerty"}),t.jsx("td",{children:"Desktop Support Technician"}),t.jsx("td",{children:"Purple"}),t.jsx("td",{children:t.jsx("div",{children:t.jsx(D,{})})})]}),t.jsxs("tr",{onClick:()=>n({name:"Brice Swyre"}),children:[t.jsx("th",{children:"3"}),t.jsx("td",{children:"Brice Swyre"}),t.jsx("td",{children:"Tax Accountant"}),t.jsx("td",{children:"Red"}),t.jsx("td",{children:t.jsx("div",{children:t.jsx(D,{})})})]})]})]}),"createNew"===s&&t.jsxs("form",{className:"flex flex-col gap-sm p-sm",children:[t.jsxs("h2",{className:"font-extrabold text-3xl p-md",children:["Create ",t.jsx("br",{}),"new Workspace"]}),t.jsx(De,{slots:r,slotName:"workspaceNew"})]}),"edit"===s&&o&&t.jsxs("form",{className:"flex flex-col gap-sm p-sm",children:[t.jsxs("div",{className:"p-md",children:[t.jsx("p",{children:o.name}),t.jsx("h2",{className:"font-extrabold text-3xl",children:"Edit Workspace:"})]}),t.jsx(De,{slots:r,slotName:"workspaceUpdate"})]})]})},Oe=()=>{const{slots:s,setSlots:a}=z(),{action:o}=I(),l=T(),r=X((e=>{var t;return null==(t=e.pageData)?void 0:t.layout})),{workspaceData:n,documentData:c,isWorkspaceLoading:d,isDocumentLoading:m,workspaceError:u,documentError:p}=(()=>{const{workspace:e,slug:t}=I(),{data:s,isLoading:a,error:o}=i({queryKey:["workspace",e],queryFn:()=>me("workspace",e||"dashboard")}),{data:l,isLoading:r,error:n}=i({queryKey:["document",t],queryFn:()=>me("document",t||"documents"),enabled:!!s});return{workspaceData:s,documentData:l,isWorkspaceLoading:a,isDocumentLoading:r,workspaceError:o,documentError:n}})();if(e.useEffect((()=>{var e;if(n){const{_pageData:t,...s}=n.workspace.content,o=((e,t)=>({...e,...t}))(s,(null==(e=null==c?void 0:c.document)?void 0:e.content)||{});a(o),X.setState((()=>({pageData:t}))),(e=>{if(e){const t=K[e.layout]?e.layout:Object.keys(K)[0];X.setState((s=>({...s,pageData:{...s.pageData,layout:t},initialScope:{...e}})))}})(t)}}),[n,c,a]),d||m)return null;if(u||p)return t.jsxs("div",{className:"text-error",children:["Error loading content:"," ",(null==u?void 0:u.message)||(null==p?void 0:p.message)]});const h=K[r]?r:Object.keys(K)[0],b=K[h];if(!b)return t.jsx("div",{className:"text-error",children:"Error: layout config not found"});const x=b.slots.reduce(((e,a)=>{const l="edit-scope"===o||"edit-document"===o||"edit-block"===o?Pe:De;return e[a]=t.jsx(l,{slots:s,slotName:a}),e}),{}),j=new URLSearchParams(l.search).get("rightbar");return t.jsx(we,{context:o?t.jsx(ge,{}):null,content:t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${j&&"w-2/3"} ${"edit-scope"===o||"edit-document"===o||"edit-block"===o&&"pr-24"}`,children:[t.jsx(Ne,{}),t.jsxs("div",{className:"flex items-stretch",children:["edit-scope"===o&&t.jsx("div",{className:"bg-base-300 w-3/5",children:t.jsx(Se,{})}),t.jsx("div",{className:"container-type-inline flex-1",children:t.jsx(e.Suspense,{fallback:t.jsx("div",{className:"text-gray-500",children:"Loading layout..."}),children:b.component&&t.jsx(b.component,{...x})})})]})]}),j&&t.jsxs(Ae,{children:["user"===j&&t.jsx(Te,{}),"block"===j&&t.jsx(Ee,{}),"workspaces"===j&&t.jsx(Be,{})]})]})})},Re=()=>t.jsx(M,{children:t.jsx(W,{children:t.jsx(U,{children:t.jsx(o,{children:t.jsxs(B,{children:[t.jsx(O,{path:"/",element:t.jsx(R,{to:"/dashboard/documents/edit-document/",replace:!0})}),t.jsx(O,{path:"/:workspace/:slug",element:t.jsx(Oe,{})}),t.jsx(O,{path:"/:workspace/:slug/:action",element:t.jsx(Oe,{})})]})})})})});a.createRoot(document.getElementById("root")).render(t.jsx(Re,{}));export{q as U,G as _,be as a,ue as c,Y as g,X as u};
