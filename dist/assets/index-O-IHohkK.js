const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainDashboard-Cd6Qpzx3.js","assets/react-BZuymhSV.js","assets/react-router-dom-D4tEWo8V.js","assets/react-dom-BYiVop1z.js","assets/scheduler-DhxmCZ7v.js","assets/react-router-CTXi29Ex.js","assets/@remix-run-C6gLdFx_.js","assets/@tanstack-9uQdZFRu.js","assets/react-icons-BIrHdytZ.js","assets/date-fns-DRFbL8hS.js","assets/@monaco-editor-CHrUmUaG.js","assets/state-local-BC9ybJZH.js","assets/OneColumn-DFJLzCf8.js","assets/TwoColumns-PGbjSz8j.js"])))=>i.map(i=>d[i]);
import{j as e,r as t,R as l}from"./react-BZuymhSV.js";import{c as a}from"./react-dom-BYiVop1z.js";import{Q as s,a as n,u as o,b as r,c as d}from"./@tanstack-9uQdZFRu.js";import{L as i,B as c}from"./react-router-dom-D4tEWo8V.js";import{F as u,a as m,b as p,c as h,d as x}from"./react-icons-BIrHdytZ.js";import{a as b,d as y,b as N,e as j,f as w,g}from"./react-router-CTXi29Ex.js";import{p as f,i as v,f as A}from"./date-fns-DRFbL8hS.js";import{F as C}from"./@monaco-editor-CHrUmUaG.js";import"./scheduler-DhxmCZ7v.js";import"./@remix-run-C6gLdFx_.js";import"./state-local-BC9ybJZH.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const T=new s,k=({children:t})=>e.jsx(n,{client:T,children:t}),I=({theme:t,handleThemeChange:l})=>e.jsx("div",{className:"join join-horizontal mx-md",children:["default","light","dark","cupcake","aqua","retro","cyberpunk"].map((a=>e.jsx("input",{type:"radio",name:"theme-buttons",className:"btn theme-controller join-item btn-sm font-thin","aria-label":a.charAt(0).toUpperCase()+a.slice(1),value:a,checked:t===a,onChange:l},a)))}),E=t.createContext({user:null,setUserToContext:()=>{}}),D=({children:l})=>{const[a,s]=t.useState(null);return e.jsx(E.Provider,{value:{user:a,setUserToContext:s},children:l})},S={},U=function(e,t,l){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),l=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in S)return;S[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,l&&s.setAttribute("nonce",l),document.head.appendChild(s),t?new Promise(((t,l)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>l(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return a.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},O={users:{id:{type:"UUID",allowNull:!1,primaryKey:!0},email:{type:"STRING",allowNull:!1},firstName:{type:"STRING",allowNull:!0},lastName:{type:"STRING",allowNull:!0},password:{type:"STRING",allowNull:!1},role:{type:"ENUM",allowNull:!1},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},workspaces:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},slug:{type:"STRING",allowNull:!1},content:{type:"JSONB",allowNull:!1},ownerId:{type:"UUID",allowNull:!1,references:{model:"Users",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},documents:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},slug:{type:"STRING",allowNull:!1},content:{type:"JSONB",allowNull:!1},workspaceId:{type:"UUID",allowNull:!1,references:{model:"Workspaces",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},ownerId:{type:"UUID",allowNull:!1,references:{model:"Users",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},categories:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},parentId:{type:"UUID",allowNull:!0},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},documentCategories:{documentId:{type:"UUID",allowNull:!0,primaryKey:!0,references:{model:"Documents",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},categoryId:{type:"UUID",allowNull:!0,primaryKey:!0,references:{model:"Categories",key:"id"},onDelete:"CASCADE",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},files:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},type:{type:"STRING",allowNull:!0},url:{type:"STRING",allowNull:!0},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},courseLevels:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},courseObjectives:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},courseLevelId:{type:"UUID",allowNull:!1,references:{model:"CourseLevels",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},courseTitles:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},courseObjectiveId:{type:"UUID",allowNull:!1,references:{model:"CourseObjectives",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},unitTitles:{id:{type:"UUID",allowNull:!1,primaryKey:!0},name:{type:"STRING",allowNull:!1},courseTitleId:{type:"UUID",allowNull:!1,references:{model:"CourseTitles",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},subjects:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},unitTitleId:{type:"UUID",allowNull:!1,references:{model:"UnitTitles",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},lessonStrategies:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},content:{type:"TEXT",allowNull:!1},subjectId:{type:"UUID",allowNull:!1,references:{model:"Subjects",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}},pools:{id:{type:"UUID",allowNull:!1,primaryKey:!0},title:{type:"STRING",allowNull:!1},content:{type:"JSONB",allowNull:!1},subjectId:{type:"UUID",allowNull:!1,references:{model:"Subjects",key:"id"},onDelete:"NO ACTION",onUpdate:"CASCADE"},createdAt:{type:"DATE",allowNull:!1},updatedAt:{type:"DATE",allowNull:!1}}},R={users:"user",workspaces:"workspace",documents:"document",categories:"category",documentCategories:"documentCategory",files:"file",courseLevels:"courseLevel",courseObjectives:"courseObjective",courseTitles:"courseTitle",unitTitles:"unitTitle",subjects:"subject",lessonStrategies:"lessonStrategy",pools:"pool"},$=()=>{const e="auth_token=",t=decodeURIComponent(document.cookie).split(";");for(let l=0;l<t.length;l++){const a=t[l].trim();if(0===a.indexOf(e))return a.substring(11,a.length)}return null},q=async(e,t)=>{const l=`http://localhost:3004/${e}/slug/${t}`,a=await fetch(l);if(!a.ok)throw new Error(`Failed to fetch document with slug: ${t}`);return await a.json()},F=()=>e.jsx(i,{to:"/",children:e.jsx("img",{src:"/logo.svg"})}),L=({children:t,handleClose:l})=>e.jsxs("dialog",{open:!0,className:"modal modal-top",children:[e.jsx("div",{className:"modal-backdrop bg-primary-content opacity-20",onClick:l}),e.jsx("div",{className:"modal-box w-full ",children:e.jsxs("div",{className:"container m-auto flex flex-col gap-md",children:[e.jsxs("div",{className:"w-52",children:[e.jsx(F,{})," "]}),e.jsx("h2",{className:"text-2xl font-bold",children:"Create New Item"}),e.jsx("form",{method:"dialog",children:t})]})})]}),_=({config:t,selectedItem:l,setSelectedItem:a})=>{if(!t)return null;const s=(e,t)=>{l&&a({...l,[e]:t})},n=Object.entries(t).filter((([e])=>!["id","createdAt","updatedAt"].includes(e))).map((([e,t])=>((e,t,l)=>{const{type:a,allowNull:n,label:o,references:r}=t,d=!n,i=o??e,c=void 0!==l?l:"";return r?{id:e,type:"formRelationInput",data:{id:e,label:i,value:c,isRequired:d,onChange:t=>s(e,t)}}:"TEXT"===a?{id:e,type:"formTextarea",data:{id:e,label:i,value:c,isRequired:d,onChange:t=>s(e,t)}}:"JSONB"===a?{id:e,type:"formJSONInput",data:{id:e,label:i,value:c,isRequired:d,onChange:t=>s(e,t)}}:{id:e,type:"formTextInput",data:{id:e,label:i,value:c,isRequired:d,onChange:t=>s(e,t)}}})(e,t,null==l?void 0:l[e])));return e.jsx(e.Fragment,{children:n.map((t=>e.jsx(te,{block:t},t.id)))})},M=({config:t})=>t?e.jsxs(e.Fragment,{children:[Object.keys(t).map(((t,l)=>e.jsx("th",{className:`\n            ${0===l||"title"===t||"content"===t||"name"===t?"text-left":"text-center"}\n            ${"title"===t&&""}\n            ${"content"===t&&""}\n          `,children:t},t))),e.jsx("th",{className:"text-right w-1/4",children:"Actions"})]}):null,B={workspaces:["documents"],languages:["lessonObjectives"],lessonObjectives:["bookTitles"]},G=({config:t,handleSelect:l,handleRelation:a,model:s,data:n,deleteMutation:o})=>{var r;const d=s&&(null==(r=null==n?void 0:n[s])?void 0:r.items)?n[s].items:[],i=(t,l)=>{const a=t[l];return"string"==typeof a&&a.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)?(e=>{if(!e)return"N/A";const t=f(e);return v(t)?A(t,"yyyy-MM-dd / HH:mm"):e})(a):Array.isArray(a)?e.jsx("span",{className:"badge",children:a.join(", ")}):"object"==typeof a&&null!==a?e.jsx("span",{className:"badge",children:JSON.stringify(a)}):void 0!==a?a:"N/A"};return d.length?d.map((n=>e.jsxs("tr",{children:[Object.keys(t).map((t=>e.jsx("td",{className:"whitespace-nowrap text-ellipsis max-w-px overflow-hidden",children:i(n,t)},t))),e.jsxs("td",{className:"gap-1 flex w-full justify-end",children:[e.jsxs("button",{className:"btn btn-info btn-xs",onClick:()=>l(n),children:[e.jsx(u,{})," Edit"]}),(null==B?void 0:B[s])&&B[s].map((t=>e.jsxs("button",{onClick:()=>{a({...n,_relatedFrom:t,_relatedTo:s})},className:"btn btn-outline btn-xs",children:[e.jsx(m,{})," ",t]},`${t}:${s}`))),e.jsxs("button",{className:"btn btn-error btn-xs",onClick:()=>(async e=>{try{await o.mutateAsync(e)}catch(t){}})(n.id),children:[e.jsx(p,{})," Delete"]})]},"last")]},n.id||Math.random()))):e.jsx("tr",{className:"p-md text-base-content bg-base-200 flex-1",children:e.jsx("td",{colSpan:Object.keys(t).length+1,children:"no items"})})},K=({model:e,setSelectedItem:t,setErrorMessage:l})=>{const a=o(),s=()=>{a.invalidateQueries({queryKey:[e]}),t(null),l(null)},n=e=>{e instanceof Error?l(`An error occurred: ${e.message}`):l("An unexpected error occurred.")};return{createMutation:r({mutationFn:t=>(async(e,t)=>{const l=R[e]||"",a=$(),s=await fetch(`http://localhost:3004/${l}`,{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify(t)});if(!s.ok||""===l)throw new Error(`Failed to create ${e}`);return s.json()})(e||"",t),onSuccess:s,onError:n}),updateMutation:r({mutationFn:({id:t,item:l})=>(async(e,t,l)=>{const a=R[e]||"",s=$(),n=await fetch(`http://localhost:3004/${a}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify(l)});if(!n.ok)throw new Error(`Failed to update ${e}`);return n.json()})(e||"",t,l),onSuccess:s,onError:n}),deleteMutation:r({mutationFn:t=>(async(e,t)=>{const l=R[e]||"",a=$(),s=await fetch(`http://localhost:3004/${l}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}});if(!s.ok||""===l)throw new Error(`Failed to delete ${e}`);return s.json()})(e||"",t),onSuccess:s,onError:n})}},P=()=>{const{model:l,action:a,related:s,id:n}=y(),o=l?O[l]:null,r=N(),{navAction:i}=(()=>{const e=b(),{workspace:t,model:l,related:a,id:s}=y();return{navAction:(n,o,r,d)=>{e(r||a?`/${t}/pl/${n||l}/${o}/${r||a}/${d||s}`:`/${t}/pl/${n||l}/${o}`)}}})(),[c,u]=t.useState(null),[m,p]=t.useState(null);t.useEffect((()=>p(null)),[r.pathname]);const{data:x,isLoading:j,error:w}=d({queryKey:[l],queryFn:()=>(async(e,t,l)=>{const a=new URLSearchParams,s=t?`http://localhost:3004/${e}/${t}/${l}?${a}`:`http://localhost:3004/${e}?${a}`,n=await fetch(s);if(!n.ok)throw new Error(`Failed to fetch ${e}`);return await n.json()})(l||"",s,n),enabled:!!l}),{createMutation:g,updateMutation:f,deleteMutation:v}=K({model:l,setSelectedItem:u,setErrorMessage:p}),A=(e={})=>{u(e[`${s}Id`]?e:{...e,[`${s}Id`]:n}),i("","create")},C=()=>{u(null),i("","list")};return j?e.jsx("div",{children:"Loading..."}):w?e.jsxs("div",{children:["CRUD Error loading ",l]}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-md items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase",children:l}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>A(),children:[e.jsx(h,{})," Create New Item"]})]}),m&&e.jsx("div",{onClick:()=>p(null),className:"alert alert-error mb-4 cursor-pointer",children:m}),e.jsxs("table",{width:"100%",className:"table table-zebra w-full border-collapse ",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx(M,{config:o})})}),e.jsx("tbody",{children:l&&x[l]&&e.jsx(G,{config:o,handleSelect:A,handleRelation:e=>{u(null),"string"==typeof e._relatedFrom&&i(e._relatedFrom,"list",R[e._relatedTo],e.id.toString())},model:l,data:x,deleteMutation:v})})]}),e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn",children:"1"}),e.jsx("button",{className:"join-item btn",children:"2"}),e.jsx("button",{className:"join-item btn btn-disabled",children:"..."}),e.jsx("button",{className:"join-item btn",children:"99"}),e.jsx("button",{className:"join-item btn",children:"100"})]}),"create"===a&&e.jsxs(L,{handleClose:C,children:[e.jsx(_,{config:o,selectedItem:c,setSelectedItem:u}),e.jsx("button",{className:"btn btn-success mt-2",onClick:()=>{(null==c?void 0:c.id)?f.mutate({id:c.id,item:c}):g.mutate(c),i("","list")},children:"Save"}),e.jsx("button",{className:"btn btn-secondary mt-2 ml-2",onClick:C,children:"Cancel"})]})]}):e.jsxs("div",{children:['Error: Configuration could not be loaded for model "',l,'".']})},J=({label:l,value:a,isRequired:s,onChange:n})=>{const[o,r]=t.useState(null),d=JSON.stringify(a,null,2);return e.jsxs("div",{className:"json-editor mb-md",children:[e.jsxs("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[l," ",s&&e.jsx("span",{children:"*"})]}),e.jsx(C,{height:"200px",language:"json",value:d,onChange:e=>{if(void 0!==e)try{const t=JSON.parse(e);r(null),n(t)}catch(t){r("Invalid JSON syntax")}},theme:"vs-dark",options:{minimap:{enabled:!1},lineNumbers:"on"}}),o&&e.jsx("p",{style:{color:"red"},children:o})]})},X=({id:t,label:l,value:a,onChange:s,isRequired:n})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-2",children:[l," ",n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:t,type:"text",placeholder:l,value:a,onChange:e=>s(e.target.value),className:"input input-bordered w-full",required:n,"aria-label":l})]}),z=({id:t,label:l,value:a,options:s,isRequired:n,onChange:o})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-2",children:[l," ",n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:t,value:a,onChange:e=>o(e.target.value),className:"select select-bordered w-full",required:n,"aria-label":l,children:[e.jsxs("option",{value:"",disabled:!0,children:["Select ",l]}),s.map((t=>e.jsx("option",{value:t.value,children:t.label},t.value)))]})]}),H=({id:t,label:l,value:a,isRequired:s,onChange:n})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-2",children:[l," ",s&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:t,placeholder:l,value:a,onChange:e=>n(e.target.value),className:"textarea textarea-bordered w-full",required:s,"aria-label":l})]}),Q=({id:t,label:l,value:a,onChange:s,isRequired:n})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-2",children:[l," ",n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:t,type:"text",placeholder:l,value:a,onChange:e=>s(e.target.value),className:"input input-bordered w-full",required:n,"aria-label":l})]}),V=({level:t,content:l})=>{const a=`h${t}`;return e.jsx(a,{className:"font-bold container mx-auto",children:l})},W=({src:t,alt:l})=>e.jsx("img",{src:t,alt:l,className:"container mx-auto w-full"}),Z=({items:t,ordered:l=!1})=>{const a=l?"ol":"ul";return e.jsx(a,{className:"list-disc list-inside container mx-auto",children:t.map(((t,l)=>e.jsx("li",{children:t},l)))})},Y=({content:t,author:l})=>e.jsxs("blockquote",{className:"border-l-4 container mx-auto italic",children:[t,l&&e.jsxs("cite",{className:"block mt-2 text-right",children:["- ",l]})]}),ee=({content:t})=>e.jsx("p",{className:"container mx-auto",children:t}),te=({block:t})=>(t=>{switch(t.type){case"formTextInput":return e.jsx(Q,{id:t.data.id,label:t.data.label,value:t.data.value,isRequired:t.data.isRequired,onChange:t.data.onChange});case"formTextarea":return e.jsx(H,{id:t.data.id,label:t.data.label,value:t.data.value,isRequired:t.data.isRequired,onChange:t.data.onChange});case"formJSONInput":return e.jsx(J,{id:t.data.id,label:t.data.label,value:t.data.value,isRequired:t.data.isRequired,onChange:t.data.onChange});case"formSelectInput":return e.jsx(z,{id:t.data.id,label:t.data.label,value:t.data.value,options:t.data.options,isRequired:t.data.isRequired,onChange:t.data.onChange});case"formRelationInput":return e.jsx(X,{id:t.data.id,label:t.data.label,value:t.data.value,isRequired:t.data.isRequired,onChange:t.data.onChange});case"text":return e.jsx(ee,{content:t.data.content});case"image":return e.jsx(W,{src:t.data.src,alt:t.data.alt});case"heading":return e.jsx(V,{content:t.data.content,level:t.data.level});case"quote":return e.jsx(Y,{content:t.data.content,author:t.data.author});case"list":return e.jsx(Z,{items:t.data.items,ordered:t.data.ordered});case"crud":return e.jsx(P,{});default:return null}})(t),le=({blocks:t})=>e.jsx(e.Fragment,{children:t.map(((t,l)=>e.jsx("div",{children:e.jsx(te,{block:t})},l)))}),ae=({block:t,index:l,moveBlockUp:a,moveBlockDown:s,removeBlock:n})=>e.jsxs("div",{className:"flex justify-end mb-2",children:[e.jsx("button",{onClick:()=>a(l),className:"btn btn-secondary mr-2 btn-sm text-xs",children:"Up"}),e.jsx("button",{onClick:()=>s(l),className:"btn btn-secondary mr-2 btn-sm text-xs",children:"Down"}),e.jsx("button",{onClick:()=>n(t.id),className:"btn btn-error mr-2 btn-sm text-xs",children:"Remove"}),e.jsx("label",{htmlFor:`modal-${t.id}`,className:"btn btn-primary btn-sm text-xs",children:"Edit"})]}),se=({children:t,items:l})=>e.jsxs("div",{className:"drawer lg:drawer-open",children:[e.jsx("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),e.jsxs("div",{className:"drawer-content p-md",children:[e.jsx("label",{htmlFor:"my-drawer-2",className:"btn btn-ghost drawer-button lg:hidden mb-4",children:e.jsx(x,{})}),t]}),e.jsxs("div",{className:"drawer-side shadow-xl",children:[e.jsx("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),e.jsxs("div",{className:"menu text-base-content min-h-full w-80 gap-pl bg-base-100 p-0 gap-px",children:[e.jsx("div",{className:"px-6 py-2 bg-base-300",children:e.jsx(F,{})}),l,e.jsx("div",{className:"flex-1 bg-base-200"})]})]})]}),ne=({blocks:l,setBlocks:a})=>{const[s,n]=t.useState(null),[o,r]=t.useState(null),[d,i]=t.useState(null),c={text:{content:{type:"TEXT",label:"Content",allowNull:!1}},image:{src:{type:"TEXT",label:"Image URL",allowNull:!1},alt:{type:"TEXT",label:"Alt Text",allowNull:!0}},heading:{content:{type:"TEXT",label:"Heading Content",allowNull:!1},level:{type:"TEXT",label:"Heading Level",allowNull:!1}},quote:{content:{type:"TEXT",label:"Quote Content",allowNull:!1},author:{type:"TEXT",label:"Author",allowNull:!0}},list:{items:{type:"TEXT",label:"List Items",allowNull:!1},ordered:{type:"TEXT",label:"Ordered List",allowNull:!0}}},{createMutation:u,updateMutation:m}=K({model:"blocks",setSelectedItem:()=>{},setErrorMessage:i});t.useEffect((()=>{a(l)}),[l,a]),t.useEffect((()=>{if(s){const e=l.find((e=>e.id===s));r(e||null)}}),[s,l]);const p=e=>{a(l.filter((t=>t.id!==e))),n(null)},h=e=>{if(0===e)return;const t=[...l];[t[e],t[e-1]]=[t[e-1],t[e]],a(t)},x=e=>{if(e===l.length-1)return;const t=[...l];[t[e],t[e+1]]=[t[e+1],t[e]],a(t)};return e.jsx(se,{items:e.jsxs("div",{className:"grid grid-cols-2 gap-md p-md",children:[Object.keys(c).map((t=>e.jsxs("button",{onClick:()=>(e=>{const t={id:`${Date.now()}`,type:e,data:{}};let o=[];if(s){const e=l.findIndex((e=>e.id===s));o=[...l],o.splice(e+1,0,t)}else o=[...l,t];a(o),n(t.id)})(t),className:"btn btn-primary  btn-outline",children:["Add ",t.charAt(0).toUpperCase()+t.slice(1)]},t))),e.jsx("button",{onClick:()=>{l.some((e=>e.id))?m.mutate({id:"blocks_id",item:l}):u.mutate(l)},className:"btn btn-success  col-span-2",children:"Save Content"})]}),children:e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:"alert alert-error mb-4",children:d}),e.jsx("div",{children:l.map(((t,r)=>e.jsxs("div",{className:"mb-4 border p-2 "+(s===t.id?"border-base-content":"border-base-content border-dashed border-opacity-30"),onClick:()=>n(t.id),children:[s===t.id&&e.jsx(ae,{block:t,index:r,selectedBlockId:s,setSelectedBlockId:n,moveBlockUp:h,moveBlockDown:x,removeBlock:p}),e.jsx(te,{block:t}),s===t.id&&o&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",id:`modal-${t.id}`,className:"modal-toggle"}),e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Edit Block"}),e.jsx(_,{config:c[t.type],selectedItem:o.data,setSelectedItem:e=>{return s=t.id,n=e,void a(l.map((e=>e.id===s?{...e,data:n}:e)));var s,n}}),e.jsx("div",{className:"modal-action",children:e.jsx("label",{htmlFor:`modal-${t.id}`,className:"btn",children:"Close"})})]})})]})]},t.id)))})]})})},oe=l.lazy((()=>U((()=>import("./MainDashboard-Cd6Qpzx3.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])))),re=l.lazy((()=>U((()=>import("./OneColumn-DFJLzCf8.js")),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11])))),de=l.lazy((()=>U((()=>import("./TwoColumns-PGbjSz8j.js")),__vite__mapDeps([13,1])))),ie=()=>{var l,a,s,n;const{workspace:o,model:r,action:i}=y(),{data:c,isLoading:u,error:m}=d({queryKey:["workspace_layout",o],queryFn:()=>q("workspace",o||"home")}),p=null==(a=null==(l=null==c?void 0:c.workspace)?void 0:l.content)?void 0:a.withPages,{data:h,isLoading:x,error:b}=d({queryKey:["model_data",r],queryFn:()=>q("document",r||"index"),enabled:p}),N={MainDashboard:oe,OneColumn:re,TwoColumns:de},[j,w]=t.useState([]);if(t.useEffect((()=>{var e,t;(null==(t=null==(e=null==h?void 0:h.document)?void 0:e.content)?void 0:t.blocks)&&w(h.document.content.blocks)}),[h]),u||p&&x)return e.jsx("div",{className:"container mx-auto",children:"Loading..."});if(m||p&&b)return e.jsx("div",{className:"container mx-auto",children:"Error loading data"});const g=N[(null==(n=null==(s=null==c?void 0:c.workspace)?void 0:s.content)?void 0:n.layout)||"MainDashboard"]||null;return"edit-block"===i?p&&j.length>0?e.jsx(ne,{blocks:j.length>0?j:[],setBlocks:w}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:g?e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading layout..."}),children:e.jsx(g,{content:p&&j.length>0?e.jsx(le,{blocks:j}):p?e.jsx("div",{children:"No content available"}):e.jsx("div",{children:"No pages to display"})})}):e.jsx(e.Fragment,{children:"No layout found"})})};function ce(){return e.jsx(c,{children:e.jsxs(j,{children:[e.jsx(w,{path:"/",element:e.jsx(g,{to:"/home/pl/index"})})," ",e.jsx(w,{path:":workspace/:lang/:model",element:e.jsx(ie,{})}),e.jsx(w,{path:":workspace/:lang/:model/:action/",element:e.jsx(ie,{})}),e.jsx(w,{path:":workspace/:lang/:model/:action/:related/:id",element:e.jsx(ie,{})})]})})}function ue(){const[l,a]=t.useState(localStorage.getItem("theme")||"default");t.useEffect((()=>{document.documentElement.setAttribute("data-theme",l),localStorage.setItem("theme",l)}),[l]);return e.jsxs("div",{className:"transition-colors flex flex-col min-h-screen","data-theme":l,children:[e.jsx(k,{children:e.jsx(D,{children:e.jsx(ce,{})})}),e.jsx("div",{className:"flex-1"}),e.jsx(I,{theme:l,handleThemeChange:e=>{a(e.target.value)}})]})}a.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(ue,{})}));export{P as C,se as D,R as M,E as U};
